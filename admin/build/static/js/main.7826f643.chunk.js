(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{200:function(e,t,n){},296:function(e,t,n){"use strict";n.r(t);var a=n(61),i=n.n(a),l=n(82),c=n(0),s=n.n(c),r=n(40),o=n.n(r),d=n(7),u=(n(200),n(87)),j=n(316),b=n(317),m=n(318),f=n(319),v=n(320),O=n(312),h=n(321),x=n(309),p=n(1);var g=n(180),y=n(303),N=n(36),k=n(298),C=n(308),w=n(310),S=n(30),A=n(31),T=n(176),M=n.n(T),D=function(){function e(){Object(S.a)(this,e),this.setUserData=function(e){window.localStorage.clear(),window.localStorage.setItem("authorization",e.accessToken),window.localStorage.setItem("refreshToken",e.refreshToken),window.localStorage.setItem("modules",e.modules),window.localStorage.setItem("userType",e.userType)},this.getUserData=function(e){return e?JSON.parse(window.localStorage.user)[e]:JSON.parse(window.localStorage.user)},this.getToken=function(){return window.localStorage.authorization||""},this.isLogged=function(){return"undefined"!==typeof window.localStorage.authorization&&""!==window.localStorage.authorization},this.logout=function(e){e&&e.preventDefault(),window.localStorage.clear(),window.location.reload()}}return Object(A.a)(e,[{key:"getModules",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?(window.localStorage.modules||"").split(",").includes(e)||"superAdmin"===window.localStorage.userType?e:null:(window.localStorage.modules||"").split(",")}},{key:"isSuperAdmin",value:function(){return"superAdmin"===window.localStorage.userType}},{key:"isStateAdmin",value:function(){return"stateAdmin"===window.localStorage.userType}},{key:"isDistrictAdmin",value:function(){return"districtAdmin"===window.localStorage.userType}},{key:"isTalukAdmin",value:function(){return"talukAdmin"===window.localStorage.userType}},{key:"setTheme",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";window.localStorage.setItem("theme",e);var t={light:"./css/antd.min.css",dark:"./css/antd.dark.min.css"},n=document.createElement("link");return n.rel="stylesheet",n.id="antd-stylesheet-"+e,n.href=t[e],document.head.appendChild(n),setTimeout((function(){var t,n;"light"===e&&(null===(t=document.getElementById("antd-stylesheet-dark"))||void 0===t||t.remove());"dark"===e&&(null===(n=document.getElementById("antd-stylesheet-light"))||void 0===n||n.remove())}),500),e}},{key:"getTheme",value:function(){var e;return null===(e=window.localStorage)||void 0===e?void 0:e.theme}},{key:"removeSpecialChars",value:function(e){return e.toLowerCase().replace(/[^a-z0-9 _-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}},{key:"handleInteger",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null===e||void 0===e?void 0:e.replace(/[^0-9]/g,"");return t?null===n||void 0===n?void 0:n.substring(0,t):n}},{key:"handleFloat",value:function(e,t){var n=(e=e.replace(/[^0-9.]/g,"")).replace(/[\.\%]/g,(function(e,t,n){return"."===e&&n.indexOf(".")===t?".":""}));return t&&1*n>1*t&&(n=t),n}},{key:"toBase64",value:function(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))}},{key:"queryStringToJSON",value:function(e){"?"===(e=e||window.location.search.slice(1)).charAt(0)&&(e=e.slice(1));var t=e.split("&"),n={};return t.forEach((function(e){var t=e.split("="),a=t[0],i=decodeURIComponent(t[1]||"");n[a]?"[object Array]"===Object.prototype.toString.call(n[a])?n[a].push(i):n[a]=[n[a],i]:n[a]=i})),JSON.parse(JSON.stringify(n))}}]),e}(),F=new D,I=F.getModules(),R=F.isSuperAdmin(),_=M.a.create({baseURL:"localhost"!==window.location.hostname?"https://demoaanaxagorasr.net/rupiloan/admin-api/public/api/admin/":"http://localhost:3003/admin/"});_.interceptors.request.use((function(e){return R||"ignoreModule"===e.module||I.includes(e.module)?(e.headers.authorization="Bearer "+F.getToken(),e):Promise.reject(new Error("Unauthorized"))}),(function(e){return Promise.reject(e)})),_.interceptors.response.use((function(e){return e.data}),(function(e){var t,n,a={};"undefined"!==typeof e.response?((null===(n=a=null===(t=e.response)||void 0===t?void 0:t.data)||void 0===n?void 0:n.message)||(a.message=e.message),a.errors&&Array.isArray(a.errors)&&(a.message=a.errors[0].msg)):a.message=e.message;return Promise.reject(a)}));var L=_,E=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"details",value:function(e,t){return L.post(this.baseURL+"profile/details",{params:e,module:t})}},{key:"list",value:function(e,t){return L.get(this.baseURL+"list",{params:e,module:t})}},{key:"listAll",value:function(e,t){return L.get(this.baseURL+"list/ALL",{params:e,module:t})}},{key:"save",value:function(e,t){return L.post(this.baseURL+"save",e,{module:t})}},{key:"delete",value:function(e,t){return L.delete("".concat(this.baseURL,"/delete/").concat(e),{module:t})}}]),e}();E.baseURL="user/";var q=n(22),U=n(8),P=n(305),Y=n(68),z=n(44),V=n(113),B=n(32),K=n.n(B),H=n(110),W=n(301),J=n(186),G=n(192),Z=n(111),Q=n(189),X=n(302),$=n(306),ee=n(193),te=["placeholder","options","value","sort","defaultValue"],ne=["format","getFormat","inputReadOnly","value","defaultValue","onChange","disablePastDate","disableUpcomingDate"];function ae(e){var t,n=e.placeholder,a=e.options,i=e.value,l=e.sort,c=e.defaultValue,s=Object(V.a)(e,te);if(!a.length>0&&(i=c),(i&&"object"!==typeof i||"boolean"===typeof i)&&(i+=""),"object"!==typeof a&&(a=[]),"undefined"===typeof(null===(t=a[0])||void 0===t?void 0:t.value)){var r=Object(z.a)(a);a=[],r.forEach((function(e){a.push({value:e.id||e._id,label:e.title||e.name})}))}return a.forEach((function(e){e.value+="",e.label+=""})),l&&a.sort((function(e,t){return(""+e.label).localeCompare(t.label)})),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(H.a,Object(U.a)({style:{width:"100%"},placeholder:n||"Select",options:a,value:null!==i&&"undefined"!==typeof i?i:void 0,filterOption:function(e,t){var n;return(null===t||void 0===t||null===(n=t.label)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0}},s))})}function ie(e){var t=e.format,n=e.getFormat,a=void 0===n?"YYYY-MM-DD":n,i=e.inputReadOnly,l=e.value,s=e.defaultValue,r=e.onChange,o=e.disablePastDate,d=void 0!==o&&o,u=e.disableUpcomingDate,j=void 0!==u&&u,b=Object(V.a)(e,ne),m={};return"undefined"!==typeof l&&(m.value=K()(new Date(l||new Date),t||"DD MMM YYYY")),"undefined"!==typeof s&&(m.defaultValue=s?K()(new Date(s)):null),"undefined"!==typeof r&&(m.onChange=function(e){r(e?K()(e).format(a):null)}),Object(c.useEffect)((function(){r(K()(l).format(a))}),[]),Object(p.jsx)(W.a,Object(U.a)(Object(U.a)(Object(U.a)({format:t||"DD MMM YYYY",inputReadOnly:i||!0,disabledDate:function(e){var t=K()().format("YYYY-MM-DD");return d?e&&e<K()(t,"YYYY-MM-DD"):j?e&&e>K()(t,"YYYY-MM-DD"):void 0}},m),b),{},{style:{width:"100%"}}))}function le(e){var t=e.col,n=void 0===t?3:t,a="object"===typeof e.value?"array":"string",i=Object(c.useState)(),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)([]),u=Object(d.a)(o,2),j=u[0],b=u[1],m=function(e){var t=1*typeof e.target.value!=="NaN"?e.target.value+"":1*e.target.value;e.target.checked?(s.push(t),r(Object(z.a)(s))):s.indexOf(t)>-1&&(s.splice(s.indexOf(t),1),r(Object(z.a)(s)))};return Object(c.useEffect)((function(){"string"===a?(s=e.value?e.value.split(",").map((function(e){return 1*e})):[],r(Object(z.a)(s))):r(Object(z.a)(e.value))}),[e.value]),Object(c.useEffect)((function(){var t=e.options.map((function(e,t){return e.value?{value:1*e.value,label:e.label}:e.id?{value:1*e.id,label:e.name||e.title||e.label}:e._id?{value:e._id+"",label:e.name||e.title||e.label}:null}));b(t)}),[e.options]),Object(c.useEffect)((function(){e.onChange(s)}),[(s||[]).join(",")]),Object(p.jsx)("div",{className:"row mingap",children:j.map((function(e,t){var a;return Object(p.jsx)("div",{className:"col-md-".concat(n," mb-2 form-group"),children:Object(p.jsx)("div",{className:"border p-1",children:Object(p.jsx)(Z.a,{value:1*typeof e.value!=="NaN"?e.value+"":1*e.value,checked:null===(a=s)||void 0===a?void 0:a.includes(1*typeof e.value!=="NaN"?e.value+"":1*e.value),onChange:m,className:"mx-0 mr15",children:e.label})})},t)}))})}function ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";e&&("success"===t&&Q.b.success(e),"error"===t&&Q.b.error(e),"warning"===t&&Q.b.warning(e))}function se(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))}var re=Object(c.forwardRef)((function(e,t){var n,a=e.fileCount,s=t,r=e.files;(Object(c.useEffect)((function(){b(r)}),[r]),r.length)?r=null===(n=r)||void 0===n?void 0:n.map((function(e,t){return{uid:t,url:e.url,status:"done",name:e.name}})):r=[];var o=Object(c.useState)(r),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)(!1),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)(""),x=Object(d.a)(h,2),g=x[0],y=x[1],N=Object(c.useState)(""),k=Object(d.a)(N,2),C=k[0],w=k[1],S=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,se(t.originFileObj);case 3:t.preview=e.sent;case 4:O(!0),y(t.url||t.preview),w(t.name||t.url.substring(t.url.lastIndexOf("/")+1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=Object(p.jsxs)("div",{children:[Object(p.jsx)(ee.a,{}),Object(p.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(X.a,{listType:"picture-card",customRequest:function(e){var t=e.file,n=e.onSuccess;setTimeout((function(){var e;n("ok"),s.current.uploadingFiles||(s.current.uploadingFiles=[]),null===(e=s.current.uploadingFiles)||void 0===e||e.push(t)}),0)},fileList:j,onPreview:S,onChange:function(e){("removed"===e.file.status||e.file.status)&&function(e){var t=e.fileList;b(t)}(e)},beforeUpload:function(e){if(!e.type.includes("image/"))return Q.b.error("Invalid file type"),!1},onRemove:function(e){var t;(s.current.deletingFiles||(s.current.deletingFiles=[]),e.thumbUrl)?s.current.uploadingFiles=s.current.uploadingFiles.filter((function(t){return t.uid!==e.uid})):null===(t=s.current.deletingFiles)||void 0===t||t.push(e)},children:j.length>=a?null:A}),Object(p.jsx)($.a,{visible:v,title:C,footer:null,onCancel:function(){return O(!1)},children:Object(p.jsx)("img",{alt:"example",style:{width:"100%"},src:g})})]})})),oe=re;function de(e){var t=e.callback,n=Object(c.useState)(!1),a=Object(d.a)(n,2),i=a[0],l=a[1],s=Object(c.useState)({}),r=Object(d.a)(s,2),o=r[0],u=r[1],j=Object(c.useRef)([]);Object(c.useEffect)((function(){!function(e){l(!0),E.details(e).then((function(e){var t;u((null===(t=e.result)||void 0===t?void 0:t.data)||{})})).catch((function(e){ce(e.message,"error")})).finally((function(){l(!1)}))}()}),[]);var b=function(e,t){u(Object(U.a)(Object(U.a)({},o),{},Object(q.a)({},t,e)))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(g.a,{spinning:i,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:[Object(p.jsx)("div",{className:"d-flex",children:Object(p.jsxs)("div",{className:"row w-100",children:[Object(p.jsxs)("div",{className:"col-md-9",children:[Object(p.jsxs)("div",{className:"d-flex my-3",children:[Object(p.jsx)("span",{className:"w100 text-secondary text-bold",children:"Name :"}),Object(p.jsx)(P.a,{value:o.name||"",onChange:function(e){return b(e.target.value,"name")}})]}),Object(p.jsxs)("div",{className:"d-flex my-3",children:[Object(p.jsx)("span",{className:"w100 text-secondary text-bold",children:"username :"}),Object(p.jsx)(P.a,{value:o.username||"",onChange:function(e){return b(e.target.value,"username")}})]}),Object(p.jsxs)("div",{className:"d-flex my-3",children:[Object(p.jsx)("span",{className:"w100 text-secondary text-bold",children:"email :"}),Object(p.jsx)(P.a,{value:o.email||"",onChange:function(e){return b(e.target.value,"email")}})]})]}),Object(p.jsx)("div",{className:"col-md-3 my-3",children:Object(p.jsx)(oe,{ref:j,fileCount:1,files:o.image?[o.image]:[]})}),Object(p.jsxs)("div",{className:"row col-md-12",children:[Object(p.jsxs)("div",{className:"col-md-6 d-flex my-3 ",children:[Object(p.jsx)("span",{className:"w100 text-secondary text-bold",children:"Mobile :"}),Object(p.jsx)(P.a,{value:o.mobile||"",onChange:function(e){return b(e.target.value,"mobile")}})]}),Object(p.jsxs)("div",{className:"col-md-6 d-flex my-3",children:[Object(p.jsx)("span",{className:"w100 text-secondary text-bold",children:"Gender :"}),Object(p.jsx)(ae,{options:[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"}],value:o.gender,onChange:function(e){b(e,"gender")}})]}),Object(p.jsxs)("div",{className:"col-md-6 d-flex my-3",children:[Object(p.jsx)("span",{className:"w100 text-secondary text-bold",children:"DOB :"}),Object(p.jsx)(ie,{format:"MMMM D, YYYY",value:(o.dob||"")+"",onChange:function(e){b(e,"dob")}})]}),Object(p.jsxs)("div",{className:"col-md-12 d-flex my-3",children:[Object(p.jsx)("span",{className:"w100 text-secondary text-bold",children:"Address :"}),Object(p.jsx)(P.a.TextArea,{value:o.address||"",onChange:function(e){return b(e.target.value,"address")}})]})]})]})}),Object(p.jsx)("div",{className:"d-flex mt-2",children:Object(p.jsx)(N.a,{type:"primary",className:"ml-auto w100",onClick:function(){l(!0);for(var e=new FormData,n=0,a=Object.entries(o);n<a.length;n++){var i=Object(d.a)(a[n],2),c=i[0],s=i[1];e.append(c,s)}e.delete("image"),"undefined"!==typeof j.current.uploadingFiles&&e.append("image",j.current.uploadingFiles[0]),E.save(e).then((function(e){ce(e.message),t()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){l(!1)}))},disabled:i,children:"Save"})})]})})}function ue(e){var t=e.cond,n=e.children;return t?n:Object(p.jsx)(p.Fragment,{})}var je=Object(c.forwardRef)((function(e,t){var n=e.list,a=Object(c.useState)(!1),i=Object(d.a)(a,2),l=i[0],s=i[1];Object(c.useImperativeHandle)(t,(function(){return{openForm:function(){s(!0)},closeForm:function(){s(!1)}}}));var r=function(){s(!1)};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(C.a,{title:"Update Profile",placement:"right",width:700,onClose:r,visible:l,extra:Object(p.jsxs)(w.b,{children:[Object(p.jsx)(N.a,{onClick:r,children:"Cancel"}),Object(p.jsx)(N.a,{type:"primary",onClick:r,children:"OK"})]}),children:Object(p.jsx)(ue,{cond:l,children:Object(p.jsx)(de,{callback:n})})})})})),be=n(300);function me(e){var t=e.sdata,n=e.handleSData,a=e.setSData;return Object(p.jsx)(ue,{cond:t.total>0,children:Object(p.jsx)(J.a,{total:t.total,showTotal:function(){var e=(t.page-1)*t.limit*1+1,n=t.page*t.limit;return Object(p.jsx)(G.a,{color:"magenta",children:"Showing "+e+" - "+n+" out of "+t.total})},pageSize:t.limit,current:t.page,onChange:function(e,i){n(e,"page"),t.limit!==i&&a(Object(U.a)(Object(U.a)({},t),{},{page:1,limit:i}))},showSizeChanger:!0})})}function fe(e){var t,n=e.columns,a=e.data,i=e.parentSData,l=e.loading,s=e.formRef,r=e.list,o=e.filters,u=e.searchPlaceholder,j=e.addNew,b=void 0===j||j,m=e.addNewIcon,f=void 0===m?ee.a:m,v=e.addNewText,O=void 0===v?"Add New":v,h=Object(c.useState)(Object(U.a)({},i)),x=Object(d.a)(h,2),g=x[0],y=x[1],N=function(e,t){"key"===t&&(g.page=1),y(Object(U.a)(Object(U.a)({},g),{},Object(q.a)({},t,e)))};Object(c.useEffect)((function(){i.total&&N(i.total,"total")}),[i.total]),Object(c.useEffect)((function(){g.total&&r(g)}),[g.page,g.limit]),a=null===(t=a)||void 0===t?void 0:t.map((function(e,t){return Object(U.a)({index:t+1,key:t},e)})),n=[{title:"S/N",dataIndex:"index",width:45}].concat(Object(z.a)(n));var k={bordered:!0,loading:l,size:"small",title:function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(ve,{sdata:g,handleSData:N,formRef:s,list:r,filters:o,searchPlaceholder:u,addNew:b,addNewIcon:f,addNewText:O})})},showHeader:!0,footer:function(){return Object(p.jsx)(me,{sdata:g,handleSData:N,setSData:y})},scroll:void 0,hasData:!0,tableLayout:void 0,yScroll:"calc(100vh - 316px)"},C=k.xScroll,w=k.yScroll,S={};w&&(S.y=w),C&&(S.x=C);var A=n.map((function(e){return Object(U.a)({},e)}));return"fixed"===C&&(A[0].fixed=!0,A[A.length-1].fixed="right"),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(be.a,Object(U.a)(Object(U.a)({},k),{},{pagination:{position:["none"],pageSize:g.limit},columns:A,dataSource:k.hasData?a:null,scroll:S}))})}var ve=function(e){var t=e.sdata,n=e.handleSData,a=e.formRef,i=e.list,l=e.filters,c=e.searchPlaceholder,r=e.addNew,o=e.addNewIcon,d=e.addNewText;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"d-flex",children:["undefined"!==typeof t.key?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(P.a,{className:"w200 mx-1",allowClear:!0,placeholder:c||"Search",value:t.key||"",onChange:function(e){n(e.target.value,"key")}}),"undefined"!==typeof l?l.map((function(e,a){return Object(p.jsx)(s.a.Fragment,{children:"dropdown"===e.type?Object(p.jsx)(ae,{style:e.style,placeholder:e.placeholder||"Select",className:null===e||void 0===e?void 0:e.className,allowClear:!0,options:e.options,value:(null===t||void 0===t?void 0:t[e.key])||void 0,onChange:function(t){n(t,e.key)}}):null},a)})):null,Object(p.jsx)(N.a,{type:"primary",onClick:function(){i(t)},children:"Search"})]}):null,r?Object(p.jsx)(N.a,{type:"primary",className:"ml-auto",children:Object(p.jsxs)("span",{className:"d-flex",onClick:function(){a.current.openForm()},children:[Object(p.jsx)(o,{className:"my-auto mx-1"}),d]})}):null]})})},Oe=n(299),he=n(311),xe=n(99),pe=n(194),ge=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"list",value:function(e,t){return L.get(this.baseURL+"/list",{params:e,module:t})}},{key:"listAll",value:function(e){return L.get(this.baseURL+"/list/ALL",{module:e})}},{key:"listAllIgnoreStatus",value:function(e){return L.get(this.baseURL+"/all/ignore-status",{module:e})}},{key:"save",value:function(e,t){return L.post(this.baseURL+"/save",e,{module:t})}},{key:"delete",value:function(e,t){return L.delete("".concat(this.baseURL,"/delete/").concat(e),{module:t})}}]),e}();function ye(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))}ge.baseURL="customer";var Ne=Object(c.forwardRef)((function(e,t){var n,a=e.fileCount,s=e.files;s.length?s=null===(n=s)||void 0===n?void 0:n.map((function(e,t){return{uid:t,url:e.url,status:"done",name:e.name}})):s=[];var r=t,o=Object(c.useState)(s),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)(!1),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)(""),x=Object(d.a)(h,2),g=x[0],y=x[1],N=Object(c.useState)(""),k=Object(d.a)(N,2),C=k[0],w=k[1],S=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,ye(t.originFileObj);case 3:t.preview=e.sent;case 4:O(!0),y(t.url||t.preview),w(t.name||t.url.substring(t.url.lastIndexOf("/")+1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=Object(p.jsxs)("div",{children:[Object(p.jsx)(ee.a,{}),Object(p.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(X.a,{listType:"picture-card",customRequest:function(e){var t=e.file,n=e.onSuccess;setTimeout(Object(l.a)(i.a.mark((function e(){var a,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n("ok"),r.current.uploadingFiles||(r.current.uploadingFiles=[]),e.next=4,ye(t);case 4:l=e.sent,null===(a=r.current.uploadingFiles)||void 0===a||a.push({uid:t.uid,base64:l});case 6:case"end":return e.stop()}}),e)}))),0)},fileList:j,onPreview:S,onChange:function(e){("removed"===e.file.status||e.file.status)&&function(e){var t=e.fileList;b(t)}(e)},multiple:a>1,onRemove:function(e){var t,n;(r.current.deletingFiles||(r.current.deletingFiles=[]),e.thumbUrl)?r.current.uploadingFiles=null===(t=r.current.uploadingFiles)||void 0===t?void 0:t.filter((function(t){return t.uid!==e.uid})):null===(n=r.current.deletingFiles)||void 0===n||n.push(e.name)},beforeUpload:function(e){if(!e.type.includes("image/"))return Q.b.error("Invalid file type"),!1},children:j.length>=a?null:A}),Object(p.jsx)($.a,{visible:v,title:C,footer:null,onCancel:function(){return O(!1)},children:Object(p.jsx)("img",{alt:"example",style:{width:"100%"},src:g})})]})})),ke=Ne,Ce=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"listSdt",value:function(e){return L.get(this.baseURL+"sdt",{module:e})}},{key:"listState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"viewState";return L.get(this.baseURL+"state/list",{params:e,module:t})}},{key:"listAllState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"viewState";return L.get(this.baseURL+"state/list/ALL",{params:e,module:t})}},{key:"saveState",value:function(e,t){return L.post(this.baseURL+"state/save",e,{module:t})}},{key:"deleteState",value:function(e,t){return L.delete("".concat(this.baseURL,"/state/delete/").concat(e),{module:t})}},{key:"listDistrict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"viewDistrict";return L.get(this.baseURL+"district/list",{params:e,module:t})}},{key:"listAllDistrict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"viewDistrict";return L.get(this.baseURL+"district/list/ALL",{params:e,module:t})}},{key:"saveDistrict",value:function(e,t){return L.post(this.baseURL+"district/save",e,{module:t})}},{key:"deleteDistrict",value:function(e,t){return L.delete("".concat(this.baseURL,"/district/delete/").concat(e),{module:t})}},{key:"listTaluk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"viewTaluk";return L.get(this.baseURL+"taluk/list",{params:e,module:t})}},{key:"listAllTaluk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"viewTaluk";return L.get(this.baseURL+"taluk/list/ALL",{params:e,module:t})}},{key:"saveTaluk",value:function(e,t){return L.post(this.baseURL+"taluk/save",e,{module:t})}},{key:"deleteTaluk",value:function(e,t){return L.delete("".concat(this.baseURL,"/taluk/delete/").concat(e),{module:t})}}]),e}();Ce.baseURL="sdt/";var we={view:F.getModules("viewCustomer"),add:F.getModules("addCustomer"),edit:F.getModules("editCustomer"),delete:F.getModules("deleteCustomer")},Se=we.view,Ae=we.add,Te=we.edit,Me=we.delete;var De=Object(c.forwardRef)((function(e,t){var n=e.list,a=e.sdt,i=Object(c.useState)(!1),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!1),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)({}),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)([]),x=Object(d.a)(h,2),y=x[0],N=x[1],k=Object(c.useState)([]),C=Object(d.a)(k,2),w=C[0],S=C[1],A=Object(c.useState)(!1),T=Object(d.a)(A,2),M=T[0],D=T[1],I=Object(c.useRef)(),R=function(e){b(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){I.current={},O(e?Object(U.a)({},e):{isActive:!0}),R(!0),!(null===e||void 0===e?void 0:e._id)&&Ae||(null===e||void 0===e?void 0:e._id)&&Te?D(!0):D(!1)}}}));var _=function(e,t){O(Object(U.a)(Object(U.a)({},v),{},Object(q.a)({},t,e)))},L=function(){var e,t,a;r(!0),v.photo=null===I||void 0===I||null===(e=I.current)||void 0===e||null===(t=e.uploadingFiles)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.base64,ge.save(v,v._id?Te:Ae).then((function(e){ce(e.message),R(!1),n()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){r(!1)}))};return Object(c.useEffect)((function(){var e,t=(null===(e=a.find((function(e){return e._id===v.state})))||void 0===e?void 0:e.districts)||[];N((null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name,taluks:e.taluks}})))||[])}),[v.state]),Object(c.useEffect)((function(){var e,t=(null===y||void 0===y||null===(e=y.find((function(e){return e.value===v.district})))||void 0===e?void 0:e.taluks)||[];S(null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name}})))}),[v.district,y]),Object(c.useEffect)((function(){(function(){var e,t;return null===a||void 0===a||null===(e=a.find((function(e){return e._id===v.state})))||void 0===e||null===(t=e.districts.map((function(e){return e._id})))||void 0===t?void 0:t.includes(v.district)})()||_("","district")}),[v.state]),Object(c.useEffect)((function(){(function(){var e,t,n,i;return null===a||void 0===a||null===(e=a.find((function(e){return e._id===v.state})))||void 0===e||null===(t=e.districts.find((function(e){return e._id===v.district})))||void 0===t||null===(n=t.taluks)||void 0===n||null===(i=n.map((function(e){return e._id})))||void 0===i?void 0:i.includes(v.taluk)})()||_("","taluk")}),[v.district,y]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(v._id?"Edit":"Add")+" Customer",style:{top:20},visible:j,okText:"Save",onOk:L,okButtonProps:{disabled:s||!M,style:{display:M?"inline-block":"none"}},onCancel:function(){R(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:s,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),L()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!M,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"First Name"}),Object(p.jsx)(P.a,{value:v.firstName||"",onChange:function(e){return _(e.target.value,"firstName")}})]}),Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Last Name"}),Object(p.jsx)(P.a,{value:v.lastName||"",onChange:function(e){return _(e.target.value,"lastName")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Email"}),Object(p.jsx)(P.a,{value:v.email||"",onChange:function(e){return _(e.target.value,"email")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Phone No."}),Object(p.jsx)(P.a,{value:v.phoneNo||"",onChange:function(e){return _(F.handleInteger(e.target.value),"phoneNo")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsxs)("label",{className:v._id?"":"req",children:[v._id?"Update":"Set"," Password"]}),Object(p.jsx)(P.a,{value:v.password||"",onChange:function(e){return _(e.target.value,"password")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"DOB"}),Object(p.jsx)(ie,{format:"MMMM D, YYYY",value:v.dob||new Date,onChange:function(e){_(e,"dob")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"State"}),Object(p.jsx)(ae,{options:a.map((function(e){return{value:e._id,label:e.name}})),value:v.state,onChange:function(e){_(e,"state")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"District"}),Object(p.jsx)(ae,{options:y||[],value:v.district,onChange:function(e){_(e,"district")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Taluk"}),Object(p.jsx)(ae,{options:w||[],value:v.taluk,onChange:function(e){_(e,"taluk")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Zip Code"}),Object(p.jsx)(P.a,{value:v.zipcode||"",onChange:function(e){_(F.handleInteger(e.target.value,6),"zipcode")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Address"}),Object(p.jsx)(P.a.TextArea,{value:v.address||"",onChange:function(e){_(e.target.value,"address")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Image"}),Object(p.jsx)(ke,{ref:I,fileCount:1,files:v.image?[v.image]:[]})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ae,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:v.isActive,onChange:function(e){_(e,"isActive")}})]})]})})})})})})})),Fe=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"listModules",value:function(e,t){return L.get(this.baseURL+"/list-modules",{params:e,module:t})}},{key:"listModulesAll",value:function(e,t){return L.get(this.baseURL+"/list-modules/ALL",{params:e,module:t})}},{key:"saveModule",value:function(e,t){return L.post(this.baseURL+"/save-module",e,{module:t})}},{key:"deleteModule",value:function(e,t){return L.delete("".concat(this.baseURL,"/delete-module/").concat(e),{module:t})}},{key:"listAdminModules",value:function(e,t){return L.get(this.baseURL+"/admin-modules",{params:e,module:t})}},{key:"saveAdminModules",value:function(e,t){return L.post(this.baseURL+"/save-admin-modules",e,{module:t})}}]),e}();Fe.baseURL="adm";var Ie=Object(c.forwardRef)((function(e,t){var n=e.list,a=e.modules,i=Object(c.useState)(!1),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!1),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)({}),f=Object(d.a)(m,2),v=f[0],O=f[1],h=function(e){b(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){O(Object(U.a)({},e)),h(!0)}}}));var x=function(e,t){O(Object(U.a)(Object(U.a)({},v),{},Object(q.a)({},t,e)))},y=function(){r(!0),Fe.saveAdminModules(v).then((function(e){ce(e.message),h(!1),n()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){r(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:"Add / Remove Modules",style:{top:20},visible:j,okText:"Save",onOk:y,okButtonProps:{disabled:s},onCancel:function(){h(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:s,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),y()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{children:Object(p.jsx)("div",{className:"row mingap",children:Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"col-md-12 form-group",children:Object(p.jsxs)("div",{className:"d-flex mb-2",children:[Object(p.jsx)(N.a,{size:"small",danger:!0,className:"ml-auto mx-2",onClick:function(){x([],"grantedModules")},children:" Uncheck All Modules"}),Object(p.jsx)(N.a,{size:"small",type:"primary",onClick:function(){x(null===a||void 0===a?void 0:a.map((function(e){return null===e||void 0===e?void 0:e._id})),"grantedModules")},children:" Check All Modules"})]})}),Object(p.jsx)("div",{className:"col-md-12 form-group",children:Object(p.jsx)(le,{options:null===a||void 0===a?void 0:a.map((function(e){return{_id:e.key,label:e.title}})),value:v.grantedModules,onChange:function(e){!(null===e||void 0===e?void 0:e.length)||x(e,"grantedModules")}})})]})})})})})})})})),Re={userType:""};function _e(e){var t=e.data,n=e.handleChange,a=e.key,i=void 0===a?"type":a,l=Object(c.useState)(Object(U.a)({},t)),s=Object(d.a)(l,2),r=s[0],o=s[1],u="superAdmin"===Re.userType?[{value:"stateAdmin",label:"State Admin"},{value:"districtAdmin",label:"District Admin"},{value:"talukAdmin",label:"Taluk Admin"}]:"stateAdmin"===Re.userType?[{value:"districtAdmin",label:"District Admin"},{value:"talukAdmin",label:"Taluk Admin"}]:"talukAdmin"===Re.userType?[{value:"talukAdmin",label:"Taluk Admin"}]:[];return Object(c.useEffect)((function(){o(Object(U.a)({},t))}),[t[i]]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(ae,{options:u,value:r[i],onChange:function(e){n(e,i)}})})}var Le={view:F.getModules("viewUser"),add:F.getModules("addUser"),edit:F.getModules("editUser"),delete:F.getModules("deleteUser")},Ee=Le.view,qe=Le.add,Ue=Le.edit,Pe=Le.delete;var Ye=Object(c.forwardRef)((function(e,t){var n=e.list,a=e.sdt,i=Object(c.useState)(!1),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!1),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)({}),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)([]),x=Object(d.a)(h,2),y=x[0],N=x[1],C=Object(c.useState)([]),w=Object(d.a)(C,2),S=w[0],A=w[1],T=Object(c.useState)(!1),M=Object(d.a)(T,2),D=M[0],I=M[1],R=Object(c.useRef)(),_=Object(c.useRef)(),L=Object(c.useRef)(),z=function(e){b(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){R.current={},_.current={},L.current={},O(e?Object(U.a)({},e):{isActive:!0}),z(!0),!(null===e||void 0===e?void 0:e._id)&&qe||e._id&&Ue?I(!0):I(!1)}}}));var V=function(e,t){O(Object(U.a)(Object(U.a)({},v),{},Object(q.a)({},t,e)))},B=function(){var e,t,a,i,l,c,s,o,d;r(!0),v.photo=null===R||void 0===R||null===(e=R.current)||void 0===e||null===(t=e.uploadingFiles)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.base64,v.adharCardPhoto=null===_||void 0===_||null===(i=_.current)||void 0===i||null===(l=i.uploadingFiles)||void 0===l||null===(c=l[0])||void 0===c?void 0:c.base64,v.panCardPhoto=null===L||void 0===L||null===(s=L.current)||void 0===s||null===(o=s.uploadingFiles)||void 0===o||null===(d=o[0])||void 0===d?void 0:d.base64,E.save(v,v._id?Ue:qe).then((function(e){ce(e.message),z(!1),n()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){r(!1)}))};return Object(c.useEffect)((function(){var e,t=(null===(e=a.find((function(e){return e._id===v.state})))||void 0===e?void 0:e.districts)||[];N((null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name,taluks:e.taluks}})))||[])}),[v.state]),Object(c.useEffect)((function(){var e,t=(null===y||void 0===y||null===(e=y.find((function(e){return e.value===v.district})))||void 0===e?void 0:e.taluks)||[];A(null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name}})))}),[v.district,y]),Object(c.useEffect)((function(){(function(){var e,t;return null===a||void 0===a||null===(e=a.find((function(e){return e._id===v.state})))||void 0===e||null===(t=e.districts.map((function(e){return e._id})))||void 0===t?void 0:t.includes(v.district)})()||V("","district")}),[v.state]),Object(c.useEffect)((function(){(function(){var e,t,n,i;return null===a||void 0===a||null===(e=a.find((function(e){return e._id===v.state})))||void 0===e||null===(t=e.districts.find((function(e){return e._id===v.district})))||void 0===t||null===(n=t.taluks)||void 0===n||null===(i=n.map((function(e){return e._id})))||void 0===i?void 0:i.includes(v.taluk)})()||V("","taluk")}),[v.district,y]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(v._id?"Edit":"Add")+" User",style:{top:20},visible:j,okText:"Save",onOk:B,okButtonProps:{disabled:s||!D,style:{display:D?"inline-block":"none"}},onCancel:function(){z(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:s,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),B()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!D,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Type"}),Object(p.jsx)(_e,{data:v,handleChange:V})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"First Name"}),Object(p.jsx)(P.a,{value:v.firstName||"",onChange:function(e){return V(e.target.value,"firstName")}})]}),Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Last Name"}),Object(p.jsx)(P.a,{value:v.lastName||"",onChange:function(e){return V(e.target.value,"lastName")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Email"}),Object(p.jsx)(P.a,{value:v.email||"",onChange:function(e){return V(e.target.value,"email")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Phone No."}),Object(p.jsx)(P.a,{value:v.phoneNo||"",onChange:function(e){return V(F.handleInteger(e.target.value),"phoneNo")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsxs)("label",{className:v._id?"":"req",children:[v._id?"Update":"Set"," Password"]}),Object(p.jsx)(P.a,{value:v.password||"",onChange:function(e){return V(e.target.value,"password")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"DOB"}),Object(p.jsx)(ie,{format:"MMMM D, YYYY",value:v.dob||new Date,onChange:function(e){V(e,"dob")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"State"}),Object(p.jsx)(ae,{options:a.map((function(e){return{value:e._id,label:e.name}})),value:v.state,onChange:function(e){V(e,"state")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"District"}),Object(p.jsx)(ae,{options:y||[],value:v.district,onChange:function(e){V(e,"district")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Taluk"}),Object(p.jsx)(ae,{options:S||[],value:v.taluk,onChange:function(e){V(e,"taluk")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Zip Code"}),Object(p.jsx)(P.a,{value:v.zipcode||"",onChange:function(e){V(F.handleInteger(e.target.value,6),"zipcode")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Address"}),Object(p.jsx)(P.a.TextArea,{value:v.address||"",onChange:function(e){V(e.target.value,"address")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Image"}),Object(p.jsx)(ke,{ref:R,fileCount:1,files:v.image?[v.image]:[]})]}),Object(p.jsx)("div",{}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Document Details "})}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Adhar Number"}),Object(p.jsx)(P.a,{value:v.adharNo||"",onChange:function(e){return V(e.target.value,"adharNo")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Adhar Card photo"}),Object(p.jsx)(ke,{ref:_,fileCount:1,files:v.adharCardImage?[v.adharCardImage]:[]})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Pan No."}),Object(p.jsx)(P.a,{value:v.panNo||"",onChange:function(e){return V(e.target.value,"panNo")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Pan Card photo"}),Object(p.jsx)(ke,{ref:L,fileCount:1,files:v.panCardImage?[v.panCardImage]:[]})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ae,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:v.isActive,onChange:function(e){V(e,"isActive")}})]})]})})})})})})})),ze=n(37),Ve=n(304);function Be(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(!0),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useRef)(),u=Object(c.useState)({key:"",page:1,limit:20,total:0}),j=Object(d.a)(u,2),b=j[0],m=j[1],f=[{title:"Title",dataIndex:"title"},{title:"Key",dataIndex:"key",width:200},{title:"Action",width:90,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){o.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{})})}),Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(Oe.a,{title:"Are you sure to delete this module?",onConfirm:function(){return O(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(pe.a,{})})})})]})}}].filter((function(e){return!e.hidden})),v=function(e){"undefined"===typeof e&&(e=b),r(!0),Fe.listModules(e).then((function(t){var n,i,l=e;l.total=(null===(n=t.result)||void 0===n?void 0:n.total)||0,m(Object(U.a)({},l)),a((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){r(!1)}))},O=function(e){Fe.deleteModule(e).then((function(e){ce(e.message),v()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){v()}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Module List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(fe,{data:n,columns:f,parentSData:b,loading:s,formRef:o,list:v,searchPlaceholder:"Name or Key"})}),Object(p.jsx)(Ke,{ref:o,list:v})]})}var Ke=Object(c.forwardRef)((function(e,t){var n=e.list,a=Object(c.useState)(!1),i=Object(d.a)(a,2),l=i[0],s=i[1],r=Object(c.useState)(!1),o=Object(d.a)(r,2),u=o[0],j=o[1],b=Object(c.useState)({}),m=Object(d.a)(b,2),f=m[0],v=m[1],O=Object(c.useRef)(),h=function(e){j(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){O.current={},v(e?Object(U.a)({},e):{isActive:!0}),h(!0)}}}));var x=function(e,t){v(Object(U.a)(Object(U.a)({},f),{},Object(q.a)({},t,e)))},y=function(){var e,t,a;s(!0),f.photo=null===O||void 0===O||null===(e=O.current)||void 0===e||null===(t=e.uploadingFiles)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.base64,Fe.saveModule(f).then((function(e){ce(e.message),h(!1),n()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){s(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(f._id?"Edit":"Add")+" Module",style:{top:20},visible:u,okText:"Save",onOk:y,okButtonProps:{disabled:l},onCancel:function(){h(!1)},destroyOnClose:!0,maskClosable:!1,width:400,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:l,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),y()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Title"}),Object(p.jsx)(P.a,{value:f.title||"",onChange:function(e){return x(e.target.value,"title")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Key"}),Object(p.jsx)(P.a,{value:f.key||"",onChange:function(e){return x(e.target.value,"key")}})]})]})})})})})})})),He=[{component:Be,name:"Module",key:"module"}];var We=Object(c.forwardRef)((function(){var e,t,n=Ve.a.TabPane,a=Object(ze.f)(),i=Object(c.useState)((null===(e=F.queryStringToJSON(null===(t=a.location)||void 0===t?void 0:t.search))||void 0===e?void 0:e.tab)||He[0].key),l=Object(d.a)(i,2),s=l[0],r=l[1];return Object(c.useEffect)((function(){a.push({search:"?tab=".concat(s)}),document.querySelector(".ant-tabs-content-holder").scrollTop=0}),[s]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(Ve.a,{activeKey:s,className:"border overflow-y-auto",type:"card",size:"small",onChange:function(e){r(e)},children:He.map((function(e){return Object(p.jsx)(n,{tab:e.name,children:s===e.key?Object(p.jsx)(e.component,{}):null},e.key)}))})})})),Je=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"listColor",value:function(e,t){return L.get(this.baseURL+"color/list",{params:e,module:t})}},{key:"listAllColor",value:function(e,t){return L.get(this.baseURL+"color/list/ALL",{params:e,module:t})}},{key:"saveColor",value:function(e,t){return L.post(this.baseURL+"color/save",e,{module:t})}},{key:"deleteColor",value:function(e,t){return L.delete("".concat(this.baseURL,"color/delete/").concat(e),{module:t})}},{key:"listMake",value:function(e,t){return L.get(this.baseURL+"make/list",{params:e,module:t})}},{key:"listAllMake",value:function(e,t){return L.get(this.baseURL+"make/list/ALL",{params:e,module:t})}},{key:"saveMake",value:function(e,t){return L.post(this.baseURL+"make/save",e,{module:t})}},{key:"deleteMake",value:function(e,t){return L.delete("".concat(this.baseURL,"make/delete/").concat(e),{module:t})}},{key:"listMakeModel",value:function(e,t){return L.get(this.baseURL+"make-model/list",{params:e,module:t})}},{key:"listAllMakeModel",value:function(e,t){return L.get(this.baseURL+"make-model/list/ALL",{params:e,module:t})}},{key:"saveMakeModel",value:function(e,t){return L.post(this.baseURL+"make-model/save",e,{module:t})}},{key:"deleteMakeModel",value:function(e,t){return L.delete("".concat(this.baseURL,"make-model/delete/").concat(e),{module:t})}},{key:"listCategory",value:function(e,t){return L.get(this.baseURL+"category/list",{params:e,module:t})}},{key:"listAllCategory",value:function(e,t){return L.get(this.baseURL+"category/list/ALL",{params:e,module:t})}},{key:"saveCategory",value:function(e,t){return L.post(this.baseURL+"category/save",e,{module:t})}},{key:"deleteCategory",value:function(e,t){return L.delete("".concat(this.baseURL,"category/delete/").concat(e),{module:t})}},{key:"list",value:function(e,t){return L.get(this.baseURL+"list",{params:e,module:t})}},{key:"listAll",value:function(e,t){return L.get(this.baseURL+"list/ALL",{params:e,module:t})}},{key:"save",value:function(e,t){return L.post(this.baseURL+"save",e,{module:t})}},{key:"delete",value:function(e,t){return L.delete("".concat(this.baseURL,"delete/").concat(e),{module:t})}}]),e}();Je.baseURL="vehicle/";var Ge=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"listServiceType",value:function(){return L.get(this.baseURL+"/list-service-type",{module:"ignoreModule"})}}]),e}();Ge.baseURL="common";var Ze={view:F.getModules("viewVehicleCategory"),add:F.getModules("addVehicleCategory"),edit:F.getModules("editVehicleCategory"),delete:F.getModules("deleteVehicleCategory")},Qe=Ze.view,Xe=Ze.add,$e=Ze.edit,et=Ze.delete;var tt=Object(c.forwardRef)((function(e,t){var n=e.list,a=e.serviceTypes,i=Object(c.useState)(!1),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!1),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)({}),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)(!1),x=Object(d.a)(h,2),y=x[0],N=x[1],k=Object(c.useRef)(),C=function(e){b(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){k.current={},O(e?Object(U.a)({},e):{isActive:!0}),C(!0),!(null===e||void 0===e?void 0:e._id)&&Xe||e._id&&$e?N(!0):N(!1)}}}));var w=function(e,t){O(Object(U.a)(Object(U.a)({},v),{},Object(q.a)({},t,e)))};Object(c.useEffect)((function(){w(F.removeSpecialChars(v.name||""),"slug")}),[v.name]);var S=function(){var e,t,a;r(!0),v.photo=null===k||void 0===k||null===(e=k.current)||void 0===e||null===(t=e.uploadingFiles)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.base64,Je.saveCategory(v,v._id?$e:Xe).then((function(e){ce(e.message),C(!1),n()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){r(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(v._id?"Edit":"Add")+" Vehicle Category",style:{top:20},visible:j,okText:"Save",onOk:S,okButtonProps:{disabled:s||!y,style:{display:y?"inline-block":"none"}},onCancel:function(){C(!1)},destroyOnClose:!0,maskClosable:!1,width:400,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:s,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),S()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!y,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Service Type"}),Object(p.jsx)(ae,{options:a,value:v.serviceType,onChange:function(e){w(e,"serviceType")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Name"}),Object(p.jsx)(P.a,{value:v.name||"",onChange:function(e){return w(e.target.value,"name")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Slug"}),Object(p.jsx)(P.a,{value:v.slug||"",onChange:function(e){return w(F.removeSpecialChars(e.target.value),"slug")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Image"}),Object(p.jsx)(ke,{ref:k,fileCount:1,files:v.image?[v.image]:[]})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ae,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:v.isActive,onChange:function(e){w(e,"isActive")}})]})]})})})})})})})),nt=n(315),at=n(143),it=n(145),lt=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"listRideType",value:function(e,t){return L.get(this.baseURL+"type/list",{params:e,module:t})}},{key:"listAllRideType",value:function(e,t){return L.get(this.baseURL+"type/list/ALL",{params:e,module:t})}},{key:"saveRideType",value:function(e,t){return L.post(this.baseURL+"type/save",e,{module:t})}}]),e}();lt.baseURL="ride/";var ct=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"list",value:function(e,t){return L.get(this.baseURL+"list",{params:e,module:t})}},{key:"listAll",value:function(e,t){return L.get(this.baseURL+"list/ALL",{params:e,module:t})}},{key:"save",value:function(e,t){return L.post(this.baseURL+"save",e,{module:t})}},{key:"delete",value:function(e,t){return L.delete("".concat(this.baseURL,"/delete/").concat(e),{module:t})}},{key:"listWalletHistory",value:function(e,t){return L.get(this.baseURL+"list/wallet-history",{params:e,module:t})}},{key:"listAllWalletHistory",value:function(e,t){return L.get(this.baseURL+"list/wallet-history/ALL",{params:e,module:t})}},{key:"saveWalletHistory",value:function(e,t){return L.post(this.baseURL+"save/wallet-history",e,{module:t})}}]),e}();ct.baseURL="driver/";var st={view:F.getModules("viewWallet"),add:F.getModules("addWallet")},rt=st.view,ot=st.add;function dt(e){var t=e.driverId,n=Object(c.useState)([]),a=Object(d.a)(n,2),i=a[0],l=a[1],s=Object(c.useState)(!0),r=Object(d.a)(s,2),o=r[0],u=r[1],j=Object(c.useRef)(),b=Object(c.useState)({key:"",page:1,limit:20,total:0,driverId:t}),m=Object(d.a)(b,2),f=m[0],v=m[1],O=[{title:"Transaction Id",dataIndex:"transactionId",width:150},{title:"Transaction Method",dataIndex:"transactionMethod",width:150,render:function(e){return"byAdmin"===e?Object(p.jsx)(G.a,{color:"magenta",children:"By Admin"}):"paytm"===e?Object(p.jsx)(G.a,{color:"yellow",children:"Paytm"}):Object(p.jsx)(G.a,{color:"",children:e})}},{title:"Transaction Type",dataIndex:"transactionType",width:150,render:function(e){return"credit"===e?Object(p.jsx)(G.a,{color:"green",children:"Credit"}):"debit"===e?Object(p.jsx)(G.a,{color:"red",children:"Debit"}):void 0}},{title:"Amount",dataIndex:"amount",width:150},{title:"Description",dataIndex:"description"},{title:"Status",dataIndex:"status",width:80,render:function(e){return"completed"===e?Object(p.jsx)(G.a,{color:"green",children:"completed"}):"pending"===e?Object(p.jsx)(G.a,{color:"yellow",children:"Pending"}):"failed"===e?Object(p.jsx)(G.a,{color:"red",children:"Failed"}):void 0}},{width:10}].filter((function(e){return!e.hidden})),h=function(e){"undefined"===typeof e&&(e=f),u(!0),ct.listWalletHistory(e,rt).then((function(t){var n,a,i=e;i.total=(null===(n=t.result)||void 0===n?void 0:n.total)||0,v(Object(U.a)({},i)),l((null===(a=t.result)||void 0===a?void 0:a.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){u(!1)}))};return Object(c.useEffect)((function(){h()}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(fe,{data:i,columns:O,filters:[{type:"dropdown",key:"transactionMethod",placeholder:"Transction Method",className:"w200 mx-1",options:[{_id:"byAdmin",title:"By Admin"},{_id:"paytm",title:"Paytm"}]},{type:"dropdown",key:"transactionType",placeholder:"Transction Type",className:"w200 mx-1",options:[{_id:"debit",title:"Debit"},{_id:"credit",title:"Credit"}]},{type:"dropdown",key:"status",placeholder:"Status",className:"w200 mx-1",options:[{_id:"pending",title:"Pending"},{_id:"failed",title:"Failed"},{_id:"completed",title:"Completed"}]}],parentSData:f,loading:o,formRef:j,list:h,searchPlaceholder:"Transaction Id",addNew:ot})}),Object(p.jsx)(ut,{ref:j,list:h,driverId:t})]})}var ut=Object(c.forwardRef)((function(e,t){var n=e.list,a=e.driverId,i=Object(c.useState)(!1),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!1),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)({}),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)(!1),x=Object(d.a)(h,2),y=x[0],N=x[1],k=function(e){b(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){O({driverId:a}),k(!0),ot&&N(!0)}}}));var C=function(e,t){O(Object(U.a)(Object(U.a)({},v),{},Object(q.a)({},t,e)))},w=function(){r(!0),ct.saveWalletHistory(v,ot).then((function(e){ce(e.message),k(!1),n()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){r(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:"Add Wallet History",style:{top:20},visible:j,okText:"Save",onOk:w,okButtonProps:{disabled:s||!y,style:{display:y?"inline-block":"none"}},onCancel:function(){k(!1)},destroyOnClose:!0,maskClosable:!1,width:400,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:s,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),w()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!y,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Transaction Type"}),Object(p.jsx)(ae,{options:[{_id:"debit",name:"Debit"},{_id:"credit",name:"Credit"}],value:null===v||void 0===v?void 0:v.transactionType,onChange:function(e){C(e,"transactionType")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Amount"}),Object(p.jsx)(P.a,{value:v.amount||"",onChange:function(e){return C(F.handleInteger(e.target.value),"amount")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"",children:"Description"}),Object(p.jsx)(P.a.TextArea,{value:v.description||"",onChange:function(e){return C(e.target.value,"description")}})]})]})})})})})})})),jt=n(66),bt=n(313),mt=n(314),ft=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"listTeplates",value:function(e,t){return L.get(this.baseURL+"/template/list",{params:e,module:t})}},{key:"listAllTeplates",value:function(e){return L.get(this.baseURL+"/template/list/ALL",{module:e})}},{key:"saveTeplate",value:function(e,t){return L.post(this.baseURL+"/template/save",e,{module:t})}},{key:"deleteTeplates",value:function(e,t){return L.delete("".concat(this.baseURL,"/template/delete/").concat(e),{module:t})}},{key:"list",value:function(e,t){return L.get(this.baseURL+"/list",{params:e,module:t})}},{key:"listAll",value:function(e){return L.get(this.baseURL+"/list/ALL",{module:e})}},{key:"save",value:function(e,t){return L.post(this.baseURL+"/save",e,{module:t})}},{key:"delete",value:function(e,t){return L.delete("".concat(this.baseURL,"/delete/").concat(e),{module:t})}}]),e}();ft.baseURL="email";var vt=n(188);function Ot(e){var t=e.height,n=void 0===t?400:t,a=e.menubar,i=void 0!==a&&a,l=e.plugins,s=e.toolbar,r=e.content_style,o=e.initialValue,d=e.onChange;l||(l=["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount forecolor backcolor textcolor"]),s||(s="undo redo | insert | styleselect | bold italic | fontselect fontsizeselect | alignleft aligncenter alignright alignjustify | forecolor backcolor emoticons | bullist numlist outdent indent | link unlink | image responsivefilemanager table | removeformat code help | fullscreen"),r||(r="body { font-family:Helvetica,Arial,sans-serif; font-size:14px }");var u=Object(c.useRef)(null);return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(vt.a,{onInit:function(e,t){return u.current=t},initialValue:o,init:{height:n,menubar:i,plugins:l,toolbar:s,content_style:r,file_browser_callback_types:"image",file_picker_callback:function(e,t,n){var a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("accept","image/*"),a.onchange=function(){var t=this.files[0],n=new FileReader;n.readAsDataURL(t),n.onload=function(){e(n.result,{title:t.name})}},a.click()},deprecation_warnings:!1},onSelectionChange:function(){u.current&&d(u.current.getContent())}})})}var ht={view:F.getModules("viewSentEmail"),add:F.getModules("sendEmail")},xt=ht.view,pt=ht.add;var gt=Object(c.forwardRef)((function(e,t){var n=e.list,a=e.templates,i=e.sdt,l=e.customers,s=e.drivers,r=e.admins,o=e.serviceTypes,u=Object(c.useState)(!1),j=Object(d.a)(u,2),b=j[0],m=j[1],f=Object(c.useState)(!1),v=Object(d.a)(f,2),O=v[0],h=v[1],x=Object(c.useState)({}),y=Object(d.a)(x,2),k=y[0],C=y[1],w=Object(c.useState)(!1),S=Object(d.a)(w,2),A=S[0],T=S[1],M=Object(c.useState)([]),D=Object(d.a)(M,2),F=D[0],I=D[1],R=Object(c.useState)([]),_=Object(d.a)(R,2),L=_[0],E=_[1],z=Object(c.useState)("multiple"),V=Object(d.a)(z,2),B=V[0],K=V[1],H=Object(c.useState)([]),W=Object(d.a)(H,2),J=W[0],G=W[1],Z=Object(c.useState)([]),Q=Object(d.a)(Z,2),X=Q[0],ee=Q[1],te=function(e){h(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){C(e?Object(U.a)({},e):{deletable:!0}),te(!0),!(null===e||void 0===e?void 0:e._id)&&pt||e._id?T(!0):T(!1)}}}));var ne=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];A&&(n?C(Object(U.a)(Object(U.a)({},k),{},Object(q.a)({},t,e))):k=Object(U.a)(Object(U.a)({},k),{},Object(q.a)({},t,e)))},ie=function(){m(!0),ft.save(k,pt).then((function(e){ce(e.message),te(!1),n()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){m(!1)}))};Object(c.useEffect)((function(){"manyCustomers"===k.to?I(l.map((function(e){return{_id:e.email,title:e.firstName+" "+(null===e||void 0===e?void 0:e.lastName)+" - (".concat(e.email,")"),state:e.state,district:e.district,taluk:e.taluk}}))||[]):"manyDrivers"===k.to?I(s.map((function(e){var t;return{_id:e.email,title:e.firstName+" "+(null===e||void 0===e?void 0:e.lastName)+" - (".concat(e.email,")"),state:e.state,district:e.district,taluk:e.taluk,serviceType:null===e||void 0===e||null===(t=e.vehicleDetails)||void 0===t?void 0:t.serviceType}}))||[]):"manyAdmins"===k.to?I(r.map((function(e){return{_id:e.email,title:e.firstName+" "+(null===e||void 0===e?void 0:e.lastName)+" - (".concat(e.email,")"),state:e.state,district:e.district,taluk:e.taluk}}))||[]):(k.to,I([]))}),[k.to]),Object(c.useEffect)((function(){E(F)}),[F]),Object(c.useEffect)((function(){"custom"===k.to?K("tags"):K("multiple")}),[k.to]),Object(c.useEffect)((function(){ne(null,"emailIds")}),[L]);return Object(c.useEffect)((function(){var e,t=(null===(e=i.find((function(e){return e._id===k.state})))||void 0===e?void 0:e.districts)||[];G((null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name,taluks:e.taluks}})))||[])}),[k.state]),Object(c.useEffect)((function(){var e,t=(null===J||void 0===J||null===(e=J.find((function(e){return e.value===k.district})))||void 0===e?void 0:e.taluks)||[];ee(null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name}})))}),[k.district,J]),Object(c.useEffect)((function(){(function(){var e,t;return null===i||void 0===i||null===(e=i.find((function(e){return e._id===k.state})))||void 0===e||null===(t=e.districts.map((function(e){return e._id})))||void 0===t?void 0:t.includes(k.district)})()||ne("","district")}),[k.state]),Object(c.useEffect)((function(){(function(){var e,t,n,a;return null===i||void 0===i||null===(e=i.find((function(e){return e._id===k.state})))||void 0===e||null===(t=e.districts.find((function(e){return e._id===k.district})))||void 0===t||null===(n=t.taluks)||void 0===n||null===(a=n.map((function(e){return e._id})))||void 0===a?void 0:a.includes(k.taluk)})()||ne("","taluk")}),[k.district,J]),Object(c.useEffect)((function(){k.taluk?E(F.filter((function(e){var t,n;return k.serviceType&&e.serviceType?(null===e||void 0===e?void 0:e.taluk)===(null===(t=k)||void 0===t?void 0:t.taluk)&&e.serviceType===k.serviceType:(null===e||void 0===e?void 0:e.taluk)===(null===(n=k)||void 0===n?void 0:n.taluk)}))):k.district?E(F.filter((function(e){var t,n;return k.serviceType&&e.serviceType?(null===e||void 0===e?void 0:e.district)===(null===(t=k)||void 0===t?void 0:t.district)&&e.serviceType===k.serviceType:(null===e||void 0===e?void 0:e.district)===(null===(n=k)||void 0===n?void 0:n.district)}))):k.state?E(F.filter((function(e){var t,n;return k.serviceType&&e.serviceType?(null===e||void 0===e?void 0:e.state)===(null===(t=k)||void 0===t?void 0:t.state)&&e.serviceType===k.serviceType:(null===e||void 0===e?void 0:e.state)===(null===(n=k)||void 0===n?void 0:n.state)}))):k.serviceType?E(F.filter((function(e){return!e.serviceType||e.serviceType===k.serviceType}))):E(F)}),[k.serviceType,k.state,k.district,k.taluk,F]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:"Send Email",style:{top:20},visible:O,okText:Object(p.jsxs)("div",{className:"d-flex",children:["Send ",Object(p.jsx)(bt.a,{className:"my-auto mx-1"})]}),onOk:ie,okButtonProps:{disabled:b||!A,style:{display:A?"inline-block":"none"}},onCancel:function(){te(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:b,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),ie()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!A,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Email Template"}),Object(p.jsx)(ae,{options:a.map((function(e){return{_id:e._id,title:e.subject}}))||[],value:k.template,onChange:function(e){ne(e,"template")}})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"State"}),Object(p.jsx)(ae,{placeholder:"All States",allowClear:!0,options:i.map((function(e){return{value:e._id,label:e.name}})),value:k.state,onChange:function(e){ne(e,"state")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"District"}),Object(p.jsx)(ae,{placeholder:"All Districts",allowClear:!0,options:J||[],value:k.district,onChange:function(e){ne(e,"district")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Taluk"}),Object(p.jsx)(ae,{placeholder:"All Taluks",allowClear:!0,options:X||[],value:k.taluk,onChange:function(e){ne(e,"taluk")}})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Send To"}),Object(p.jsx)(ae,{options:[{_id:"manyCustomers",title:"Many Customers"},{_id:"manyDrivers",title:"Many Drivers"},{_id:"manyAdmins",title:"Many Admins"},{_id:"allCustomers",title:"All Customers"},{_id:"allDrivers",title:"All Drivers"},{_id:"allAdmins",title:"All Admins"},{_id:"custom",title:"Custom"}],value:k.to,onChange:function(e){ne(e,"to")}})]}),["manyDrivers","allDrivers"].includes(k.to)?Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Service Type"}),Object(p.jsx)(ae,{allowClear:!0,placeholder:"All Service Types",options:o||[],value:k.serviceType,onChange:function(e){ne(e,"serviceType")}})]}):null,["manyCustomers","manyDrivers","manyAdmins","custom"].includes(k.to)?Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"custom"===k.to?"Enter Emails":"Select Users"}),Object(p.jsx)(ae,{mode:B,placeholder:"custom"===k.to?"Enter Emails":"Select Users",options:L||[],value:k.emailIds,onChange:function(e){ne(e,"emailIds")}})]}):null,"custom"===k.template?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Subject"}),Object(p.jsx)(P.a,{value:k.subject||"",onChange:function(e){ne(e.target.value,"subject")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsxs)("label",{className:"req",children:["Template Design",Object(p.jsx)(jt.a,{title:Object(p.jsx)("table",{children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"First Name: "}),Object(p.jsx)("td",{children:"<%= firstName %>"})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"Last Name: "}),Object(p.jsx)("td",{children:"<%= lastName %>"})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"Email: "}),Object(p.jsx)("td",{children:"<%= email %>"})]})]})}),color:"cyan",children:Object(p.jsx)(N.a,{size:"small",shape:"circle",icon:Object(p.jsx)(mt.a,{})})})]}),Object(p.jsx)(Ot,{height:700,initialValue:k.html||"",onChange:function(e){ne(e,"html",!1)}})]})]}):null]})})})})})})})),yt={view:F.getModules("viewDriver"),add:F.getModules("addDriver"),edit:F.getModules("editDriver"),delete:F.getModules("deleteDriver")},Nt=yt.view,kt=yt.add,Ct=yt.edit,wt=yt.delete;function St(e){var t=e.vehicleData,n=e.setVisible,a=Object(c.useState)(),i=Object(d.a)(a,2),l=i[0],s=i[1],r=Object(c.useState)([]),o=Object(d.a)(r,2),u=o[0],j=o[1],b=Object(c.useState)(!0),m=Object(d.a)(b,2),f=m[0],v=m[1],O=Object(c.useState)([]),h=Object(d.a)(O,2),x=h[0],g=h[1],y=Object(c.useState)([{type:"dropdown",key:"isApproved",className:"w200 mx-1",placeholder:"Approval Status",options:[{id:0,name:"Not Approved"},{id:1,name:"Approved"}]}]),k=Object(d.a)(y,2),C=k[0],w=k[1],S=Object(c.useRef)(),A=Object(c.useRef)(),T=Object(c.useRef)(),M=Object(c.useState)({key:"",page:1,limit:20,total:0,vehicleId:null===t||void 0===t?void 0:t._id}),D=Object(d.a)(M,2),I=D[0],R=D[1],_=[{title:"Driver Id",dataIndex:"driverId",width:200},{title:"Name",dataIndex:"firstName",render:function(e,t){return e+" "+t.lastName}},{title:"Email",dataIndex:"email",width:200},{title:"Phone No",dataIndex:"phoneNo",width:100},{title:"Wallet",dataIndex:"walletDetails",hidden:!F.getModules("viewWallet"),width:100,render:function(e,t){var n;return Object(p.jsxs)(N.a,{size:"small",type:"primary",className:"mx-1",onClick:function(){A.current.openForm(t)},children:["Wallet  (",null===e||void 0===e||null===(n=e[0])||void 0===n?void 0:n.amount,")"]})}},{title:"Approval Status",dataIndex:"isApproved",width:120,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Approved"}):Object(p.jsx)(G.a,{color:"red",children:"Not Approved"})}},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:90,hidden:!kt&&!Ct&&!wt&&!Nt,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[Ct?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){S.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{})})}):null,!Ct&&Nt?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){S.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,wt?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(Oe.a,{title:"Are you sure to delete this driver?",onConfirm:function(){return E(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(pe.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),L=function(e){"undefined"===typeof e&&(e=I),v(!0),ct.list(e,Nt).then((function(t){var n,a,i=e;i.total=(null===(n=t.result)||void 0===n?void 0:n.total)||0,R(Object(U.a)({},i)),s((null===(a=t.result)||void 0===a?void 0:a.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){v(!1)}))},E=function(e){ct.delete(e,wt).then((function(e){ce(e.message),L()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){x.length>0&&w([].concat(Object(z.a)(C),[{type:"dropdown",key:"serviceType",placeholder:"Service Type",className:"w200 mx-1",options:x}]))}),[x]),Object(c.useEffect)((function(){L(),Ce.listSdt("ignoreModule").then((function(e){j(e.result.data||[])})),Ge.listServiceType().then((function(e){g(e.result.data)}))}),[]),Object(c.useEffect)((function(){t&&"object"===typeof l&&S.current.openForm((null===l||void 0===l?void 0:l[0])?null===l||void 0===l?void 0:l[0]:{vehicle:t._id,isActive:!0,isApproved:!1})}),[l]),Object(p.jsxs)(p.Fragment,{children:[t?null:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Driver List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(fe,{data:l,columns:_,filters:C,parentSData:I,loading:f,formRef:S,list:L,searchPlaceholder:"First Name or Last Name or Driver Id",addNew:!1})})]}),Object(p.jsx)(At,{ref:S,list:L,sdt:u,setVisibleParent:n,emailModalRef:T}),Object(p.jsx)(Tt,{ref:A}),Object(p.jsx)(Mt,{ref:T})]})}var At=Object(c.forwardRef)((function(e,t){var n=e.list,a=e.sdt,i=e.setVisibleParent,l=e.emailModalRef,s=Object(c.useState)(!1),r=Object(d.a)(s,2),o=r[0],u=r[1],j=Object(c.useState)(!1),b=Object(d.a)(j,2),m=b[0],f=b[1],v=Object(c.useState)({}),O=Object(d.a)(v,2),h=O[0],x=O[1],y=Object(c.useState)([]),C=Object(d.a)(y,2),w=C[0],S=C[1],A=Object(c.useState)([]),T=Object(d.a)(A,2),M=T[0],D=T[1],I=Object(c.useState)(!1),R=Object(d.a)(I,2),_=R[0],L=R[1],E=Object(c.useRef)(),z=Object(c.useRef)(),V=Object(c.useRef)(),B=Object(c.useRef)(),H=Object(c.useRef)(),W=function(e){f(e),i&&!e&&i(!1)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){var t;e||(e={}),E.current={},z.current={},V.current={},B.current={},H.current={},e.dob=K()(e.dob).format("YYYY-MM-DD"),x(e?Object(U.a)({},e):{isActive:!0,isApproved:!1}),W(!0),!(null===(t=e)||void 0===t?void 0:t._id)&&kt||e._id&&Ct?L(!0):L(!1)}}}));var J=function(e,t){x(Object(U.a)(Object(U.a)({},h),{},Object(q.a)({},t,e)))},G=function(){var e,t,a,i,l,c,s,r,o,d,j,b,m,f,v;u(!0),h.photo=null===E||void 0===E||null===(e=E.current)||void 0===e||null===(t=e.uploadingFiles)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.base64,h.drivingLicencePhoto=null===z||void 0===z||null===(i=z.current)||void 0===i||null===(l=i.uploadingFiles)||void 0===l||null===(c=l[0])||void 0===c?void 0:c.base64,h.adharCardPhoto=null===V||void 0===V||null===(s=V.current)||void 0===s||null===(r=s.uploadingFiles)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.base64,h.panCardPhoto=null===B||void 0===B||null===(d=B.current)||void 0===d||null===(j=d.uploadingFiles)||void 0===j||null===(b=j[0])||void 0===b?void 0:b.base64,h.badgePhoto=null===H||void 0===H||null===(m=H.current)||void 0===m||null===(f=m.uploadingFiles)||void 0===f||null===(v=f[0])||void 0===v?void 0:v.base64,ct.save(h,h._id?Ct:kt).then((function(e){ce(e.message),W(!1),n()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){u(!1)}))};return Object(c.useEffect)((function(){var e,t=(null===(e=a.find((function(e){return e._id===h.state})))||void 0===e?void 0:e.districts)||[];S((null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name,taluks:e.taluks}})))||[])}),[h.state]),Object(c.useEffect)((function(){var e,t=(null===w||void 0===w||null===(e=w.find((function(e){return e.value===h.district})))||void 0===e?void 0:e.taluks)||[];D(null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name}})))}),[h.district,w]),Object(c.useEffect)((function(){(function(){var e,t;return null===a||void 0===a||null===(e=a.find((function(e){return e._id===h.state})))||void 0===e||null===(t=e.districts.map((function(e){return e._id})))||void 0===t?void 0:t.includes(h.district)})()||J("","district")}),[h.state]),Object(c.useEffect)((function(){(function(){var e,t,n,i;return null===a||void 0===a||null===(e=a.find((function(e){return e._id===h.state})))||void 0===e||null===(t=e.districts.find((function(e){return e._id===h.district})))||void 0===t||null===(n=t.taluks)||void 0===n||null===(i=n.map((function(e){return e._id})))||void 0===i?void 0:i.includes(h.taluk)})()||J("","taluk")}),[h.district,w]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(h._id?"Edit":"Add")+" Driver",style:{top:20},visible:m,okText:"Save",onOk:G,okButtonProps:{disabled:o||!_,style:{display:_?"inline-block":"none"}},onCancel:function(){W(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body-overflow",footer:[Object(p.jsx)(N.a,{type:"dashed",onClick:function(){l.current.openForm(h)},children:"Send Email"},"sendEmail"),Object(p.jsx)(N.a,{onClick:function(){W(!1)},children:"Cancel"},"cancel"),Object(p.jsx)(N.a,{type:"primary",onClick:G,children:"Save"},"save")],children:Object(p.jsx)(g.a,{spinning:o,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),G()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!_,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Personal Details "})}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Driver Id"}),Object(p.jsx)(P.a,{value:h.driverId||"",onChange:function(e){return J(F.handleInteger(e.target.value),"driverId")}})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"First Name"}),Object(p.jsx)(P.a,{value:h.firstName||"",onChange:function(e){return J(e.target.value,"firstName")}})]}),Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Last Name"}),Object(p.jsx)(P.a,{value:h.lastName||"",onChange:function(e){return J(e.target.value,"lastName")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Email"}),Object(p.jsx)(P.a,{value:h.email||"",onChange:function(e){return J(e.target.value,"email")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Phone No."}),Object(p.jsx)(P.a,{value:h.phoneNo||"",onChange:function(e){return J(F.handleInteger(e.target.value),"phoneNo")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsxs)("label",{className:h._id?"":"req",children:[h._id?"Update":"Set"," Password"]}),Object(p.jsx)(P.a,{value:h.password||"",onChange:function(e){return J(e.target.value,"password")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"DOB"}),Object(p.jsx)(ie,{format:"MMMM D, YYYY",value:h.dob||new Date,onChange:function(e){J(e,"dob")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"State"}),Object(p.jsx)(ae,{options:a.map((function(e){return{value:e._id,label:e.name}})),value:h.state,onChange:function(e){J(e,"state")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"District"}),Object(p.jsx)(ae,{options:w||[],value:h.district,onChange:function(e){J(e,"district")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Taluk"}),Object(p.jsx)(ae,{options:M||[],value:h.taluk,onChange:function(e){J(e,"taluk")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Zip Code"}),Object(p.jsx)(P.a,{value:h.zipcode||"",onChange:function(e){J(F.handleInteger(e.target.value,6),"zipcode")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Address"}),Object(p.jsx)(P.a.TextArea,{value:h.address||"",onChange:function(e){J(e.target.value,"address")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Image"}),Object(p.jsx)(ke,{ref:E,fileCount:1,files:h.image?[h.image]:[]})]}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Driving Licence Details "})}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Driving Licence Number"}),Object(p.jsx)(P.a,{value:h.drivingLicenceNumber||"",onChange:function(e){return J(e.target.value,"drivingLicenceNumber")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Driving Licence Number Expiry Date"}),Object(p.jsx)(ie,{format:"MMMM D, YYYY",value:h.drivingLicenceNumberExpiryDate||new Date,onChange:function(e){J(e,"drivingLicenceNumberExpiryDate")}})]}),Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Driving Licence photo"}),Object(p.jsx)(ke,{ref:z,fileCount:1,files:h.drivingLicenceImage?[h.drivingLicenceImage]:[]})]}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Adhar Details "})}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Adhar Number"}),Object(p.jsx)(P.a,{value:h.adharNo||"",onChange:function(e){return J(e.target.value,"adharNo")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Adhar Card photo"}),Object(p.jsx)(ke,{ref:V,fileCount:1,files:h.adharCardImage?[h.adharCardImage]:[]})]}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Pan Card Details "})}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Pan No."}),Object(p.jsx)(P.a,{value:h.panNo||"",onChange:function(e){return J(e.target.value,"panNo")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Pan Card photo"}),Object(p.jsx)(ke,{ref:B,fileCount:1,files:h.panCardImage?[h.panCardImage]:[]})]}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Badge Details "})}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Badge No."}),Object(p.jsx)(P.a,{value:h.badgeNo||"",onChange:function(e){return J(e.target.value,"badgeNo")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Badge photo"}),Object(p.jsx)(ke,{ref:H,fileCount:1,files:h.badgeImage?[h.badgeImage]:[]})]}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Status "})}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Approval Status"}),Object(p.jsx)(ae,{options:[{value:!0,label:"Approved"},{value:!1,label:"Not Approved"}],value:h.isApproved,onChange:function(e){J(e,"isApproved")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ae,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:h.isActive,onChange:function(e){J(e,"isActive")}})]})]})})})})})})})),Tt=Object(c.forwardRef)((function(e,t){var n=Object(c.useState)(!1),a=Object(d.a)(n,2),i=a[0],l=a[1],s=Object(c.useState)({}),r=Object(d.a)(s,2),o=r[0],u=r[1],j=function(e){l(e)};return Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){u(Object(U.a)({},e)),j(!0)}}})),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:Object(p.jsxs)(p.Fragment,{children:["Wallet History of ",Object(p.jsx)("span",{className:"text-danger",children:o.name})]}),style:{top:20},visible:i,onCancel:function(){j(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,footer:null,className:"app-modal-body-overflow",children:Object(p.jsx)(dt,{driverId:o._id})})})})),Mt=Object(c.forwardRef)((function(e,t){var n=Object(c.useState)(!1),a=Object(d.a)(n,2),i=a[0],l=a[1],s=Object(c.useState)({}),r=Object(d.a)(s,2),o=(r[0],r[1]),u=(Object(c.useRef)(),function(e){l(e)});return Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){o(Object(U.a)({},e)),u(!0)}}})),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:"Send Email",style:{top:50},visible:i,onCancel:function(){u(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,footer:null,className:"app-modal-body-overflow"})})})),Dt={view:F.getModules("viewVehicle"),add:F.getModules("addVehicle"),edit:F.getModules("editVehicle"),delete:F.getModules("deleteVehicle")},Ft=Dt.view,It=Dt.add,Rt=Dt.edit,_t=Dt.delete;var Lt=Object(c.forwardRef)((function(e,t){var n,a,i=e.list,l=e.serviceType,s=e.rideTypes,r=e.makes,o=e.colors,u=e.sdt,j=Object(c.useState)(!1),b=Object(d.a)(j,2),m=b[0],f=b[1],v=Object(c.useState)(!1),O=Object(d.a)(v,2),h=O[0],x=O[1],y=Object(c.useState)({}),N=Object(d.a)(y,2),C=N[0],w=N[1],S=Object(c.useState)([]),A=Object(d.a)(S,2),T=A[0],M=A[1],D=Object(c.useState)([]),I=Object(d.a)(D,2),R=I[0],_=I[1],L=Object(c.useState)(!1),E=Object(d.a)(L,2),V=E[0],B=E[1],H=Object(c.useState)([]),W=Object(d.a)(H,2),J=W[0],G=W[1],Z=Object(c.useState)([]),Q=Object(d.a)(Z,2),X=Q[0],ee=Q[1],te=Object(c.useState)([]),ne=Object(d.a)(te,2),se=ne[0],re=ne[1],oe=Object(c.useRef)(),de=Object(c.useRef)(),ue=Object(c.useRef)(),je=Object(c.useRef)(),be=Object(c.useRef)(),me=Object(c.useRef)(),fe=function(e){x(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){var t;e||(e={}),oe.current={},de.current={},ue.current={},je.current={},be.current={},me.current={},e.registrationExpiryDate=K()(e.registrationExpiryDate).format("YYYY-MM-DD"),e.insuranceExpiryDate=K()(e.insuranceExpiryDate).format("YYYY-MM-DD"),e.permitExpiryDate=K()(e.permitExpiryDate).format("YYYY-MM-DD"),e.pollutionExpiryDate=K()(e.pollutionExpiryDate).format("YYYY-MM-DD"),w(e._id?Object(U.a)({},e):{isActive:!0,addedBy:"admin",isApproved:!1}),fe(!0),!(null===(t=e)||void 0===t?void 0:t._id)&&It||e._id&&Rt?B(!0):B(!1)}}}));var ve=function(e,t){w(Object(U.a)(Object(U.a)({},C),{},Object(q.a)({},t,e)))};Object(c.useEffect)((function(){ve(F.removeSpecialChars(C.name||""),"slug")}),[C.name]),Object(c.useEffect)((function(){var e=null===s||void 0===s?void 0:s.filter((function(e){return e.serviceType._id===C.serviceType}));M(e||[])}),[C.serviceType]),Object(c.useEffect)((function(){ve([],"rideTypes")}),[T]),Object(c.useEffect)((function(){var e,t,n,a=null===s||void 0===s?void 0:s.filter((function(e){var t;return null===(t=C.rideTypes)||void 0===t?void 0:t.includes(e._id)}));a=null===(n=a=null===(e=a)||void 0===e||null===(t=e.map((function(e){return e.allowedVehicleCategoriesDetails})))||void 0===t?void 0:t.flat(1))||void 0===n?void 0:n.filter((function(e,t,n){return t===n.findIndex((function(t){return t._id===e._id}))})),_(a)}),[T,C.rideTypes]),Object(c.useEffect)((function(){var e,t=(null===r||void 0===r||null===(e=r.find((function(e){return C.make===e._id})))||void 0===e?void 0:e.models)||[];G(Object(z.a)(t))}),[C.make]),Object(c.useEffect)((function(){var e;(null===J||void 0===J||null===(e=J.map((function(e){return e._id})))||void 0===e?void 0:e.includes(null===C||void 0===C?void 0:C.model))||ve("","model")}),[J]),Object(c.useEffect)((function(){var e,t;ve(((null===r||void 0===r||null===(e=r.find((function(e){return e._id===C.make})))||void 0===e?void 0:e.name)||"")+" - "+((null===J||void 0===J||null===(t=J.find((function(e){return e._id===C.model})))||void 0===t?void 0:t.name)||""),"name")}),[C.make,C.model]),Object(c.useEffect)((function(){if(Array.isArray(R)&&R.length>0){var e=null===R||void 0===R?void 0:R.filter((function(e){return e._id===C.vehicleCategory}));0===(null===e||void 0===e?void 0:e.length)&&ve("","vehicleCategory")}}),[R]);Object(c.useEffect)((function(){var e,t=(null===(e=u.find((function(e){return e._id===C.state})))||void 0===e?void 0:e.districts)||[];ee((null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name,taluks:e.taluks}})))||[])}),[C.state]),Object(c.useEffect)((function(){var e,t=(null===X||void 0===X||null===(e=X.find((function(e){return e.value===C.district})))||void 0===e?void 0:e.taluks)||[];re(null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name}})))}),[C.district,X]),Object(c.useEffect)((function(){(function(){var e,t;return null===u||void 0===u||null===(e=u.find((function(e){return e._id===C.state})))||void 0===e||null===(t=e.districts.map((function(e){return e._id})))||void 0===t?void 0:t.includes(C.district)})()||ve("","district")}),[C.state]),Object(c.useEffect)((function(){(function(){var e,t,n,a;return null===u||void 0===u||null===(e=u.find((function(e){return e._id===C.state})))||void 0===e||null===(t=e.districts.find((function(e){return e._id===C.district})))||void 0===t||null===(n=t.taluks)||void 0===n||null===(a=n.map((function(e){return e._id})))||void 0===a?void 0:a.includes(C.taluk)})()||ve("","taluk")}),[C.district,X]);var Oe=function(){var e,t,n,a,l,c,s,r,o,d,u,j,b,m,v,O,h,x;f(!0),C.primaryPhoto=null===oe||void 0===oe||null===(e=oe.current)||void 0===e||null===(t=e.uploadingFiles)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.base64,C.otherPhotos=null===de||void 0===de||null===(a=de.current)||void 0===a||null===(l=a.uploadingFiles)||void 0===l?void 0:l.map((function(e){return e.base64})),C.registrationPhoto=null===ue||void 0===ue||null===(c=ue.current)||void 0===c||null===(s=c.uploadingFiles)||void 0===s||null===(r=s[0])||void 0===r?void 0:r.base64,C.insurancePhoto=null===je||void 0===je||null===(o=je.current)||void 0===o||null===(d=o.uploadingFiles)||void 0===d||null===(u=d[0])||void 0===u?void 0:u.base64,C.permitPhoto=null===be||void 0===be||null===(j=be.current)||void 0===j||null===(b=j.uploadingFiles)||void 0===b||null===(m=b[0])||void 0===m?void 0:m.base64,C.pollutionPhoto=null===me||void 0===me||null===(v=me.current)||void 0===v||null===(O=v.uploadingFiles)||void 0===O||null===(h=O[0])||void 0===h?void 0:h.base64,C.deletingFiles=null===de||void 0===de||null===(x=de.current)||void 0===x?void 0:x.deletingFiles,Je.save(C,C._id?Rt:It).then((function(e){ce(e.message),fe(!1),i()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){f(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(C._id?"Edit":"Add")+" Vehicle",style:{top:20},visible:h,okText:"Save",onOk:Oe,okButtonProps:{disabled:m||!V,style:{display:V?"inline-block":"none"}},onCancel:function(){fe(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:m,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),Oe()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!V,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Added By"}),Object(p.jsx)(ae,{disabled:!0,options:[{value:"admin",label:"Admin"},{value:"driver",label:"Driver"}],value:C.addedBy,onChange:function(e){ve(e,"addedBy")}})]}),Object(p.jsx)("div",{className:"col-md-6 form-group"}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Approved"}),Object(p.jsx)(ae,{options:[{value:!0,label:"Yes"},{value:!1,label:"No"}],value:C.isApproved,onChange:function(e){ve(e,"isApproved")}})]}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Vehicle Id"})}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Vehicle Id"}),Object(p.jsx)(P.a,{value:C.vehicleId||"",onChange:function(e){return ve(F.handleInteger(e.target.value),"vehicleId")}})]}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Service Type "})}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Service Type"}),Object(p.jsx)(ae,{options:l,value:C.serviceType,onChange:function(e){ve(e,"serviceType")}})]}),(null===T||void 0===T?void 0:T.length)?Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Ride Types"}),Object(p.jsx)(le,{options:T,col:4,value:C.rideTypes,onChange:function(e){!(null===e||void 0===e?void 0:e.length)||ve(e,"rideTypes")}})]}):null,(null===R||void 0===R?void 0:R.length)?Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Vehicle Categories"}),Object(p.jsx)(ae,{options:R,value:C.vehicleCategory||"",onChange:function(e){ve(e,"vehicleCategory")}})]}):null,Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Make Details "})}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Make"}),Object(p.jsx)(ae,{options:r||[],value:C.make||"",onChange:function(e){ve(e,"make")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Model"}),Object(p.jsx)(ae,{options:J||[],value:C.model||"",onChange:function(e){ve(e,"model")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Color"}),Object(p.jsx)(ae,{options:o,value:C.color||"",onChange:function(e){ve(e,"color")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Manufacturing Year"}),Object(p.jsx)(ie,{picker:"year",format:"YYYY",getFormat:"YYYY",disableUpcomingDate:!0,value:C.manufacturingYear||new Date,onChange:function(e){ve(e,"manufacturingYear")}})]}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Basic Details"})}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Name"}),Object(p.jsx)(P.a,{value:C.name||"",onChange:function(e){return ve(e.target.value,"name")},disabled:!0})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Vehicle Number"}),Object(p.jsx)(P.a,{value:C.vehicleNumber||"",onChange:function(e){return ve(e.target.value,"vehicleNumber")}})]}),"taxi"===(null===l||void 0===l||null===(n=l.find((function(e){return e._id===C.serviceType})))||void 0===n?void 0:n.key)?Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Available Seats"}),Object(p.jsx)(P.a,{value:C.availableSeats||"",onChange:function(e){return ve(F.handleInteger(e.target.value,2),"availableSeats")}})]}):null,"cargo"===(null===l||void 0===l||null===(a=l.find((function(e){return e._id===C.serviceType})))||void 0===a?void 0:a.key)?Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Available Capacity (in tons)"}),Object(p.jsx)(P.a,{value:C.availableCapacity||"",onChange:function(e){return ve(e.target.value,"availableCapacity")}})]}):null,Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"State"}),Object(p.jsx)(ae,{options:u.map((function(e){return{value:e._id,label:e.name}})),value:C.state,onChange:function(e){ve(e,"state")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"District"}),Object(p.jsx)(ae,{options:X||[],value:C.district,onChange:function(e){ve(e,"district")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Taluk"}),Object(p.jsx)(ae,{options:se||[],value:C.taluk,onChange:function(e){ve(e,"taluk")}})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-2 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Primary Image"}),Object(p.jsx)(ke,{ref:oe,fileCount:1,files:C.image?[C.image]:[]})]}),Object(p.jsxs)("div",{className:"col-md-10 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Images"}),Object(p.jsx)(ke,{ref:de,fileCount:4,files:C.otherPhotos?C.otherPhotos:[]})]}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Registration"})}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Registration Number"}),Object(p.jsx)(P.a,{value:C.registrationNumber||"",onChange:function(e){return ve(e.target.value,"registrationNumber")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Registration Expiry Date"}),Object(p.jsx)(ie,{format:"MMMM D, YYYY",disablePastDate:!0,value:C.registrationExpiryDate||new Date,onChange:function(e){ve(e,"registrationExpiryDate")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Registration Image"}),Object(p.jsx)(ke,{ref:ue,fileCount:1,files:C.registrationImage?[C.registrationImage]:[]})]}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Insurance"})}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Insurance Number"}),Object(p.jsx)(P.a,{value:C.insuranceNumber||"",onChange:function(e){return ve(e.target.value,"insuranceNumber")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Insurance Expiry Date"}),Object(p.jsx)(ie,{format:"MMMM D, YYYY",disablePastDate:!0,value:C.insuranceExpiryDate||new Date,onChange:function(e){ve(e,"insuranceExpiryDate")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Insurance Image"}),Object(p.jsx)(ke,{ref:je,fileCount:1,files:C.insuranceImage?[C.insuranceImage]:[]})]}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Permit"})}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Permit Number"}),Object(p.jsx)(P.a,{value:C.permitNumber||"",onChange:function(e){return ve(e.target.value,"permitNumber")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Permit Expiry Date"}),Object(p.jsx)(ie,{format:"MMMM D, YYYY",disablePastDate:!0,value:C.permitExpiryDate||new Date,onChange:function(e){ve(e,"permitExpiryDate")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Permit Image"}),Object(p.jsx)(ke,{ref:be,fileCount:1,files:C.permitImage?[C.permitImage]:[]})]}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Pollution Certificate"})}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Pollution Certificate Number"}),Object(p.jsx)(P.a,{value:C.pollutionNumber||"",onChange:function(e){return ve(e.target.value,"pollutionNumber")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Pollution Certificate Expiry Date"}),Object(p.jsx)(ie,{format:"MMMM D, YYYY",disablePastDate:!0,value:C.pollutionExpiryDate||new Date,onChange:function(e){ve(e,"pollutionExpiryDate")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Pollution Certificate Image"}),Object(p.jsx)(ke,{ref:me,fileCount:1,files:C.pollutionImage?[C.pollutionImage]:[]})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ae,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:C.isActive,onChange:function(e){ve(e,"isActive")}})]})]})})})})})})})),Et=Object(c.forwardRef)((function(e,t){var n=Object(c.useState)(!1),a=Object(d.a)(n,2),i=a[0],l=a[1],s=Object(c.useState)({}),r=Object(d.a)(s,2),o=r[0],u=r[1];return Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){u(e),l(!0)}}})),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)($.a,{style:{top:20},visible:i,onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:200,closable:!1,footer:null,children:[Object(p.jsx)(g.a,{spinning:!0,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:"Loading"}),Object(p.jsx)(St,{vehicleData:o,setVisible:l})]})})})),qt={view:F.getModules("viewRideType"),add:F.getModules("addRideType"),edit:F.getModules("editRideType"),delete:F.getModules("deleteRideType")},Ut=qt.view,Pt=qt.add,Yt=qt.edit,zt=qt.delete;var Vt=Object(c.forwardRef)((function(e,t){var n,a=e.list,i=e.serviceType,l=e.vehicleCategories,s=Object(c.useState)(!1),r=Object(d.a)(s,2),o=r[0],u=r[1],j=Object(c.useState)(!1),b=Object(d.a)(j,2),m=b[0],f=b[1],v=Object(c.useState)({}),O=Object(d.a)(v,2),h=O[0],x=O[1],y=Object(c.useState)(!1),N=Object(d.a)(y,2),k=N[0],C=N[1],w=Object(c.useRef)(),S=function(e){f(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){w.current={},x(e?Object(U.a)({},e):{isActive:!0}),S(!0),!(null===e||void 0===e?void 0:e._id)&&Pt||e._id&&Yt?C(!0):C(!1)}}}));var A=function(e,t){x(Object(U.a)(Object(U.a)({},h),{},Object(q.a)({},t,e)))},T=function(){var e,t,n;u(!0),h.photo=null===w||void 0===w||null===(e=w.current)||void 0===e||null===(t=e.uploadingFiles)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.base64,lt.saveRideType(h,h._id?Yt:Pt).then((function(e){ce(e.message),S(!1),a()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){u(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(h._id?"Edit":"Add")+" Ride Type",style:{top:20},visible:m,okText:"Save",onOk:T,okButtonProps:{disabled:o||!k,style:{display:k?"inline-block":"none"}},onCancel:function(){S(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:o,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),T()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!k,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Service Type"}),Object(p.jsx)(ae,{options:i,value:null===h||void 0===h||null===(n=h.serviceType)||void 0===n?void 0:n._id,disabled:h._id,onChange:function(e){}})]}),Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Name"}),Object(p.jsx)(P.a,{value:h.name||"",onChange:function(e){return A(e.target.value,"name")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Vehicle Categories"}),Object(p.jsx)(le,{options:l,value:h.allowedVehicleCategories,onChange:function(e){!(null===e||void 0===e?void 0:e.length)||A(e,"allowedVehicleCategories")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Image"}),Object(p.jsx)(ke,{ref:w,fileCount:1,files:h.image?[h.image]:[]})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ae,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:h.isActive,onChange:function(e){A(e,"isActive")}})]})]})})})})})})})),Bt={view:F.getModules("viewMake"),add:F.getModules("addMake"),edit:F.getModules("editMake"),delete:F.getModules("deleteMake")},Kt=Bt.view,Ht=Bt.add,Wt=Bt.edit,Jt=Bt.delete;var Gt=Object(c.forwardRef)((function(e,t){var n=e.list,a=Object(c.useState)(!1),i=Object(d.a)(a,2),l=i[0],s=i[1],r=Object(c.useState)(!1),o=Object(d.a)(r,2),u=o[0],j=o[1],b=Object(c.useState)({}),m=Object(d.a)(b,2),f=m[0],v=m[1],O=Object(c.useState)(!1),h=Object(d.a)(O,2),x=h[0],y=h[1],N=Object(c.useRef)(),k=function(e){j(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){N.current={},v(e?Object(U.a)({},e):{isActive:!0}),k(!0),!(null===e||void 0===e?void 0:e._id)&&Ht||e._id&&Wt?y(!0):y(!1)}}}));var C=function(e,t){v(Object(U.a)(Object(U.a)({},f),{},Object(q.a)({},t,e)))};Object(c.useEffect)((function(){C(F.removeSpecialChars(f.name||""),"key")}),[f.name]);var w=function(){var e,t,a;s(!0),f.photo=null===N||void 0===N||null===(e=N.current)||void 0===e||null===(t=e.uploadingFiles)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.base64,Je.saveMake(f,f._id?Wt:Ht).then((function(e){ce(e.message),k(!1),n()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){s(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(f._id?"Edit":"Add")+" Make",style:{top:20},visible:u,okText:"Save",onOk:w,okButtonProps:{disabled:l||!x,style:{display:x?"inline-block":"none"}},onCancel:function(){k(!1)},destroyOnClose:!0,maskClosable:!1,width:400,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:l,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),w()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!x,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Name"}),Object(p.jsx)(P.a,{value:f.name||"",onChange:function(e){return C(e.target.value,"name")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Key"}),Object(p.jsx)(P.a,{value:f.key||"",onChange:function(e){return C(F.removeSpecialChars(e.target.value),"key")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ae,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:f.isActive,onChange:function(e){C(e,"isActive")}})]})]})})})})})})})),Zt={view:F.getModules("viewMakeModel"),add:F.getModules("addMakeModel"),edit:F.getModules("editMakeModel"),delete:F.getModules("deleteMakeModel")},Qt=Zt.view,Xt=Zt.add,$t=Zt.edit,en=Zt.delete;var tn=Object(c.forwardRef)((function(e,t){var n=e.list,a=e.makes,i=Object(c.useState)(!1),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!1),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)({}),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)(!1),x=Object(d.a)(h,2),y=x[0],N=x[1],k=Object(c.useRef)(),C=function(e){b(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){k.current={},O(e?Object(U.a)({},e):{isActive:!0}),C(!0),!(null===e||void 0===e?void 0:e._id)&&Xt||e._id&&$t?N(!0):N(!1)}}}));var w=function(e,t){O(Object(U.a)(Object(U.a)({},v),{},Object(q.a)({},t,e)))};Object(c.useEffect)((function(){w(F.removeSpecialChars(v.name||""),"key")}),[v.name]);var S=function(){var e,t,a;r(!0),v.photo=null===k||void 0===k||null===(e=k.current)||void 0===e||null===(t=e.uploadingFiles)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.base64,Je.saveMakeModel(v,v._id?$t:Xt).then((function(e){ce(e.message),C(!1),n()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){r(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(v._id?"Edit":"Add")+" Make Model",style:{top:20},visible:j,okText:"Save",onOk:S,okButtonProps:{disabled:s||!y,style:{display:y?"inline-block":"none"}},onCancel:function(){C(!1)},destroyOnClose:!0,maskClosable:!1,width:400,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:s,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),S()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!y,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Make"}),Object(p.jsx)(ae,{options:a,value:v.make,onChange:function(e){w(e,"make")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Name"}),Object(p.jsx)(P.a,{value:v.name||"",onChange:function(e){return w(e.target.value,"name")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Key"}),Object(p.jsx)(P.a,{value:v.key||"",onChange:function(e){return w(F.removeSpecialChars(e.target.value),"key")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ae,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:v.isActive,onChange:function(e){w(e,"isActive")}})]})]})})})})})})})),nn={view:F.getModules("viewColor"),add:F.getModules("addColor"),edit:F.getModules("editColor"),delete:F.getModules("deleteColor")},an=nn.view,ln=nn.add,cn=nn.edit,sn=nn.delete;var rn=Object(c.forwardRef)((function(e,t){var n=e.list,a=Object(c.useState)(!1),i=Object(d.a)(a,2),l=i[0],s=i[1],r=Object(c.useState)(!1),o=Object(d.a)(r,2),u=o[0],j=o[1],b=Object(c.useState)({}),m=Object(d.a)(b,2),f=m[0],v=m[1],O=Object(c.useState)(!1),h=Object(d.a)(O,2),x=h[0],y=h[1],N=Object(c.useRef)(),k=function(e){j(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){N.current={},v(e?Object(U.a)({},e):{isActive:!0}),k(!0),!(null===e||void 0===e?void 0:e._id)&&ln||e._id&&cn?y(!0):y(!1)}}}));var C=function(e,t){v(Object(U.a)(Object(U.a)({},f),{},Object(q.a)({},t,e)))};Object(c.useEffect)((function(){C(F.removeSpecialChars(f.name||""),"key")}),[f.name]);var w=function(){var e,t,a;s(!0),f.photo=null===N||void 0===N||null===(e=N.current)||void 0===e||null===(t=e.uploadingFiles)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.base64,Je.saveColor(f,f._id?cn:ln).then((function(e){ce(e.message),k(!1),n()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){s(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(f._id?"Edit":"Add")+" Color",style:{top:20},visible:u,okText:"Save",onOk:w,okButtonProps:{disabled:l||!x,style:{display:x?"inline-block":"none"}},onCancel:function(){k(!1)},destroyOnClose:!0,maskClosable:!1,width:400,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:l,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),w()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!x,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Name"}),Object(p.jsx)(P.a,{value:f.name||"",onChange:function(e){return C(e.target.value,"name")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Code"}),Object(p.jsx)(P.a,{type:"color",value:f.code||"",onChange:function(e){return C(e.target.value,"code")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ae,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:f.isActive,onChange:function(e){C(e,"isActive")}})]})]})})})})})})})),on=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"list",value:function(e,t){return L.get(this.baseURL+"list",{params:e,module:t})}},{key:"listAll",value:function(e,t){return L.get(this.baseURL+"list/ALL",{params:e,module:t})}},{key:"save",value:function(e,t){return L.post(this.baseURL+"save",e,{module:t})}},{key:"delete",value:function(e,t){return L.delete("".concat(this.baseURL,"delete/").concat(e),{module:t})}}]),e}();on.baseURL="fare-management/";var dn={view:F.getModules("viewFareManagement"),add:F.getModules("addFareManagement"),edit:F.getModules("addFareManagement"),delete:F.getModules("deleteFareManagement")},un=dn.view,jn=dn.add,bn=dn.edit,mn=dn.delete;function fn(e){var t=e.activeServiceType,n=void 0===t?"taxi":t,a=Object(c.useState)([]),i=Object(d.a)(a,2),l=i[0],s=i[1],r=Object(c.useState)([]),o=Object(d.a)(r,2),u=o[0],j=o[1],b=Object(c.useState)(!0),m=Object(d.a)(b,2),f=m[0],v=m[1],O=Object(c.useState)([]),h=Object(d.a)(O,2),x=h[0],g=h[1],y=Object(c.useState)([]),k=Object(d.a)(y,2),C=k[0],w=k[1],S=Object(c.useState)([]),A=Object(d.a)(S,2),T=A[0],M=A[1],D=Object(c.useRef)(),F=Object(c.useState)({key:"",page:1,limit:20,total:0,serviceTypeKey:n}),I=Object(d.a)(F,2),R=I[0],_=I[1],L=[{title:"Fares",dataIndex:"",width:200,render:function(e,t){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("table",{className:"text-uppercase",children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{className:"text-success",children:[Object(p.jsx)("td",{children:"Base Fare"}),Object(p.jsxs)("td",{children:[": ",t.baseFare]})]}),Object(p.jsxs)("tr",{className:"text-primary",children:[Object(p.jsx)("td",{children:"Booking Fare"}),Object(p.jsxs)("td",{children:[": ",t.bookingFare]})]}),Object(p.jsxs)("tr",{className:"text-info",children:[Object(p.jsx)("td",{children:"Per Minute Fare"}),Object(p.jsxs)("td",{children:[": ",t.perMinuteFare]})]})]})})})}},{title:"Charges",dataIndex:"",width:180,render:function(e,t){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("table",{className:"text-uppercase",children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{className:"text-danger",children:[Object(p.jsx)("td",{children:"Cancel Charge"}),Object(p.jsxs)("td",{children:[": ",t.cancelCharge]})]}),Object(p.jsxs)("tr",{className:"text-warning",children:[Object(p.jsx)("td",{children:"Waiting Charge"}),Object(p.jsxs)("td",{children:[": ",t.waitingCharge]})]})]})})})}},{title:"Admin Comission",dataIndex:"",width:180,render:function(e,t){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("table",{className:"text-uppercase",children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{className:"text-secondary",children:[Object(p.jsx)("td",{children:"Type"}),Object(p.jsxs)("td",{children:[": ",t.adminCommissionType]})]}),Object(p.jsxs)("tr",{className:"text-primary",children:[Object(p.jsx)("td",{children:"Value"}),Object(p.jsxs)("td",{children:[": ",t.adminCommissionValue]})]})]})})})}},{title:"Service Type",dataIndex:"serviceTypeDetails",width:100,render:function(e,t){return e.name}},{title:"Ride Type",dataIndex:"rideTypeDetails",width:120,render:function(e,t){return e.name}},{title:"Vehicle Category",dataIndex:"vehicleCategoryDetails",width:150,render:function(e,t){return e.name}},{title:"State",dataIndex:"stateDetails",width:150,render:function(e,t){return e.name}},{title:"District",dataIndex:"districtDetails",width:150,render:function(e,t){return e.name}},{title:"Taluk",dataIndex:"talukDetails",width:150,render:function(e,t){return e.name}},{title:"Action",width:90,hidden:!jn&&!bn&&!mn&&!un,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[bn?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){D.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{})})}):null,!bn&&un?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){D.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,mn?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(Oe.a,{title:"Are you sure to delete this fare?",onConfirm:function(){return q(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(pe.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),E=function(e){"undefined"===typeof e&&(e=R),v(!0),on.list(e,un).then((function(t){var n,a,i=e;i.total=(null===(n=t.result)||void 0===n?void 0:n.total)||0,_(Object(U.a)({},i)),s((null===(a=t.result)||void 0===a?void 0:a.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){v(!1)}))},q=function(e){on.delete(e,mn).then((function(e){ce(e.message),E()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){E(),Ce.listSdt("ignoreModule").then((function(e){j(e.result.data||[])})),Ge.listServiceType().then((function(e){return g(e.result.data||[])})),lt.listAllRideType({},"viewRideType").then((function(e){return w(e.result.data||[])}))}),[]),Object(c.useEffect)((function(){var e=C.filter((function(e){var t;return(null===(t=e.serviceType)||void 0===t?void 0:t.key)===n}));e.length&&M([].concat(Object(z.a)(T),[{type:"dropdown",key:"rideType",placeholder:"Ride Type",className:"w200 mx-1",options:e}]))}),[C]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Fare List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(fe,{data:l,columns:L,filters:T,parentSData:R,loading:f,formRef:D,list:E,searchPlaceholder:"Search",addNew:jn})}),Object(p.jsx)(vn,{ref:D,list:E,sdt:u,activeServiceType:n,serviceTypes:x,rideTypes:C})]})}var vn=Object(c.forwardRef)((function(e,t){var n,a=e.list,i=e.sdt,l=e.activeServiceType,s=e.serviceTypes,r=e.rideTypes,o=Object(c.useState)(!1),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)(!1),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)({}),x=Object(d.a)(h,2),y=x[0],N=x[1],k=Object(c.useState)([]),C=Object(d.a)(k,2),w=C[0],S=C[1],A=Object(c.useState)([]),T=Object(d.a)(A,2),M=T[0],D=T[1],I=Object(c.useState)(!1),R=Object(d.a)(I,2),_=R[0],L=R[1],E=Object(c.useState)([]),q=Object(d.a)(E,2),z=q[0],V=q[1],B=Object(c.useState)([]),K=Object(d.a)(B,2),H=K[0],W=K[1],J=function(e){O(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){var t,n;e||((e={isActive:!0,serviceType:null===s||void 0===s||null===(n=s.find((function(e){return e.key===l})))||void 0===n?void 0:n._id}).perKMCharges=[{}]);N(Object(U.a)({},e)),J(!0),!(null===(t=e)||void 0===t?void 0:t._id)&&jn||e._id&&bn?L(!0):L(!1)}}}));var G=function(e,t){for(var n=y,a=t.split("."),i=0;i<a.length;i++)i+1===a.length?n[a[i]]=e:("undefined"===typeof n[a[i]]&&(1*parseInt(a[i+1])>=0?n[a[i]]=[]:n[a[i]]={}),n=n[a[i]]);N(Object(U.a)({},y))},Z=function(){b(!0),on.save(y,y._id?bn:jn).then((function(e){ce(e.message),J(!1),a()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){b(!1)}))};Object(c.useEffect)((function(){V(r.filter((function(e){var t;return(null===(t=e.serviceType)||void 0===t?void 0:t.key)===l})))}),[r]),Object(c.useEffect)((function(){var e,t=(null===(e=z.find((function(e){return e._id===y.rideType})))||void 0===e?void 0:e.allowedVehicleCategoriesDetails)||[];t.find((function(e){return e._id===y.vehicleCategory}))||G("","vehicleCategory"),W(t)}),[y.rideType,z]);return Object(c.useEffect)((function(){var e,t=(null===(e=i.find((function(e){return e._id===y.state})))||void 0===e?void 0:e.districts)||[];S((null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name,taluks:e.taluks}})))||[])}),[y.state]),Object(c.useEffect)((function(){var e,t=(null===w||void 0===w||null===(e=w.find((function(e){return e.value===y.district})))||void 0===e?void 0:e.taluks)||[];D(null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name}})))}),[y.district,w]),Object(c.useEffect)((function(){(function(){var e,t;return null===i||void 0===i||null===(e=i.find((function(e){return e._id===y.state})))||void 0===e||null===(t=e.districts.map((function(e){return e._id})))||void 0===t?void 0:t.includes(y.district)})()||G("","district")}),[y.state]),Object(c.useEffect)((function(){(function(){var e,t,n,a;return null===i||void 0===i||null===(e=i.find((function(e){return e._id===y.state})))||void 0===e||null===(t=e.districts.find((function(e){return e._id===y.district})))||void 0===t||null===(n=t.taluks)||void 0===n||null===(a=n.map((function(e){return e._id})))||void 0===a?void 0:a.includes(y.taluk)})()||G("","taluk")}),[y.district,w]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(y._id?"Edit":"Add")+" Fare Management",style:{top:20},visible:v,okText:"Save",onOk:Z,okButtonProps:{disabled:j||!_,style:{display:_?"inline-block":"none"}},onCancel:function(){J(!1)},destroyOnClose:!0,maskClosable:!1,width:900,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:j,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),Z()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!_,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Service Type"}),Object(p.jsx)(ae,{options:s,value:y.serviceType,onChange:function(e){G(e,"serviceType")},disabled:!0})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Ride Type"}),Object(p.jsx)(ae,{options:z,value:y.rideType,onChange:function(e){G(e,"rideType")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Vehicle Category"}),Object(p.jsx)(ae,{options:H,value:y.vehicleCategory,onChange:function(e){G(e,"vehicleCategory")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"State"}),Object(p.jsx)(ae,{options:i.map((function(e){return{value:e._id,label:e.name}})),value:y.state,onChange:function(e){G(e,"state")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"District"}),Object(p.jsx)(ae,{options:w||[],value:y.district,onChange:function(e){G(e,"district")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Taluk"}),Object(p.jsx)(ae,{options:M||[],value:y.taluk,onChange:function(e){G(e,"taluk")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Base Fare"}),Object(p.jsx)(P.a,{value:y.baseFare||"",onChange:function(e){return G(F.handleFloat(e.target.value),"baseFare")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Booking Fare"}),Object(p.jsx)(P.a,{value:y.bookingFare||"",onChange:function(e){return G(F.handleFloat(e.target.value),"bookingFare")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Per Minute Fare"}),Object(p.jsx)(P.a,{value:y.perMinuteFare||"",onChange:function(e){return G(F.handleFloat(e.target.value),"perMinuteFare")}})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Cancel Charge"}),Object(p.jsx)(P.a,{value:y.cancelCharge||"",onChange:function(e){return G(F.handleFloat(e.target.value),"cancelCharge")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Waiting Charge(Per Minute)"}),Object(p.jsx)(P.a,{value:y.waitingCharge||"",onChange:function(e){return G(F.handleFloat(e.target.value),"waitingCharge")}})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Admin Commission Type"}),Object(p.jsx)(ae,{options:[{_id:"flat",title:"FLAT"},{_id:"percentage",title:"PERCENTAGE"}],value:y.adminCommissionType,onChange:function(e){G(e,"adminCommissionType")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Admin Commission Value"}),Object(p.jsx)(P.a,{value:y.adminCommissionValue||"",onChange:function(e){return G(F.handleFloat(e.target.value),"adminCommissionValue")}})]}),["taxi-pickup-drop","taxi-rentals","cargo-daily-ride","cargo-rentals"].includes(null===z||void 0===z||null===(n=z.find((function(e){return e._id===y.rideType})))||void 0===n?void 0:n.key)?Object(p.jsx)(On,{perKMCharges:y.perKMCharges,handleChange:G}):null]})})})})})})}));function On(e){var t=e.perKMCharges,n=e.handleChange;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",children:"Per KM Charge"})}),Object(p.jsx)("div",{className:"col-md-2 form-group",children:Object(p.jsx)("label",{className:"req",children:"Min KM"})}),Object(p.jsx)("div",{className:"col-md-2 form-group",children:Object(p.jsx)("label",{className:"req",children:"Max KM"})}),Object(p.jsx)("div",{className:"col-md-4 form-group",children:Object(p.jsx)("label",{className:"req",children:"Per KM Charge"})}),Object(p.jsx)("div",{}),null===t||void 0===t?void 0:t.map((function(e,a){return Object(p.jsxs)(s.a.Fragment,{children:[Object(p.jsx)("div",{className:"col-md-2 form-group",children:Object(p.jsx)(P.a,{placeholder:"Min KM",value:0===a?0:t[a-1].maxKM,disabled:!0})}),Object(p.jsx)("div",{className:"col-md-2 form-group",children:Object(p.jsx)(P.a,{placeholder:"Max KM",value:e.maxKM||"",onChange:function(e){n(F.handleInteger(e.target.value),"perKMCharges.".concat(a,".maxKM"))}})}),Object(p.jsx)("div",{className:"col-md-4 form-group",children:Object(p.jsx)(P.a,{placeholder:"Per KM Charge",value:e.charge||"",onChange:function(e){n(F.handleFloat(e.target.value),"perKMCharges.".concat(a,".charge"))}})}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[a+1===t.length?Object(p.jsx)(N.a,{type:"dashed",onClick:function(){e.maxKM&&e.maxKM>(0===a?0:t[a-1].maxKM)&&e.charge?n([].concat(Object(z.a)(t),[{}]),"perKMCharges"):ce("Max KM must be greater than ".concat(0===a?0:t[a-1].maxKM," and Per KM charge is required"),"error")},children:"Add"}):null,a+1===t.length&&0!==a?Object(p.jsx)(N.a,{type:"dashed",className:"mx-2",danger:!0,onClick:function(){t.pop(),n(Object(z.a)(t),"perKMCharges")},children:"Remove"}):null]})]},a)}))]})}var hn={view:F.getModules("viewEmailTemplate"),add:F.getModules("addEmailTemplate"),edit:F.getModules("editEmailTemplate"),delete:F.getModules("deleteEmailTemplate")},xn=hn.view,pn=hn.add,gn=hn.edit,yn=hn.delete;var Nn=Object(c.forwardRef)((function(e,t){var n=e.list,a=Object(c.useState)(!1),i=Object(d.a)(a,2),l=i[0],s=i[1],r=Object(c.useState)(!1),o=Object(d.a)(r,2),u=o[0],j=o[1],b=Object(c.useState)({}),m=Object(d.a)(b,2),f=m[0],v=m[1],O=Object(c.useState)(!1),h=Object(d.a)(O,2),x=h[0],y=h[1],N=function(e){j(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){v(e?Object(U.a)({},e):{deletable:!0}),N(!0),!(null===e||void 0===e?void 0:e._id)&&pn||e._id&&gn?y(!0):y(!1)}}}));var k=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];x&&(n?v(Object(U.a)(Object(U.a)({},f),{},Object(q.a)({},t,e))):f=Object(U.a)(Object(U.a)({},f),{},Object(q.a)({},t,e)))},C=function(){s(!0),ft.saveTeplate(f,f._id?gn:pn).then((function(e){ce(e.message),N(!1),n()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){s(!1)}))};return Object(c.useEffect)((function(){!f.deletable||k(F.removeSpecialChars(f.subject||""),"key")}),[f.subject]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(f._id?"Edit":"Add")+" Email Template",style:{top:20},visible:u,okText:"Save",onOk:C,okButtonProps:{disabled:l||!x,style:{display:x?"inline-block":"none"}},onCancel:function(){N(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:l,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),C()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!x,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Subject"}),Object(p.jsx)(P.a,{value:f.subject||"",onChange:function(e){k(e.target.value,"subject")}})]}),Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Key"}),Object(p.jsx)(P.a,{value:f.key||"",disabled:!f.deletable,onChange:function(e){!f.deletable||k(F.removeSpecialChars(e.target.value),"key")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Template Design"}),Object(p.jsx)(Ot,{height:700,initialValue:f.html||"",onChange:function(e){k(e,"html",!1)}})]})]})})})})})})})),kn=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"list",value:function(e,t){return L.get(this.baseURL+"list",{params:e,module:t})}},{key:"listAll",value:function(e,t){return L.get(this.baseURL+"list/ALL",{params:e,module:t})}},{key:"save",value:function(e,t){return L.post(this.baseURL+"save",e,{module:t})}},{key:"delete",value:function(e,t){return L.delete("".concat(this.baseURL,"delete/").concat(e),{module:t})}}]),e}();kn.baseURL="notification/";var Cn={view:F.getModules("viewNotification"),add:F.getModules("addNotification"),edit:F.getModules("editNotification"),delete:F.getModules("deleteNotification")},wn=Cn.view,Sn=Cn.add,An=Cn.edit,Tn=Cn.delete;var Mn=Object(c.forwardRef)((function(e,t){var n=e.list,a=e.sdt,i=e.customers,l=e.drivers,s=e.admins,r=e.serviceTypes,o=Object(c.useState)(!1),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)(!1),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)({}),x=Object(d.a)(h,2),y=x[0],N=x[1],k=Object(c.useState)(!1),C=Object(d.a)(k,2),w=C[0],S=C[1],A=Object(c.useState)([]),T=Object(d.a)(A,2),M=T[0],D=T[1],F=Object(c.useState)([]),I=Object(d.a)(F,2),R=I[0],_=I[1],L=Object(c.useState)([]),E=Object(d.a)(L,2),z=E[0],V=E[1],B=Object(c.useState)([]),K=Object(d.a)(B,2),H=K[0],W=K[1],J=function(e){O(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){N(e?Object(U.a)({},e):{deletable:!0}),J(!0),!(null===e||void 0===e?void 0:e._id)&&Sn||e._id?S(!0):S(!1)}}}));var G=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];w&&(n?N(Object(U.a)(Object(U.a)({},y),{},Object(q.a)({},t,e))):y=Object(U.a)(Object(U.a)({},y),{},Object(q.a)({},t,e)))},Z=function(){b(!0),kn.save(y,Sn).then((function(e){ce(e.message),J(!1),n()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){b(!1)}))};Object(c.useEffect)((function(){"manyCustomers"===y.to||"allCustomers"===y.to?D(i.map((function(e){return{_id:e._id,title:e.firstName+" "+(null===e||void 0===e?void 0:e.lastName)+" - (".concat(e.email,")"),state:e.state,district:e.district,taluk:e.taluk}}))||[]):"manyDrivers"===y.to||"allDrivers"===y.to?D(l.map((function(e){var t;return{_id:e._id,title:e.firstName+" "+(null===e||void 0===e?void 0:e.lastName)+" - (".concat(e.email,")"),state:e.state,district:e.district,taluk:e.taluk,serviceType:null===e||void 0===e||null===(t=e.vehicleDetails)||void 0===t?void 0:t.serviceType}}))||[]):"manyAdmins"===y.to||"allAdmins"===y.to?D(s.map((function(e){return{_id:e._id,title:e.firstName+" "+(null===e||void 0===e?void 0:e.lastName)+" - (".concat(e.email,")"),state:e.state,district:e.district,taluk:e.taluk}}))||[]):D([])}),[y.to]),Object(c.useEffect)((function(){_(M)}),[M]),Object(c.useEffect)((function(){if("allCustomers"===y.to||"allDrivers"===y.to||"allAdmins"===y.to){var e=R.map((function(e){return e._id}));G(e,"userIds")}else G(null,"userIds")}),[R]);return Object(c.useEffect)((function(){var e,t=(null===(e=a.find((function(e){return e._id===y.state})))||void 0===e?void 0:e.districts)||[];V((null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name,taluks:e.taluks}})))||[])}),[y.state]),Object(c.useEffect)((function(){var e,t=(null===z||void 0===z||null===(e=z.find((function(e){return e.value===y.district})))||void 0===e?void 0:e.taluks)||[];W(null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name}})))}),[y.district,z]),Object(c.useEffect)((function(){(function(){var e,t;return null===a||void 0===a||null===(e=a.find((function(e){return e._id===y.state})))||void 0===e||null===(t=e.districts.map((function(e){return e._id})))||void 0===t?void 0:t.includes(y.district)})()||G(null,"district")}),[y.state]),Object(c.useEffect)((function(){(function(){var e,t,n,i;return null===a||void 0===a||null===(e=a.find((function(e){return e._id===y.state})))||void 0===e||null===(t=e.districts.find((function(e){return e._id===y.district})))||void 0===t||null===(n=t.taluks)||void 0===n||null===(i=n.map((function(e){return e._id})))||void 0===i?void 0:i.includes(y.taluk)})()||G(null,"taluk")}),[y.district,z]),Object(c.useEffect)((function(){y.taluk?_(M.filter((function(e){var t,n;return y.serviceType&&e.serviceType?(null===e||void 0===e?void 0:e.taluk)===(null===(t=y)||void 0===t?void 0:t.taluk)&&e.serviceType===y.serviceType:(null===e||void 0===e?void 0:e.taluk)===(null===(n=y)||void 0===n?void 0:n.taluk)}))):y.district?_(M.filter((function(e){var t,n;return y.serviceType&&e.serviceType?(null===e||void 0===e?void 0:e.district)===(null===(t=y)||void 0===t?void 0:t.district)&&e.serviceType===y.serviceType:(null===e||void 0===e?void 0:e.district)===(null===(n=y)||void 0===n?void 0:n.district)}))):y.state?_(M.filter((function(e){var t,n;return y.serviceType&&e.serviceType?(null===e||void 0===e?void 0:e.state)===(null===(t=y)||void 0===t?void 0:t.state)&&e.serviceType===y.serviceType:(null===e||void 0===e?void 0:e.state)===(null===(n=y)||void 0===n?void 0:n.state)}))):y.serviceType?_(M.filter((function(e){return!e.serviceType||e.serviceType===y.serviceType}))):_(M)}),[y.serviceType,y.state,y.district,y.taluk,M]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:"Send Notification",style:{top:20},visible:v,okText:Object(p.jsxs)("div",{className:"d-flex",children:["Send ",Object(p.jsx)(bt.a,{className:"my-auto mx-1"})]}),onOk:Z,okButtonProps:{disabled:j||!w,style:{display:w?"inline-block":"none"}},onCancel:function(){J(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:j,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),Z()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!w,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"State"}),Object(p.jsx)(ae,{placeholder:"All States",allowClear:!0,options:a.map((function(e){return{value:e._id,label:e.name}})),value:y.state,onChange:function(e){G(e,"state")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"District"}),Object(p.jsx)(ae,{placeholder:"All Districts",allowClear:!0,options:z||[],value:y.district,onChange:function(e){G(e,"district")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Taluk"}),Object(p.jsx)(ae,{placeholder:"All Taluks",allowClear:!0,options:H||[],value:y.taluk,onChange:function(e){G(e,"taluk")}})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Send To"}),Object(p.jsx)(ae,{options:[{_id:"manyCustomers",title:"Many Customers"},{_id:"manyDrivers",title:"Many Drivers"},{_id:"manyAdmins",title:"Many Admins"},{_id:"allCustomers",title:"All Customers"},{_id:"allDrivers",title:"All Drivers"},{_id:"allAdmins",title:"All Admins"}],value:y.to,onChange:function(e){G(e,"to")}})]}),["manyDrivers","allDrivers"].includes(y.to)?Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Service Type"}),Object(p.jsx)(ae,{allowClear:!0,placeholder:"All Service Types",options:r||[],value:y.serviceType,onChange:function(e){G(e,"serviceType")}})]}):null,["manyCustomers","manyDrivers","manyAdmins"].includes(y.to)?Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Select Users"}),Object(p.jsx)(ae,{mode:"multiple",placeholder:"Select Users",options:R||[],value:y.userIds,onChange:function(e){G(e,"userIds")}})]}):null,Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Content"}),Object(p.jsx)(P.a.TextArea,{value:y.content,onChange:function(e){G(e.target.value,"content")}})]})]})})})})})})})),Dn={view:F.getModules("viewTaluk"),add:F.getModules("addTaluk"),edit:F.getModules("editTaluk"),delete:F.getModules("deleteTaluk")},Fn=Dn.view,In=Dn.add,Rn=Dn.edit,_n=Dn.delete;function Ln(e){var t=e.districtId,n=void 0===t?null:t,a=Object(c.useState)([]),i=Object(d.a)(a,2),l=i[0],s=i[1],r=Object(c.useState)(!0),o=Object(d.a)(r,2),u=o[0],j=o[1],b=Object(c.useState)([]),m=Object(d.a)(b,2),f=m[0],v=m[1],O=Object(c.useState)([]),h=Object(d.a)(O,2),x=h[0],g=h[1],y=Object(c.useRef)(),k=Object(c.useState)({key:"",page:1,limit:20,total:0,district:n}),C=Object(d.a)(k,2),w=C[0],S=C[1],A=[{title:"Name",dataIndex:"name"},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:90,hidden:!In&&!Rn&&!_n&&!Fn,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[Rn?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){y.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{})})}):null,!Rn&&Fn?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){y.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,_n?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(Oe.a,{title:"Are you sure to delete this taluk?",onConfirm:function(){return M(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(pe.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),T=function(e){"undefined"===typeof e&&(e=w),j(!0),Ce.listTaluk(e,Fn).then((function(t){var n,a,i=e;i.total=(null===(n=t.result)||void 0===n?void 0:n.total)||0,S(Object(U.a)({},i)),s((null===(a=t.result)||void 0===a?void 0:a.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){j(!1)}))},M=function(e){Ce.deleteTaluk(e,_n).then((function(e){ce(e.message),T()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){T(),Ce.listAllState().then((function(e){v(e.result.data||[])})),Ce.listAllDistrict().then((function(e){g(e.result.data||[])}))}),[]),Object(p.jsxs)(p.Fragment,{children:[n?null:Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Taluk List"})}),Object(p.jsx)("div",{className:"m-2 p-2",children:Object(p.jsx)(fe,{data:l,columns:A,parentSData:w,loading:u,formRef:y,list:T,searchPlaceholder:"Name",addNew:In})}),Object(p.jsx)(En,{ref:y,list:T,states:f,districts:x,districtId:n})]})}var En=Object(c.forwardRef)((function(e,t){var n=e.list,a=e.states,i=e.districts,l=e.districtId,s=Object(c.useState)(!1),r=Object(d.a)(s,2),o=r[0],u=r[1],j=Object(c.useState)(!1),b=Object(d.a)(j,2),m=b[0],f=b[1],v=Object(c.useState)({}),O=Object(d.a)(v,2),h=O[0],x=O[1],y=Object(c.useState)([]),N=Object(d.a)(y,2),k=N[0],C=N[1],w=Object(c.useState)(!1),S=Object(d.a)(w,2),A=S[0],T=S[1],M=function(e){f(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){var t,n;e||((e={}).isActive=!0,e.state=null===(n=i.find((function(e){return e._id===l})))||void 0===n?void 0:n.state,e.district=l);x(Object(U.a)({},e)),M(!0),!(null===(t=e)||void 0===t?void 0:t._id)&&In||e._id&&Rn?T(!0):T(!1)}}}));var D=function(e,t){x(Object(U.a)(Object(U.a)({},h),{},Object(q.a)({},t,e)))};Object(c.useEffect)((function(){D(F.removeSpecialChars(h.name||""),"key")}),[h.name]),Object(c.useEffect)((function(){h.state?C(null===i||void 0===i?void 0:i.filter((function(e){return e.state===h.state}))):C([])}),[h.state]);var I=function(){u(!0),Ce.saveTaluk(h,h._id?Rn:In).then((function(e){ce(e.message),M(!1),n()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){u(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(h._id?"Edit":"Add")+" Taluk",style:{top:20},visible:m,okText:"Save",onOk:I,okButtonProps:{disabled:o||!A,style:{display:A?"inline-block":"none"}},onCancel:function(){M(!1)},destroyOnClose:!0,maskClosable:!1,width:400,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:o,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),I()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!A,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Name"}),Object(p.jsx)(P.a,{value:h.name||"",onChange:function(e){return D(e.target.value,"name")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"State"}),Object(p.jsx)(ae,{disabled:l,options:a||[],value:h.state,onChange:function(e){D(e,"state")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"District"}),Object(p.jsx)(ae,{disabled:l,options:k||[],value:h.district,onChange:function(e){D(e,"district")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ae,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:h.isActive,onChange:function(e){D(e,"isActive")}})]})]})})})})})})})),qn={view:F.getModules("viewDistrict"),add:F.getModules("addDistrict"),edit:F.getModules("editDistrict"),delete:F.getModules("deleteDistrict")},Un=qn.view,Pn=qn.add,Yn=qn.edit,zn=qn.delete;function Vn(e){var t=e.stateId,n=void 0===t?null:t,a=Object(c.useState)([]),i=Object(d.a)(a,2),l=i[0],s=i[1],r=Object(c.useState)(!0),o=Object(d.a)(r,2),u=o[0],j=o[1],b=Object(c.useState)([]),m=Object(d.a)(b,2),f=m[0],v=m[1],O=Object(c.useRef)(),h=Object(c.useRef)(),x=Object(c.useState)({key:"",page:1,limit:20,total:0,state:n}),g=Object(d.a)(x,2),y=g[0],k=g[1],C=[{title:"Name",dataIndex:"name"},{title:"Taluks",dataIndex:"name",width:100,render:function(e,t){return Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){h.current.openForm(t)},children:"Taluks"})}},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:90,hidden:!Pn&&!Yn&&!zn&&!Un,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[Yn?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){O.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{})})}):null,!Yn&&Un?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){O.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,zn?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(Oe.a,{title:"Are you sure to delete this district?",onConfirm:function(){return S(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(pe.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),w=function(e){"undefined"===typeof e&&(e=y),j(!0),Ce.listDistrict(e,Un).then((function(t){var n,a,i=e;i.total=(null===(n=t.result)||void 0===n?void 0:n.total)||0,k(Object(U.a)({},i)),s((null===(a=t.result)||void 0===a?void 0:a.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){j(!1)}))},S=function(e){Ce.deleteDistrict(e,zn).then((function(e){ce(e.message),w()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){w(),Ce.listAllState().then((function(e){v(e.result.data||[])}))}),[]),Object(p.jsxs)(p.Fragment,{children:[n?null:Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"District List"})}),Object(p.jsx)("div",{className:"m-2 p-2",children:Object(p.jsx)(fe,{data:l,columns:C,parentSData:y,loading:u,formRef:O,list:w,searchPlaceholder:"Name",addNew:Pn})}),Object(p.jsx)(Bn,{ref:O,list:w,states:f,stateId:n}),Object(p.jsx)(Kn,{ref:h})]})}var Bn=Object(c.forwardRef)((function(e,t){var n=e.list,a=e.states,i=e.stateId,l=Object(c.useState)(!1),s=Object(d.a)(l,2),r=s[0],o=s[1],u=Object(c.useState)(!1),j=Object(d.a)(u,2),b=j[0],m=j[1],f=Object(c.useState)({}),v=Object(d.a)(f,2),O=v[0],h=v[1],x=Object(c.useState)(!1),y=Object(d.a)(x,2),N=y[0],k=y[1],C=function(e){m(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){h(e?Object(U.a)({},e):{isActive:!0,state:i}),C(!0),!(null===e||void 0===e?void 0:e._id)&&Pn||e._id&&Yn?k(!0):k(!1)}}}));var w=function(e,t){h(Object(U.a)(Object(U.a)({},O),{},Object(q.a)({},t,e)))};Object(c.useEffect)((function(){w(F.removeSpecialChars(O.name||""),"key")}),[O.name]);var S=function(){o(!0),Ce.saveDistrict(O,O._id?Yn:Pn).then((function(e){ce(e.message),C(!1),n()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){o(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(O._id?"Edit":"Add")+" District",style:{top:20},visible:b,okText:"Save",onOk:S,okButtonProps:{disabled:r||!N,style:{display:N?"inline-block":"none"}},onCancel:function(){C(!1)},destroyOnClose:!0,maskClosable:!1,width:400,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:r,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),S()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!N,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Name"}),Object(p.jsx)(P.a,{value:O.name||"",onChange:function(e){return w(e.target.value,"name")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"State"}),Object(p.jsx)(ae,{disabled:i,options:a||[],value:O.state,onChange:function(e){w(e,"state")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ae,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:O.isActive,onChange:function(e){w(e,"isActive")}})]})]})})})})})})})),Kn=Object(c.forwardRef)((function(e,t){var n=Object(c.useState)(!1),a=Object(d.a)(n,2),i=a[0],l=a[1],s=Object(c.useState)({}),r=Object(d.a)(s,2),o=r[0],u=r[1],j=function(e){l(e)};return Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){u(e?Object(U.a)({},e):{isActive:!0}),j(!0)}}})),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:Object(p.jsxs)(p.Fragment,{children:["Taluk list of ",Object(p.jsx)("span",{className:"text-danger",children:o.name})]}),style:{top:20},visible:i,footer:null,onCancel:function(){j(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body-overflow",children:Object(p.jsx)(Ln,{districtId:o._id})})})})),Hn={view:F.getModules("viewState"),add:F.getModules("addState"),edit:F.getModules("editState"),delete:F.getModules("deleteState")},Wn=Hn.view,Jn=Hn.add,Gn=Hn.edit,Zn=Hn.delete;var Qn=Object(c.forwardRef)((function(e,t){var n=e.list,a=Object(c.useState)(!1),i=Object(d.a)(a,2),l=i[0],s=i[1],r=Object(c.useState)(!1),o=Object(d.a)(r,2),u=o[0],j=o[1],b=Object(c.useState)({}),m=Object(d.a)(b,2),f=m[0],v=m[1],O=Object(c.useState)(!1),h=Object(d.a)(O,2),x=h[0],y=h[1],N=function(e){j(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){v(e?Object(U.a)({},e):{isActive:!0}),N(!0),!(null===e||void 0===e?void 0:e._id)&&Jn||e._id&&Gn?y(!0):y(!1)}}}));var k=function(e,t){v(Object(U.a)(Object(U.a)({},f),{},Object(q.a)({},t,e)))};Object(c.useEffect)((function(){k(F.removeSpecialChars(f.name||""),"key")}),[f.name]);var C=function(){s(!0),Ce.saveState(f,f._id?Gn:Jn).then((function(e){ce(e.message),N(!1),n()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){s(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(f._id?"Edit":"Add")+" State",style:{top:20},visible:u,okText:"Save",onOk:C,okButtonProps:{disabled:l||!x,style:{display:x?"inline-block":"none"}},onCancel:function(){N(!1)},destroyOnClose:!0,maskClosable:!1,width:400,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:l,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),C()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!x,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Name"}),Object(p.jsx)(P.a,{value:f.name||"",onChange:function(e){return k(e.target.value,"name")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ae,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:f.isActive,onChange:function(e){k(e,"isActive")}})]})]})})})})})})})),Xn=Object(c.forwardRef)((function(e,t){var n=Object(c.useState)(!1),a=Object(d.a)(n,2),i=a[0],l=a[1],s=Object(c.useState)({}),r=Object(d.a)(s,2),o=r[0],u=r[1],j=function(e){l(e)};return Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){u(e?Object(U.a)({},e):{isActive:!0}),j(!0)}}})),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:Object(p.jsxs)(p.Fragment,{children:["District list of ",Object(p.jsx)("span",{className:"text-danger",children:o.name})]}),style:{top:20},visible:i,footer:null,onCancel:function(){j(!1)},destroyOnClose:!0,maskClosable:!1,width:1600,className:"app-modal-body-overflow",children:Object(p.jsx)(Vn,{stateId:o._id})})})})),$n=F.getModules(),ea=F.isSuperAdmin();Array.prototype.includesAny=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.some((function(t){return e.includes(t)}))};var ta={leftNav:[{name:"Dashboard",icon:function(){return Object(p.jsx)(j.a,{})},url:"/",component:function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{style:{height:"100vh"},children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Dashboard"})}),Object(p.jsx)("h2",{className:"text-secondary",children:"Dashboard Comming Soon..."})]})})}},{name:"Modules",icon:function(){return Object(p.jsx)(j.a,{})},url:"/modules",component:Be},{name:"Tabs",url:"/vehicles",icon:function(){return Object(p.jsx)(b.a,{})},component:function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{className:"m-21 border p-2",children:Object(p.jsx)(We,{})})})}},{name:"States, Districts & Taluks",baseURL:"/sdt",modules:[nn.view,Bt.view,Zt.view,Ze.view,Dt.view],icon:function(){return Object(p.jsx)(m.a,{})},subMenus:[{name:"States",url:"/states",component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(!0),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useRef)(),u=Object(c.useRef)(),j=Object(c.useState)({key:"",page:1,limit:20,total:0}),b=Object(d.a)(j,2),m=b[0],f=b[1],v=[{title:"Name",dataIndex:"name"},{title:"Districts",dataIndex:"name",width:100,render:function(e,t){return Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){u.current.openForm(t)},children:"Districts"})}},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:90,hidden:!Jn&&!Gn&&!Zn&&!Wn||!F.isSuperAdmin(),render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[Gn?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){o.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{})})}):null,!Gn&&Wn?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){o.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,Zn?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(Oe.a,{title:"Are you sure to delete this state?",onConfirm:function(){return h(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(pe.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),O=function(e){"undefined"===typeof e&&(e=m),r(!0),Ce.listState(e,Wn).then((function(t){var n,i,l=e;l.total=(null===(n=t.result)||void 0===n?void 0:n.total)||0,f(Object(U.a)({},l)),a((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){r(!1)}))},h=function(e){Ce.deleteState(e,Zn).then((function(e){ce(e.message),O()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){O()}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"State List"})}),Object(p.jsx)("div",{className:"m-2 p-2",children:Object(p.jsx)(fe,{data:n,columns:v,parentSData:m,loading:s,formRef:o,list:O,searchPlaceholder:"Name",addNew:Jn&&F.isSuperAdmin()})}),Object(p.jsx)(Qn,{ref:o,list:O}),Object(p.jsx)(Xn,{ref:u})]})},modules:[Hn.view]},{name:"Districts",url:"/districts",component:Vn,modules:[qn.view]},{name:"Taluks",url:"/taluks",component:Ln,modules:[Dn.view]}].filter((function(e){var t;return ea||(null===(t=e.modules)||void 0===t?void 0:t.includesAny($n))}))},{name:"Vehicle",baseURL:"/vehicle",modules:[nn.view,Bt.view,Zt.view,Ze.view,Dt.view],icon:function(){return Object(p.jsx)(b.a,{})},subMenus:[{name:"Color",url:"/color",component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(!0),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useRef)(),u=Object(c.useState)({key:"",page:1,limit:20,total:0}),j=Object(d.a)(u,2),b=j[0],m=j[1],f=[{title:"Name",dataIndex:"name"},{title:"Color",dataIndex:"code",width:60,render:function(e){return Object(p.jsx)(G.a,{style:{backgroundColor:e},children:"\xa0"})}},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:90,hidden:!ln&&!cn&&!sn&&!an,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[cn?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){o.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{})})}):null,!cn&&an?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){o.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,sn?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(Oe.a,{title:"Are you sure to delete this color?",onConfirm:function(){return O(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(pe.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),v=function(e){"undefined"===typeof e&&(e=b),r(!0),Je.listColor(e,an).then((function(t){var n,i,l=e;l.total=(null===(n=t.result)||void 0===n?void 0:n.total)||0,m(Object(U.a)({},l)),a((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){r(!1)}))},O=function(e){Je.deleteColor(e,sn).then((function(e){ce(e.message),v()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){v()}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Color List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(fe,{data:n,columns:f,parentSData:b,loading:s,formRef:o,list:v,searchPlaceholder:"Name or Code",addNew:ln})}),Object(p.jsx)(rn,{ref:o,list:v})]})},modules:[nn.view]},{name:"Make",url:"/make",component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(!0),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useRef)(),u=Object(c.useState)({key:"",page:1,limit:20,total:0}),j=Object(d.a)(u,2),b=j[0],m=j[1],f=[{title:"Name",dataIndex:"name"},{title:"Key",dataIndex:"key",width:200},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:90,hidden:!Ht&&!Wt&&!Jt&&!Kt,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[Wt?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){o.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{})})}):null,!Wt&&Kt?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){o.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,Jt?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(Oe.a,{title:"Are you sure to delete this make?",onConfirm:function(){return O(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(pe.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),v=function(e){"undefined"===typeof e&&(e=b),r(!0),Je.listMake(e,Kt).then((function(t){var n,i,l=e;l.total=(null===(n=t.result)||void 0===n?void 0:n.total)||0,m(Object(U.a)({},l)),a((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){r(!1)}))},O=function(e){Je.deleteMake(e,Jt).then((function(e){ce(e.message),v()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){v()}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Make List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(fe,{data:n,columns:f,parentSData:b,loading:s,formRef:o,list:v,searchPlaceholder:"Name or Key",addNew:Ht})}),Object(p.jsx)(Gt,{ref:o,list:v})]})},modules:[Bt.view]},{name:"Make Model",url:"/make-model",component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(!0),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)([]),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useRef)(),f=Object(c.useState)({key:"",page:1,limit:20,total:0}),v=Object(d.a)(f,2),O=v[0],h=v[1],x=[{title:"Name",dataIndex:"name"},{title:"Key",dataIndex:"key",width:200},{title:"Make",dataIndex:"makeDetails",width:200,render:function(e){return Object(p.jsx)(G.a,{children:e.name})}},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:90,hidden:!Xt&&!$t&&!en&&!Qt,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[$t?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){m.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{})})}):null,!$t&&Qt?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){m.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,en?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(Oe.a,{title:"Are you sure to delete this make model?",onConfirm:function(){return y(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(pe.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),g=function(e){"undefined"===typeof e&&(e=O),r(!0),Je.listMakeModel(e,Qt).then((function(t){var n,i,l=e;l.total=(null===(n=t.result)||void 0===n?void 0:n.total)||0,h(Object(U.a)({},l)),a((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){r(!1)}))},y=function(e){Je.deleteMakeModel(e,en).then((function(e){ce(e.message),g()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){g(),Je.listAllMake().then((function(e){b(e.result.data)}))}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Make Model List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(fe,{data:n,columns:x,parentSData:O,loading:s,formRef:m,list:g,searchPlaceholder:"Name or Key",addNew:Xt})}),Object(p.jsx)(tn,{ref:m,list:g,makes:j})]})},modules:[Zt.view]},{name:"Category",url:"/category",component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)([]),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!0),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)([]),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useRef)(),x=Object(c.useState)({key:"",page:1,limit:20,total:0}),g=Object(d.a)(x,2),k=g[0],C=g[1],w=[{title:"Image",dataIndex:"image",width:100,render:function(e){return Object(p.jsx)(y.a,{height:30,preview:{mask:"View"},src:null===e||void 0===e?void 0:e.url})}},{title:"Name",dataIndex:"name"},{title:"Slug",dataIndex:"slug",width:200},{title:"Service Type",dataIndex:"serviceTypeDetails",width:100,render:function(e,t){return"cargo"===(null===e||void 0===e?void 0:e.key)?Object(p.jsx)(G.a,{color:"cyan",children:null===e||void 0===e?void 0:e.name}):"taxi"===(null===e||void 0===e?void 0:e.key)?Object(p.jsx)(G.a,{color:"purple",children:null===e||void 0===e?void 0:e.name}):Object(p.jsx)(G.a,{children:null===e||void 0===e?void 0:e.name})}},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:90,hidden:!Xe&&!$e&&!et&&!Qe,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[$e?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){h.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{})})}):null,!$e&&Qe?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){h.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,et?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(Oe.a,{title:"Are you sure to delete this category?",onConfirm:function(){return A(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(pe.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),S=function(e){"undefined"===typeof e&&(e=k),b(!0),Je.listCategory(e,Qe).then((function(t){var n,i,l=e;l.total=(null===(n=t.result)||void 0===n?void 0:n.total)||0,C(Object(U.a)({},l)),a((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){b(!1)}))},A=function(e){Je.deleteCategory(e,et).then((function(e){ce(e.message),S()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){O([{type:"dropdown",key:"serviceType",placeholder:"Service Type",className:"w200 mx-1",options:s}])}),[s]),Object(c.useEffect)((function(){S(),Ge.listServiceType().then((function(e){r(e.result.data)}))}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Vehicle Category List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(fe,{data:n,columns:w,filters:v,parentSData:k,loading:j,formRef:h,list:S,searchPlaceholder:"Name or Slug",addNew:Xe})}),Object(p.jsx)(tt,{ref:h,list:S,serviceTypes:s})]})},modules:[Ze.view]},{name:"Vehicle",url:"/vehicle",component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)([]),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)(!0),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)(),x=Object(d.a)(h,2),g=x[0],k=x[1],C=Object(c.useState)([]),w=Object(d.a)(C,2),S=w[0],A=w[1],T=Object(c.useState)([]),M=Object(d.a)(T,2),D=M[0],I=M[1],R=Object(c.useState)([]),_=Object(d.a)(R,2),L=_[0],E=_[1],q=Object(c.useRef)(),P=Object(c.useRef)(),Y=Object(c.useState)({key:"",page:1,limit:20,total:0}),z=Object(d.a)(Y,2),V=z[0],B=z[1],H=[{title:"Image",dataIndex:"image",width:100,render:function(e){return Object(p.jsx)(y.a,{height:30,preview:{mask:"View"},src:null===e||void 0===e?void 0:e.url})}},{title:"Vehicle Id",dataIndex:"vehicleId",width:80},{title:"Vehicle Number",dataIndex:"vehicleNumber",width:120},{title:"Name",dataIndex:"name"},{title:"Capacity",dataIndex:"availableCapacity",width:80,render:function(e,t){return e?e+" Tons":t.availableSeats+" Seats"}},{title:"State",dataIndex:"stateDetails",width:120,render:function(e){return null===e||void 0===e?void 0:e.name}},{title:"District",dataIndex:"districtDetails",width:120,render:function(e){return null===e||void 0===e?void 0:e.name}},{title:"Taluk",dataIndex:"talukDetails",width:120,render:function(e){return null===e||void 0===e?void 0:e.name}},{title:"Created At",dataIndex:"createdAt",render:function(e){return K()(e).format("MMMM D, YYYY")}},{title:"Driver",dataIndex:"",width:120,hidden:!F.getModules("viewDriver"),render:function(e,t){var n,a;return Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){P.current.openForm(t)},children:Object(p.jsxs)("span",{className:"d-flex",children:[Object(p.jsx)("span",{children:"Driver"}),Object(p.jsx)("span",{className:"d-flex mx-1 "+((null===t||void 0===t?void 0:t.driverDetails)?(null===t||void 0===t||null===(n=t.driverDetails)||void 0===n?void 0:n.isApproved)?"text-success":"text-warning":"text-danger"),children:(null===t||void 0===t?void 0:t.driverDetails)?(null===t||void 0===t||null===(a=t.driverDetails)||void 0===a?void 0:a.isApproved)?Object(p.jsx)(at.a,{className:"my-auto"}):Object(p.jsx)(it.a,{className:"my-auto"}):Object(p.jsx)(nt.a,{className:"my-auto"})})]})})}},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:90,hidden:!It&&!Rt&&!_t&&!Ft,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[Rt?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){q.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{})})}):null,!Rt&&Ft?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){q.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,_t?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(Oe.a,{title:"Are you sure to delete this vehicle?",onConfirm:function(){return J(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(pe.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),W=function(e){"undefined"===typeof e&&(e=V),O(!0),Je.list(e,Ft).then((function(t){var n,i,l=e;l.total=(null===(n=t.result)||void 0===n?void 0:n.total)||0,B(Object(U.a)({},l)),a((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){O(!1)}))},J=function(e){Je.delete(e,_t).then((function(e){ce(e.message),W()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){W(),Ge.listServiceType().then((function(e){r(e.result.data)})),lt.listAllRideType({},"viewRideType").then((function(e){b(e.result.data)})),Je.listAllMake({models:1,active:1,modelActive:1},"viewMake").then((function(e){k(e.result.data)})),Je.listAllColor({},"viewColor").then((function(e){A(e.result.data)})),Ce.listSdt("ignoreModule").then((function(e){I(e.result.data||[])}))}),[]),Object(c.useEffect)((function(){E([{type:"dropdown",key:"serviceType",placeholder:"Service Type",className:"w200 mx-1",options:s},{type:"dropdown",key:"driverApproved",placeholder:"Driver Status",className:"w200 mx-1",options:[{value:!0,label:"Approved"},{value:!1,label:"Not Approved"}]}])}),[s]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Vehicle List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(fe,{data:n,columns:H,filters:L,parentSData:V,loading:v,formRef:q,list:W,searchPlaceholder:"Vehicle id or Name or Number",addNew:It})}),Object(p.jsx)(Lt,{ref:q,list:W,serviceType:s,rideTypes:j,makes:g,colors:S,sdt:D}),Object(p.jsx)(Et,{ref:P})]})},modules:[Dt.view]}].filter((function(e){var t;return ea||(null===(t=e.modules)||void 0===t?void 0:t.includesAny($n))}))},{name:"Ride",baseURL:"/ride",modules:[qt.view],icon:function(){return Object(p.jsx)(b.a,{})},subMenus:[{name:"Type",url:"/type",component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(!0),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)([]),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)([]),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)([]),x=Object(d.a)(h,2),g=x[0],k=x[1],C=Object(c.useRef)(),w=Object(c.useState)({key:"",page:1,limit:20,total:0}),S=Object(d.a)(w,2),A=S[0],T=S[1],M=[{title:"Image",dataIndex:"image",width:100,render:function(e){return Object(p.jsx)(y.a,{height:30,preview:{mask:"View"},src:null===e||void 0===e?void 0:e.url})}},{title:"Name",dataIndex:"name",width:200},{title:"Allowed Vehicle Categories",dataIndex:"allowedVehicleCategoriesDetails",render:function(e,t){return e.map((function(e,t){return Object(p.jsx)(G.a,{color:t%4===0?"blue":t%4===1?"gold":t%4===2?"cyan":"pink",children:e.name},t)}))}},{title:"Service Type",dataIndex:"serviceType",width:100,render:function(e){return"cargo"===e.key?Object(p.jsx)(G.a,{color:"magenta",children:e.name}):Object(p.jsx)(G.a,{color:"orange",children:e.name})}},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:60,hidden:!Pt&&!Yt&&!zt&&!Ut,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[Yt?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){C.current.openForm(Object(U.a)({serviceType:null===A||void 0===A?void 0:A.serviceType},e))},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{})})}):null,!Yt&&Ut?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){C.current.openForm(Object(U.a)({serviceType:null===A||void 0===A?void 0:A.serviceType},e))},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null]})}}].filter((function(e){return!e.hidden})),D=function(e){"undefined"===typeof e&&(e=A),r(!0),lt.listRideType(e,Ut).then((function(t){var n,i,l=e;l.total=(null===(n=t.result)||void 0===n?void 0:n.total)||0,T(Object(U.a)({},l)),a((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){r(!1)}))};return Object(c.useEffect)((function(){D(),Ge.listServiceType().then((function(e){b(e.result.data)})),Je.listAllCategory({},"viewVehicleCategory").then((function(e){k(e.result.data)}))}),[]),Object(c.useEffect)((function(){O([{type:"dropdown",key:"serviceType",placeholder:"Service Type",className:"w200 mx-1",options:j}])}),[j]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Ride Type List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(fe,{data:n,columns:M,parentSData:A,filters:v,loading:s,formRef:C,list:D,searchPlaceholder:"Name or Slug",addNew:!1})}),Object(p.jsx)(Vt,{ref:C,list:D,serviceType:j,vehicleCategories:g})]})},modules:[qt.view]}].filter((function(e){var t;return ea||(null===(t=e.modules)||void 0===t?void 0:t.includesAny($n))}))},{name:"Fare Management",baseURL:"/fare-management",modules:[dn.view],icon:function(){return Object(p.jsx)(b.a,{})},subMenus:[{name:"Taxi Fare Management",url:"/taxi",component:fn,modules:[dn.view]},{name:"Cargo Fare Management",url:"/cargo",component:function(){return fn({activeServiceType:"cargo"})},modules:[dn.view]}].filter((function(e){var t;return ea||(null===(t=e.modules)||void 0===t?void 0:t.includesAny($n))}))},{name:"Drivers",url:"/drivers",icon:function(){return Object(p.jsx)(f.a,{})},component:St,modules:[yt.view]},{name:"Admins",url:"/users",icon:function(){return Object(p.jsx)(f.a,{})},component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)([]),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!0),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useRef)(),f=Object(c.useState)({key:"",page:1,limit:20,total:0}),v=Object(d.a)(f,2),O=v[0],h=v[1],x=[{title:"Name",dataIndex:"firstName",render:function(e,t){return t.firstName+" "+t.lastName}},{title:"User Type",dataIndex:"type",width:150,render:function(e){return Object(p.jsx)(G.a,{color:"stateAdmin"===e?"geekblue":"districtAdmin"===e?"magenta":"talukAdmin"===e?"orange":"",children:"stateAdmin"===e?"State Admin":"districtAdmin"===e?"District Admin":"talukAdmin"===e?"Taluk Admin":""})}},{title:"Email",dataIndex:"email",width:200},{title:"Phone No",dataIndex:"phoneNo",width:100},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:90,hidden:!qe&&!Ue&&!Pe&&!Ee,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[Ue?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){m.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{})})}):null,!Ue&&Ee?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){m.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,Pe?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(Oe.a,{title:"Are you sure to delete this admin?",onConfirm:function(){return y(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(pe.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),g=function(e){"undefined"===typeof e&&(e=O),b(!0),E.list(e,Ee).then((function(t){var n,i,l=e;l.total=(null===(n=t.result)||void 0===n?void 0:n.total)||0,h(Object(U.a)({},l)),a((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){b(!1)}))},y=function(e){E.delete(e,Pe).then((function(e){ce(e.message),g()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){g(),Ce.listSdt("ignoreModule").then((function(e){r(e.result.data||[])}))}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Admin List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(fe,{data:n,columns:x,parentSData:O,loading:j,formRef:m,list:g,searchPlaceholder:"First Name or Last Name",addNew:qe})}),Object(p.jsx)(Ye,{ref:m,list:g,sdt:s})]})},modules:[Le.view]},{name:"Customers",url:"/customers",icon:function(){return Object(p.jsx)(f.a,{})},component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)([]),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!0),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useRef)(),f=Object(c.useState)({key:"",page:1,limit:20,total:0}),v=Object(d.a)(f,2),O=v[0],h=v[1],x=[{title:"Name",dataIndex:"firstName",render:function(e,t){return t.firstName+" "+t.lastName}},{title:"Email",dataIndex:"email",width:150},{title:"Phone No",dataIndex:"phoneNo",width:100},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:90,hidden:!Ae&&!Te&&!Me,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[Te?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){m.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{})})}):null,!Te&&Se?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){m.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,Me?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(Oe.a,{title:"Are you sure to delete this admin?",onConfirm:function(){return y(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(pe.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),g=function(e){"undefined"===typeof e&&(e=O),b(!0),ge.list(e,Se).then((function(t){var n,i,l=e;l.total=(null===(n=t.result)||void 0===n?void 0:n.total)||0,h(Object(U.a)({},l)),a((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){b(!1)}))},y=function(e){ge.delete(e,Me).then((function(e){ce(e.message),g()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){g(),Ce.listSdt("ignoreModule").then((function(e){r(e.result.data||[])}))}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Customer List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(fe,{data:n,columns:x,parentSData:O,loading:j,formRef:m,list:g,searchPlaceholder:"First Name or Last Name",addNew11:Ae})}),Object(p.jsx)(De,{ref:m,list:g,sdt:s})]})},modules:[we.view]},{name:"User Permissions",url:"/user-permissions",icon:function(){return Object(p.jsx)(v.a,{})},component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)([]),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!0),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useRef)(),f=Object(c.useState)({key:"",page:1,limit:20,total:0}),v=Object(d.a)(f,2),O=v[0],h=v[1],x=[{title:"User Type",dataIndex:"typeName",width:150},{title:"Granted Modules",dataIndex:"grantedModuleTitles",render:function(e,t){return e.map((function(e,n){return Object(p.jsx)(G.a,{color:n%4===0?"blue":n%4===1?"gold":n%4===2?"cyan":"pink",children:e.title},t.grantedModules[n])}))}},{title:"Action",key:"action",width:60,render:function(e,t){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){m.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{})})})})}}].filter((function(e){return!e.hidden})),g=function(e){"undefined"===typeof e&&(e=O),b(!0),Fe.listAdminModules(e).then((function(t){var n,i,l=e;l.total=(null===(n=t.result)||void 0===n?void 0:n.total)||0,h(Object(U.a)({},l)),a((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){b(!1)}))};return Object(c.useEffect)((function(){g(),Fe.listModulesAll().then((function(e){r(e.result.data||[])}))}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Customer List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(fe,{data:n,columns:x,parentSData:O,loading:j,formRef:m,list:g,searchPlaceholder:"First Name or Last Name",addNew:!1})}),Object(p.jsx)(Ie,{ref:m,list:g,modules:s})]})}},{name:"Email",baseURL:"/email",modules:[hn.view,ht.view],icon:function(){return Object(p.jsx)(O.a,{})},subMenus:[{name:"Template",url:"/template",component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(!0),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useRef)(),u=Object(c.useState)({key:"",page:1,limit:20,total:0}),j=Object(d.a)(u,2),b=j[0],m=j[1],f=[{title:"Subject",dataIndex:"subject"},{title:"Key",dataIndex:"key",width:200},{title:"Action",width:100,hidden:!pn&&!gn&&!yn&&!xn,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[gn?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){o.current.openForm(Object(U.a)({},e))},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{})})}):null,!gn&&xn?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){o.current.openForm(Object(U.a)({},e))},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,t.deletable&&yn?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(Oe.a,{title:"Are you sure to delete this email template?",onConfirm:function(){return O(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(pe.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),v=function(e){"undefined"===typeof e&&(e=b),r(!0),ft.listTeplates(e,xn).then((function(t){var n,i,l=e;l.total=(null===(n=t.result)||void 0===n?void 0:n.total)||0,m(Object(U.a)({},l)),a((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){r(!1)}))},O=function(e){ft.deleteTeplates(e,yn).then((function(e){ce(e.message),v()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){v()}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Email Template List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(fe,{data:n,columns:f,parentSData:b,loading:s,formRef:o,list:v,searchPlaceholder:"Title or Key",addNew:pn})}),Object(p.jsx)(Nn,{ref:o,list:v})]})},modules:[hn.view]},{name:"Email",url:"/email",component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(!0),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)([]),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)([]),f=Object(d.a)(m,2),v=f[0],h=f[1],x=Object(c.useState)([]),g=Object(d.a)(x,2),y=g[0],k=g[1],C=Object(c.useState)([]),w=Object(d.a)(C,2),S=w[0],A=w[1],T=Object(c.useState)([]),M=Object(d.a)(T,2),D=M[0],F=M[1],I=Object(c.useState)([]),R=Object(d.a)(I,2),_=R[0],L=R[1],q=Object(c.useRef)(),P=Object(c.useState)({key:"",page:1,limit:20,total:0}),Y=Object(d.a)(P,2),V=Y[0],B=Y[1],K=[{title:"Subject",dataIndex:"subject"},{title:"Key",dataIndex:"key",width:200},{title:"Action",width:60,hidden:!pt&&!xt,render:function(e,t){return Object(p.jsx)(p.Fragment,{children:xt?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){q.current.openForm(Object(U.a)({},e))},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null})}}].filter((function(e){return!e.hidden})),H=function(e){"undefined"===typeof e&&(e=V),r(!0),ft.listTeplates(e,xt).then((function(t){var n,i,l=e;l.total=(null===(n=t.result)||void 0===n?void 0:n.total)||0,B(Object(U.a)({},l)),a((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){r(!1)}))};return Object(c.useEffect)((function(){H(),ft.listAllTeplates("viewEmailTemplate").then((function(e){b([].concat(Object(z.a)(e.result.data||[]),[{_id:"custom",subject:"Custom"}]))})).catch((function(e){ce("Email templates are not loaded! Contact super admin if you have any permission error","error")})),ge.listAll("viewCustomer").then((function(e){h(e.result.data||[])})).catch((function(e){ce("Customers are not loaded! Contact super admin if you have any permission error","error")})),ct.listAll({},"viewDriver").then((function(e){k(e.result.data||[])})).catch((function(e){ce("Drivers are not loaded! Contact super admin if you have any permission error","error")})),E.listAll({},"viewAdmin").then((function(e){A(e.result.data||[])})).catch((function(e){ce("Admins are not loaded! Contact super admin if you have any permission error","error")})),Ce.listSdt("ignoreModule").then((function(e){F(e.result.data||[])})),Ge.listServiceType().then((function(e){L(e.result.data)}))}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Sent Email List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(fe,{data:n,columns:K,parentSData:V,loading:s,formRef:q,list:H,searchPlaceholder:"Title or Key",addNew:pt,addNewIcon:O.a,addNewText:"Compose Email"})}),Object(p.jsx)(gt,{ref:q,list:H,templates:j,sdt:D,customers:v,drivers:y,admins:S,serviceTypes:_})]})},modules:[ht.view]}].filter((function(e){var t;return ea||(null===(t=e.modules)||void 0===t?void 0:t.includesAny($n))}))},{name:"Notifications",url:"/notifications",icon:function(){return Object(p.jsx)(h.a,{})},component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(!0),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)([]),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)([]),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)([]),x=Object(d.a)(h,2),g=x[0],y=x[1],k=Object(c.useState)([]),C=Object(d.a)(k,2),w=C[0],S=C[1],A=Object(c.useState)([]),T=Object(d.a)(A,2),M=T[0],D=T[1],F=Object(c.useRef)(),I=Object(c.useState)({key:"",page:1,limit:20,total:0}),R=Object(d.a)(I,2),_=R[0],L=R[1],q=[{title:"To",dataIndex:"to",width:150,render:function(e){return"manyCustomers"===e?"Many Customers":"manyDrivers"===e?"Many Drivers":"manyAdmins"===e?"Many Admins":"allCustomers"===e?"All Customers":"allDrivers"===e?"All Drivers":"allAdmins"===e?"All Admins":e}},{title:"Content",dataIndex:"content"},{title:"State",dataIndex:"stateDetails",width:250,render:function(e){return null===e||void 0===e?void 0:e.name}},{title:"District",dataIndex:"districtDetails",width:250,render:function(e){return null===e||void 0===e?void 0:e.name}},{title:"Taluk",dataIndex:"talukDetails",width:250,render:function(e){return null===e||void 0===e?void 0:e.name}},{title:"Action",width:100,hidden:!Sn&&!An&&!Tn&&!wn,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[An?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){F.current.openForm(Object(U.a)({},e))},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{})})}):null,!An&&wn?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){F.current.openForm(Object(U.a)({},e))},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,Tn?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(Oe.a,{title:"Are you sure to delete this notification?",onConfirm:function(){return Y(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(pe.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),P=function(e){"undefined"===typeof e&&(e=_),r(!0),kn.list(e,wn).then((function(t){var n,i,l=e;l.total=(null===(n=t.result)||void 0===n?void 0:n.total)||0,L(Object(U.a)({},l)),a((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){r(!1)}))},Y=function(e){kn.delete(e,Tn).then((function(e){ce(e.message),P()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){P(),ge.listAll("viewCustomer").then((function(e){b(e.result.data||[])})).catch((function(e){ce("Customers are not loaded! Contact super admin if you have any permission error","error")})),ct.listAll({},"viewDriver").then((function(e){O(e.result.data||[])})).catch((function(e){ce("Drivers are not loaded! Contact super admin if you have any permission error","error")})),E.listAll({},"viewAdmin").then((function(e){y(e.result.data||[])})).catch((function(e){ce("Admins are not loaded! Contact super admin if you have any permission error","error")})),Ce.listSdt("ignoreModule").then((function(e){S(e.result.data||[])})),Ge.listServiceType().then((function(e){D(e.result.data)}))}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Notification List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(fe,{data:n,columns:q,parentSData:_,loading:s,formRef:F,list:P,searchPlaceholder:"Content",addNew:Sn,addNewIcon:bt.a,addNewText:"Send New"})}),Object(p.jsx)(Mn,{ref:F,list:P,sdt:w,customers:j,drivers:v,admins:g,serviceTypes:M})]})},modules:[Cn.view]}].filter((function(e){var t;return ea||(null===(t=e.modules)||void 0===t?void 0:t.includesAny($n))})),topNav:[{name:"Your Profile",icon:function(){return Object(p.jsx)(x.a,{style:{marginRight:8},size:30,src:"images/avatar-1.jpg"})},url:"/profile",component:function(){var e,t,n=Object(c.useState)({}),a=Object(d.a)(n,2),i=a[0],l=a[1],s=Object(c.useState)(!0),r=Object(d.a)(s,2),o=r[0],u=r[1],j=Object(c.useRef)(),b=function(e){u(!0),E.details(e).then((function(e){var t;l((null===(t=e.result)||void 0===t?void 0:t.data)||{}),u(!1),j.current.closeForm()})).catch((function(e){u(!1),ce(e.message,"error")}))};return Object(c.useEffect)((function(){b()}),[]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(g.a,{spinning:o,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:[Object(p.jsx)(je,{ref:j,list:b}),Object(p.jsxs)("div",{className:"p-2 d-flex w-100",children:[Object(p.jsxs)("div",{className:"px-3",children:[Object(p.jsx)(y.a,{className:"w200",src:(null===(e=i.image)||void 0===e?void 0:e.url)||""}),Object(p.jsx)(N.a,{type:"dashed",className:"w200",onClick:function(){j.current.openForm()},children:"Edit Profile"})]}),Object(p.jsxs)("div",{className:"px-3 w-100",children:[Object(p.jsxs)("h5",{className:"text-secondary text-bold",children:[i.name||""," ",Object(p.jsxs)("span",{className:"text-danger h6",children:["@",i.username||""]})]}),Object(p.jsx)("p",{className:"text-info text-bold",children:(null===(t=i.user_type)||void 0===t?void 0:t.title)||""}),Object(p.jsx)(k.a,{orientation:"left",children:"Contact Info"}),Object(p.jsx)("table",{children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"w100 text-bold",children:"Phone: "}),Object(p.jsx)("td",{className:"text-info",children:i.mobile||""})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"w100 text-bold",children:"Address: "}),Object(p.jsx)("td",{className:"text-secondary",children:i.address||""})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"w100 text-bold",children:"Email: "}),Object(p.jsx)("td",{className:"text-info",children:i.email||""})]})]})}),Object(p.jsx)(k.a,{orientation:"left",children:"Basic Info"}),Object(p.jsx)("table",{children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"w100 text-bold",children:"Birthday: "}),Object(p.jsx)("td",{className:"text-info",children:K()(i.dob).format("MMMM D, YYYY")})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"w100 text-bold",children:"Gender: "}),Object(p.jsx)("td",{className:"text-secondary",children:"male"===i.gender?"Male":"female"===i.gender?"Female":"Other"})]})]})})]})]})]})})}}]},na=n(58),aa=u.a.SubMenu;function ia(){var e=Object(ze.g)(),t=Object(c.useState)(e.pathname),n=Object(d.a)(t,2),a=n[0],i=n[1];return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(u.a,{onClick:function(e){i(e.key)},style:{width:256},defaultOpenKeys:["sub1"],selectedKeys:a,mode:"inline",id:"left-menu-bar",children:ta.leftNav.map((function(e,t){var n;return Object(p.jsx)(c.Fragment,{children:(null===(n=e.subMenus)||void 0===n?void 0:n.length)?Object(p.jsx)(aa,{icon:Object(p.jsx)(e.icon,{}),title:e.name,children:e.subMenus.map((function(t){return Object(p.jsx)(u.a.Item,{children:Object(p.jsx)(na.b,{className:"text-d-none",to:(e.baseURL||"")+t.url,children:t.name})},t.module||t.url)}))},e.name.replace(/ /g,"")):Object(p.jsx)(u.a.Item,{icon:Object(p.jsx)(e.icon,{}),children:Object(p.jsx)(na.b,{className:"text-d-none",to:e.url,children:e.name})},e.url)},t)}))})})}var la=n(322),ca=n(323);function sa(){return Object(p.jsxs)("svg",{focusable:"false",xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"24",viewBox:"0 0 24 24",width:"24",children:[Object(p.jsx)("rect",{fill:"none",height:"24",width:"24"}),Object(p.jsx)("path",{d:"M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0 c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2 c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1 C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06 c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41 l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41 c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36 c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"})]})}function ra(){return Object(p.jsxs)("svg",{focusable:"false",xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"24",viewBox:"0 0 24 24",width:"24",children:[Object(p.jsx)("rect",{fill:"none",height:"24",width:"24"}),Object(p.jsx)("path",{fill:"white",d:"M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36c-0.98,1.37-2.58,2.26-4.4,2.26 c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"})]})}var oa=u.a.SubMenu;function da(){var e=Object(ze.g)(),t=Object(c.useState)(e.pathname),n=Object(d.a)(t,2),a=n[0],i=n[1],l=Object(c.useState)("undefined"===typeof F.getTheme?F.setTheme("light"):F.getTheme()),s=Object(d.a)(l,2),r=s[0],o=s[1];return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(u.a,{onClick:function(e){i(e.key)},selectedKeys:a,mode:"horizontal",children:[Object(p.jsx)(u.a.Item,{id:"menu-bar-logo",className:"d-flex",style:{width:256},children:Object(p.jsx)(y.a,{preview:!1,style:{height:"24px",width:"36px"},src:"images/logo-thumb.png"})},"mail"),Object(p.jsx)(u.a.Item,{className:"mr-auto",onClick:function(){var e,t,n,a;null===(e=document.querySelector("#left-menu-bar"))||void 0===e||null===(t=e.classList)||void 0===t||t.toggle("d-none"),null===(n=document.querySelector("#menu-bar-logo"))||void 0===n||null===(a=n.classList)||void 0===a||a.toggle("d-none")},children:Object(p.jsx)(la.a,{})},"menu"),Object(p.jsx)(u.a.Item,{icon:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ue,{cond:"light"===r,children:Object(p.jsx)(sa,{})}),Object(p.jsx)(ue,{cond:"dark"===r,children:Object(p.jsx)(ra,{})})]}),onClick:function(){var e;o(e="light"===r?"dark":"light"),F.setTheme(e)}},"light"),ta.topNav.map((function(e,t){var n;return Object(p.jsx)(c.Fragment,{children:(null===(n=e.subMenus)||void 0===n?void 0:n.length)?Object(p.jsx)(oa,{icon:Object(p.jsx)(e.icon,{}),title:e.name,children:e.subMenus.map((function(t){return Object(p.jsx)(u.a.Item,{children:Object(p.jsx)(na.b,{className:"text-d-none",to:(e.baseURL||"")+t.url,children:t.name})},t.url)}))},e.name.replace(/ /g,"")):Object(p.jsx)(u.a.Item,{icon:Object(p.jsx)(e.icon,{}),children:Object(p.jsx)(na.b,{className:"text-d-none",to:e.url,children:e.name})},e.url)},t)})),Object(p.jsx)(u.a.Item,{icon:Object(p.jsx)(ca.a,{}),onClick:function(){F.logout()},children:"Logout"},"logout")]})})}var ua=n(307);function ja(){return Object(p.jsx)(ua.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:Object(p.jsx)(na.b,{to:"/",children:Object(p.jsx)(N.a,{type:"primary",children:"Back Home"})})})}function ba(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(da,{}),Object(p.jsxs)("div",{className:"d-flex",children:[Object(p.jsx)("div",{className:"nav-overflow",children:Object(p.jsx)(ia,{})}),Object(p.jsx)("div",{className:"content-data",children:Object(p.jsxs)(ze.c,{children:[ta.leftNav.map((function(e,t){var n;return(null===(n=e.subMenus)||void 0===n?void 0:n.length)?e.subMenus.map((function(t){return Object(p.jsx)(ze.a,{exact:!0,path:e.baseURL+t.url,children:Object(p.jsx)(t.component,{})},t.module||t.url)})):Object(p.jsx)(ze.a,{exact:!0,path:e.url,children:Object(p.jsx)(e.component,{})},e.module||e.url)})),ta.topNav.map((function(e,t){var n;return(null===(n=e.subMenus)||void 0===n?void 0:n.length)?e.subMenus.map((function(t){return Object(p.jsx)(ze.a,{exact:!0,path:e.baseURL+t.url,children:Object(p.jsx)(t.component,{})},t.module||t.url)})):Object(p.jsx)(ze.a,{exact:!0,path:e.url,children:Object(p.jsx)(e.component,{})},e.module||e.url)})),Object(p.jsx)(ze.a,{path:"*",children:Object(p.jsx)(ja,{})})]})})]})]})}var ma=n(324),fa=n(325),va=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"login",value:function(e){return L.post("user/login",e,{module:"ignoreModule"})}},{key:"validateToken",value:function(e){return L.post("user/validate-token",e,{module:"ignoreModule"})}}]),e}();function Oa(){var e=Object(c.useState)("superadmin@test.com"),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)("123456"),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!1),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)(!1),f=Object(d.a)(m,2),v=f[0],O=f[1],h=function(){b(!0),va.login({email:n,password:s}).then((function(e){ce(e.message),F.setUserData(e.data),window.location.reload()})).catch((function(e){"string"!==typeof e.message?ce(e.message[Object.keys(e.message)[0]][0],"error"):ce(e.message,"error")})).finally((function(){b(!1)}))};return Object(p.jsx)(g.a,{spinning:j,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("div",{className:"d-flex h100vh bg-light1",children:Object(p.jsx)("div",{className:"w280 mx-auto mt-5 border p-4 bg-white1 h280",children:Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),h()},autoComplete:"off",spellCheck:"false",children:[Object(p.jsx)("h5",{className:"text-secondary text-center",children:"Cargo Admin Panel"}),Object(p.jsx)("div",{className:"ant-image w-100 mb-3",children:Object(p.jsx)("img",{className:"ant-image-img w60 h40 mx-auto",src:"images/logo-thumb.png",alt:"Logo"})}),Object(p.jsx)(P.a,{className:"mb-2",prefix:Object(p.jsx)(ma.a,{className:"site-form-item-icon"}),value:n,onChange:function(e){a(e.target.value)},placeholder:"Username"}),Object(p.jsx)(P.a,{className:"mb-2",prefix:Object(p.jsx)(fa.a,{className:"site-form-item-icon"}),value:s,onChange:function(e){r(e.target.value)},type:v?"text":"password",suffix:Object(p.jsx)(N.a,{type:"text",shape:"circle",icon:Object(p.jsx)(xe.a,{}),onClick:function(){return O(!v)}}),placeholder:"Password"}),Object(p.jsx)(N.a,{className:"login-form-button w-100",type:"primary",htmlType:"submit",onClick:h,children:"Log in"})]})})})})}var ha=function(){var e=Object(c.useState)(F.isLogged()),t=Object(d.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){va.validateToken().then((function(e){a(!0),Re.userType=e.type})).catch((function(e){a(!1),window.localStorage.clear()}))}),[]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(na.a,{basename:"/cargo/admin/build",children:[Object(p.jsx)(ue,{cond:n,children:Object(p.jsx)(ba,{})}),Object(p.jsx)(ue,{cond:!n,children:Object(p.jsx)(Oa,{})})]})})},xa=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,326)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,l=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),l(e),c(e)}))};Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("dark"!==F.getTheme()){e.next=5;break}return e.next=3,F.setTheme("dark");case 3:e.next=7;break;case 5:return e.next=7,F.setTheme("light");case 7:o.a.render(Object(p.jsx)(ha,{}),document.getElementById("root"));case 8:case"end":return e.stop()}}),e)})))(),xa()}},[[296,1,2]]]);
//# sourceMappingURL=main.7826f643.chunk.js.map