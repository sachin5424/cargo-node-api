(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{203:function(e,t,a){},302:function(e,t,a){"use strict";a.r(t);var n=a(62),i=a.n(n),l=a(82),c=a(0),s=a.n(c),r=a(40),o=a.n(r),d=a(7),u=(a(203),a(87)),j=a(323),b=a(324),m=a(325),f=a(326),v=a(327),O=a(319),h=a(328),x=a(316),p=a(1);var g=a(182),y=a(309),N=a(36),k=a(304),C=a(315),w=a(317),S=a(31),A=a(32),T=a(178),M=a.n(T),D=function(){function e(){Object(S.a)(this,e),this.setUserData=function(e){window.localStorage.clear(),window.localStorage.setItem("authorization",e.accessToken),window.localStorage.setItem("refreshToken",e.refreshToken),window.localStorage.setItem("modules",e.modules),window.localStorage.setItem("userType",e.userType)},this.getUserData=function(e){return e?JSON.parse(window.localStorage.user)[e]:JSON.parse(window.localStorage.user)},this.getToken=function(){return window.localStorage.authorization||""},this.isLogged=function(){return"undefined"!==typeof window.localStorage.authorization&&""!==window.localStorage.authorization},this.logout=function(e){e&&e.preventDefault(),window.localStorage.clear(),window.location.reload()}}return Object(A.a)(e,[{key:"getModules",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?(window.localStorage.modules||"").split(",").includes(e)||"superAdmin"===window.localStorage.userType?e:null:(window.localStorage.modules||"").split(",")}},{key:"isSuperAdmin",value:function(){return"superAdmin"===window.localStorage.userType}},{key:"isStateAdmin",value:function(){return"stateAdmin"===window.localStorage.userType}},{key:"isDistrictAdmin",value:function(){return"districtAdmin"===window.localStorage.userType}},{key:"isTalukAdmin",value:function(){return"talukAdmin"===window.localStorage.userType}},{key:"setTheme",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light";window.localStorage.setItem("theme",e);var t={light:"./css/antd.min.css",dark:"./css/antd.dark.min.css"},a=document.createElement("link");return a.rel="stylesheet",a.id="antd-stylesheet-"+e,a.href=t[e],document.head.appendChild(a),setTimeout((function(){var t,a;"light"===e&&(null===(t=document.getElementById("antd-stylesheet-dark"))||void 0===t||t.remove());"dark"===e&&(null===(a=document.getElementById("antd-stylesheet-light"))||void 0===a||a.remove())}),500),e}},{key:"getTheme",value:function(){var e;return null===(e=window.localStorage)||void 0===e?void 0:e.theme}},{key:"removeSpecialChars",value:function(e){return e.toLowerCase().replace(/[^a-z0-9 _-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}},{key:"handleInteger",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=null===e||void 0===e?void 0:e.replace(/[^0-9]/g,"");return t?null===a||void 0===a?void 0:a.substring(0,t):a}},{key:"handleFloat",value:function(e,t){var a=(e=e.replace(/[^0-9.]/g,"")).replace(/[\.\%]/g,(function(e,t,a){return"."===e&&a.indexOf(".")===t?".":""}));return t&&1*a>1*t&&(a=t),a}},{key:"toBase64",value:function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}},{key:"queryStringToJSON",value:function(e){"?"===(e=e||window.location.search.slice(1)).charAt(0)&&(e=e.slice(1));var t=e.split("&"),a={};return t.forEach((function(e){var t=e.split("="),n=t[0],i=decodeURIComponent(t[1]||"");a[n]?"[object Array]"===Object.prototype.toString.call(a[n])?a[n].push(i):a[n]=[a[n],i]:a[n]=i})),JSON.parse(JSON.stringify(a))}}]),e}(),F=new D,I=F.getModules(),R=F.isSuperAdmin(),_=M.a.create({baseURL:"localhost"!==window.location.hostname?"http://65.0.236.48:3003/admin/":"http://localhost:3003/admin/"});_.interceptors.request.use((function(e){return R||"ignoreModule"===e.module||I.includes(e.module)?(e.headers.authorization="Bearer "+F.getToken(),e):Promise.reject(new Error("Unauthorized"))}),(function(e){return Promise.reject(e)})),_.interceptors.response.use((function(e){return e.data}),(function(e){var t,a,n={};"undefined"!==typeof e.response?((null===(a=n=null===(t=e.response)||void 0===t?void 0:t.data)||void 0===a?void 0:a.message)||(n.message=e.message),n.errors&&Array.isArray(n.errors)&&(n.message=n.errors[0].msg)):n.message=e.message;return Promise.reject(n)}));var L=_,E=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"details",value:function(e,t){return L.post(this.baseURL+"profile/details",{params:e,module:t})}},{key:"list",value:function(e,t){return L.get(this.baseURL+"list",{params:e,module:t})}},{key:"listAll",value:function(e,t){return L.get(this.baseURL+"list/ALL",{params:e,module:t})}},{key:"save",value:function(e,t){return L.post(this.baseURL+"save",e,{module:t})}},{key:"delete",value:function(e,t){return L.delete("".concat(this.baseURL,"/delete/").concat(e),{module:t})}}]),e}();E.baseURL="user/";var q=a(22),P=a(8),U=a(311),Y=a(69),z=a(42),V=a(113),B=a(28),K=a.n(B),H=a(110),W=a(307),J=a(189),G=a(195),Z=a(111),Q=a(192),X=a(308),$=a(312),ee=a(196),te=["placeholder","options","value","sort","defaultValue"],ae=["format","getFormat","inputReadOnly","value","defaultValue","onChange","disablePastDate","disableUpcomingDate"];function ne(e){var t,a=e.placeholder,n=e.options,i=e.value,l=e.sort,c=e.defaultValue,s=Object(V.a)(e,te);if(!n.length>0&&(i=c),(i&&"object"!==typeof i||"boolean"===typeof i)&&(i+=""),"object"!==typeof n&&(n=[]),"undefined"===typeof(null===(t=n[0])||void 0===t?void 0:t.value)){var r=Object(z.a)(n);n=[],r.forEach((function(e){n.push({value:e.id||e._id,label:e.title||e.name})}))}return n.forEach((function(e){e.value+="",e.label+=""})),l&&n.sort((function(e,t){return(""+e.label).localeCompare(t.label)})),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(H.a,Object(P.a)({style:{width:"100%"},placeholder:a||"Select",options:n,value:null!==i&&"undefined"!==typeof i?i:void 0,filterOption:function(e,t){var a;return(null===t||void 0===t||null===(a=t.label)||void 0===a?void 0:a.toLowerCase().indexOf(e.toLowerCase()))>=0}},s))})}function ie(e){var t=e.format,a=e.getFormat,n=void 0===a?"YYYY-MM-DD":a,i=e.inputReadOnly,l=e.value,s=e.defaultValue,r=e.onChange,o=e.disablePastDate,d=void 0!==o&&o,u=e.disableUpcomingDate,j=void 0!==u&&u,b=Object(V.a)(e,ae),m={};return"undefined"!==typeof l&&(m.value=K()(new Date(l||new Date),t||"DD MMM YYYY")),"undefined"!==typeof s&&(m.defaultValue=s?K()(new Date(s)):null),"undefined"!==typeof r&&(m.onChange=function(e){r(e?K()(e).format(n):null)}),Object(c.useEffect)((function(){r(K()(l).format(n))}),[]),Object(p.jsx)(W.a,Object(P.a)(Object(P.a)(Object(P.a)({format:t||"DD MMM YYYY",inputReadOnly:i||!0,disabledDate:function(e){var t=K()().format("YYYY-MM-DD");return d?e&&e<K()(t,"YYYY-MM-DD"):j?e&&e>K()(t,"YYYY-MM-DD"):void 0}},m),b),{},{style:{width:"100%"}}))}function le(e){var t=e.col,a=void 0===t?3:t,n="object"===typeof e.value?"array":"string",i=Object(c.useState)(),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)([]),u=Object(d.a)(o,2),j=u[0],b=u[1],m=function(e){var t=1*typeof e.target.value!=="NaN"?e.target.value+"":1*e.target.value;e.target.checked?(s.push(t),r(Object(z.a)(s))):s.indexOf(t)>-1&&(s.splice(s.indexOf(t),1),r(Object(z.a)(s)))};return Object(c.useEffect)((function(){"string"===n?(s=e.value?e.value.split(",").map((function(e){return 1*e})):[],r(Object(z.a)(s))):r(Object(z.a)(e.value))}),[e.value]),Object(c.useEffect)((function(){var t=e.options.map((function(e,t){return e.value?{value:1*e.value,label:e.label}:e.id?{value:1*e.id,label:e.name||e.title||e.label}:e._id?{value:e._id+"",label:e.name||e.title||e.label}:null}));b(t)}),[e.options]),Object(c.useEffect)((function(){e.onChange(s)}),[(s||[]).join(",")]),Object(p.jsx)("div",{className:"row mingap",children:j.map((function(e,t){var n;return Object(p.jsx)("div",{className:"col-md-".concat(a," mb-2 form-group"),children:Object(p.jsx)("div",{className:"border p-1",children:Object(p.jsx)(Z.a,{value:1*typeof e.value!=="NaN"?e.value+"":1*e.value,checked:null===(n=s)||void 0===n?void 0:n.includes(1*typeof e.value!=="NaN"?e.value+"":1*e.value),onChange:m,className:"mx-0 mr15",children:e.label})})},t)}))})}function ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";e&&("success"===t&&Q.b.success(e),"error"===t&&Q.b.error(e),"warning"===t&&Q.b.warning(e))}function se(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}var re=Object(c.forwardRef)((function(e,t){var a,n=e.fileCount,s=t,r=e.files;(Object(c.useEffect)((function(){b(r)}),[r]),r.length)?r=null===(a=r)||void 0===a?void 0:a.map((function(e,t){return{uid:t,url:e.url,status:"done",name:e.name}})):r=[];var o=Object(c.useState)(r),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)(!1),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)(""),x=Object(d.a)(h,2),g=x[0],y=x[1],N=Object(c.useState)(""),k=Object(d.a)(N,2),C=k[0],w=k[1],S=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,se(t.originFileObj);case 3:t.preview=e.sent;case 4:O(!0),y(t.url||t.preview),w(t.name||t.url.substring(t.url.lastIndexOf("/")+1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=Object(p.jsxs)("div",{children:[Object(p.jsx)(ee.a,{}),Object(p.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(X.a,{listType:"picture-card",customRequest:function(e){var t=e.file,a=e.onSuccess;setTimeout((function(){var e;a("ok"),s.current.uploadingFiles||(s.current.uploadingFiles=[]),null===(e=s.current.uploadingFiles)||void 0===e||e.push(t)}),0)},fileList:j,onPreview:S,onChange:function(e){("removed"===e.file.status||e.file.status)&&function(e){var t=e.fileList;b(t)}(e)},beforeUpload:function(e){if(!e.type.includes("image/"))return Q.b.error("Invalid file type"),!1},onRemove:function(e){var t;(s.current.deletingFiles||(s.current.deletingFiles=[]),e.thumbUrl)?s.current.uploadingFiles=s.current.uploadingFiles.filter((function(t){return t.uid!==e.uid})):null===(t=s.current.deletingFiles)||void 0===t||t.push(e)},children:j.length>=n?null:A}),Object(p.jsx)($.a,{visible:v,title:C,footer:null,onCancel:function(){return O(!1)},children:Object(p.jsx)("img",{alt:"example",style:{width:"100%"},src:g})})]})})),oe=re;function de(e){var t=e.callback,a=Object(c.useState)(!1),n=Object(d.a)(a,2),i=n[0],l=n[1],s=Object(c.useState)({}),r=Object(d.a)(s,2),o=r[0],u=r[1],j=Object(c.useRef)([]);Object(c.useEffect)((function(){!function(e){l(!0),E.details(e).then((function(e){var t;u((null===(t=e.result)||void 0===t?void 0:t.data)||{})})).catch((function(e){ce(e.message,"error")})).finally((function(){l(!1)}))}()}),[]);var b=function(e,t){u(Object(P.a)(Object(P.a)({},o),{},Object(q.a)({},t,e)))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(g.a,{spinning:i,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:[Object(p.jsx)("div",{className:"d-flex",children:Object(p.jsxs)("div",{className:"row w-100",children:[Object(p.jsxs)("div",{className:"col-md-9",children:[Object(p.jsxs)("div",{className:"d-flex my-3",children:[Object(p.jsx)("span",{className:"w100 text-secondary text-bold",children:"Name :"}),Object(p.jsx)(U.a,{value:o.name||"",onChange:function(e){return b(e.target.value,"name")}})]}),Object(p.jsxs)("div",{className:"d-flex my-3",children:[Object(p.jsx)("span",{className:"w100 text-secondary text-bold",children:"username :"}),Object(p.jsx)(U.a,{value:o.username||"",onChange:function(e){return b(e.target.value,"username")}})]}),Object(p.jsxs)("div",{className:"d-flex my-3",children:[Object(p.jsx)("span",{className:"w100 text-secondary text-bold",children:"email :"}),Object(p.jsx)(U.a,{value:o.email||"",onChange:function(e){return b(e.target.value,"email")}})]})]}),Object(p.jsx)("div",{className:"col-md-3 my-3",children:Object(p.jsx)(oe,{ref:j,fileCount:1,files:o.image?[o.image]:[]})}),Object(p.jsxs)("div",{className:"row col-md-12",children:[Object(p.jsxs)("div",{className:"col-md-6 d-flex my-3 ",children:[Object(p.jsx)("span",{className:"w100 text-secondary text-bold",children:"Mobile :"}),Object(p.jsx)(U.a,{value:o.mobile||"",onChange:function(e){return b(e.target.value,"mobile")}})]}),Object(p.jsxs)("div",{className:"col-md-6 d-flex my-3",children:[Object(p.jsx)("span",{className:"w100 text-secondary text-bold",children:"Gender :"}),Object(p.jsx)(ne,{options:[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"}],value:o.gender,onChange:function(e){b(e,"gender")}})]}),Object(p.jsxs)("div",{className:"col-md-6 d-flex my-3",children:[Object(p.jsx)("span",{className:"w100 text-secondary text-bold",children:"DOB :"}),Object(p.jsx)(ie,{format:"MMMM D, YYYY",value:(o.dob||"")+"",onChange:function(e){b(e,"dob")}})]}),Object(p.jsxs)("div",{className:"col-md-12 d-flex my-3",children:[Object(p.jsx)("span",{className:"w100 text-secondary text-bold",children:"Address :"}),Object(p.jsx)(U.a.TextArea,{value:o.address||"",onChange:function(e){return b(e.target.value,"address")}})]})]})]})}),Object(p.jsx)("div",{className:"d-flex mt-2",children:Object(p.jsx)(N.a,{type:"primary",className:"ml-auto w100",onClick:function(){l(!0);for(var e=new FormData,a=0,n=Object.entries(o);a<n.length;a++){var i=Object(d.a)(n[a],2),c=i[0],s=i[1];e.append(c,s)}e.delete("image"),"undefined"!==typeof j.current.uploadingFiles&&e.append("image",j.current.uploadingFiles[0]),E.save(e).then((function(e){ce(e.message),t()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){l(!1)}))},disabled:i,children:"Save"})})]})})}function ue(e){var t=e.cond,a=e.children;return t?a:Object(p.jsx)(p.Fragment,{})}var je=Object(c.forwardRef)((function(e,t){var a=e.list,n=Object(c.useState)(!1),i=Object(d.a)(n,2),l=i[0],s=i[1];Object(c.useImperativeHandle)(t,(function(){return{openForm:function(){s(!0)},closeForm:function(){s(!1)}}}));var r=function(){s(!1)};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(C.a,{title:"Update Profile",placement:"right",width:700,onClose:r,visible:l,extra:Object(p.jsxs)(w.b,{children:[Object(p.jsx)(N.a,{onClick:r,children:"Cancel"}),Object(p.jsx)(N.a,{type:"primary",onClick:r,children:"OK"})]}),children:Object(p.jsx)(ue,{cond:l,children:Object(p.jsx)(de,{callback:a})})})})})),be=a(306),me=a(184);function fe(e){var t=e.sdata,a=e.handleSData,n=e.setSData,i=e.csvData;return Object(p.jsxs)(p.Fragment,{children:[t.total>0?Object(p.jsx)(J.a,{total:t.total,showTotal:function(){var e=(t.page-1)*t.limit*1+1,a=t.page*t.limit;return Object(p.jsx)(G.a,{color:"magenta",children:"Showing "+e+" - "+a+" out of "+t.total})},pageSize:t.limit,current:t.page,onChange:function(e,i){a(e,"page"),t.limit!==i&&n(Object(P.a)(Object(P.a)({},t),{},{page:1,limit:i}))},showSizeChanger:!0}):null,Array.isArray(i)&&(null===i||void 0===i?void 0:i.length)?Object(p.jsx)(N.a,{className:"mx-1",size:"small",type:"link",children:Object(p.jsx)(me.CSVLink,{data:i,children:"Export To CSV"})}):null]})}function ve(e){var t,a=e.columns,n=e.data,i=e.parentSData,l=e.loading,s=e.formRef,r=e.list,o=e.filters,u=e.searchPlaceholder,j=e.addNew,b=void 0===j||j,m=e.addNewIcon,f=void 0===m?ee.a:m,v=e.addNewText,O=void 0===v?"Add New":v,h=e.csvData,x=void 0===h?[]:h,g=Object(c.useState)(Object(P.a)({},i)),y=Object(d.a)(g,2),N=y[0],k=y[1],C=function(e,t){"key"===t&&(N.page=1),k(Object(P.a)(Object(P.a)({},N),{},Object(q.a)({},t,e)))};Object(c.useEffect)((function(){i.total&&C(i.total,"total")}),[i.total]),Object(c.useEffect)((function(){N.total&&r(N)}),[N.page,N.limit]),n=null===(t=n)||void 0===t?void 0:t.map((function(e,t){return Object(P.a)({index:t+1,key:t},e)})),a=[{title:"S/N",dataIndex:"index",width:45}].concat(Object(z.a)(a));var w={bordered:!0,loading:l,size:"small",title:function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(Oe,{sdata:N,handleSData:C,formRef:s,list:r,filters:o,searchPlaceholder:u,addNew:b,addNewIcon:f,addNewText:O})})},showHeader:!0,footer:function(){return Object(p.jsx)(fe,{sdata:N,handleSData:C,setSData:k,csvData:x})},scroll:void 0,hasData:!0,tableLayout:void 0,yScroll:"calc(100vh - 316px)"},S=w.xScroll,A=w.yScroll,T={};A&&(T.y=A),S&&(T.x=S);var M=a.map((function(e){return Object(P.a)({},e)}));return"fixed"===S&&(M[0].fixed=!0,M[M.length-1].fixed="right"),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(be.a,Object(P.a)(Object(P.a)({},w),{},{pagination:{position:["none"],pageSize:N.limit},columns:M,dataSource:w.hasData?n:null,scroll:T}))})}var Oe=function(e){var t=e.sdata,a=e.handleSData,n=e.formRef,i=e.list,l=e.filters,c=e.searchPlaceholder,r=e.addNew,o=e.addNewIcon,d=e.addNewText;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"d-flex",children:["undefined"!==typeof t.key?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(U.a,{className:"w200 mx-1",allowClear:!0,placeholder:c||"Search",value:t.key||"",onChange:function(e){a(e.target.value,"key")}}),"undefined"!==typeof l?l.map((function(e,n){return Object(p.jsx)(s.a.Fragment,{children:"dropdown"===e.type?Object(p.jsx)(ne,{style:e.style,placeholder:e.placeholder||"Select",className:null===e||void 0===e?void 0:e.className,allowClear:!0,options:e.options,value:(null===t||void 0===t?void 0:t[e.key])||void 0,onChange:function(t){a(t,e.key)}}):"dropdownMultiple"===e.type?Object(p.jsx)(ne,{mode:"multiple",style:e.style,placeholder:e.placeholder||"Select",className:null===e||void 0===e?void 0:e.className,allowClear:!0,options:e.options,value:(null===t||void 0===t?void 0:t[e.key])||void 0,onChange:function(t){a(t,e.key)}}):null},n)})):null,Object(p.jsx)(N.a,{type:"primary",onClick:function(){i(t)},children:"Search"})]}):null,r?Object(p.jsx)(N.a,{type:"primary",className:"ml-auto",children:Object(p.jsxs)("span",{className:"d-flex",onClick:function(){n.current.openForm()},children:[Object(p.jsx)(o,{className:"my-auto mx-1"}),d]})}):null]})})},he=a(305),xe=a(318),pe=a(99),ge=a(197),ye=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"list",value:function(e,t){return L.get(this.baseURL+"/list",{params:e,module:t})}},{key:"listAll",value:function(e){return L.get(this.baseURL+"/list/ALL",{module:e})}},{key:"listAllIgnoreStatus",value:function(e){return L.get(this.baseURL+"/all/ignore-status",{module:e})}},{key:"save",value:function(e,t){return L.post(this.baseURL+"/save",e,{module:t})}},{key:"delete",value:function(e,t){return L.delete("".concat(this.baseURL,"/delete/").concat(e),{module:t})}}]),e}();function Ne(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}ye.baseURL="customer";var ke=Object(c.forwardRef)((function(e,t){var a,n=e.fileCount,s=e.files;s.length?s=null===(a=s)||void 0===a?void 0:a.map((function(e,t){return{uid:t,url:e.url,status:"done",name:e.name}})):s=[];var r=t,o=Object(c.useState)(s),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)(!1),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)(""),x=Object(d.a)(h,2),g=x[0],y=x[1],N=Object(c.useState)(""),k=Object(d.a)(N,2),C=k[0],w=k[1],S=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,Ne(t.originFileObj);case 3:t.preview=e.sent;case 4:O(!0),y(t.url||t.preview),w(t.name||t.url.substring(t.url.lastIndexOf("/")+1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=Object(p.jsxs)("div",{children:[Object(p.jsx)(ee.a,{}),Object(p.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(X.a,{listType:"picture-card",customRequest:function(e){var t=e.file,a=e.onSuccess;setTimeout(Object(l.a)(i.a.mark((function e(){var n,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a("ok"),r.current.uploadingFiles||(r.current.uploadingFiles=[]),e.next=4,Ne(t);case 4:l=e.sent,null===(n=r.current.uploadingFiles)||void 0===n||n.push({uid:t.uid,base64:l});case 6:case"end":return e.stop()}}),e)}))),0)},fileList:j,onPreview:S,onChange:function(e){("removed"===e.file.status||e.file.status)&&function(e){var t=e.fileList;b(t)}(e)},multiple:n>1,onRemove:function(e){var t,a;(r.current.deletingFiles||(r.current.deletingFiles=[]),e.thumbUrl)?r.current.uploadingFiles=null===(t=r.current.uploadingFiles)||void 0===t?void 0:t.filter((function(t){return t.uid!==e.uid})):null===(a=r.current.deletingFiles)||void 0===a||a.push(e.name)},beforeUpload:function(e){if(!e.type.includes("image/"))return Q.b.error("Invalid file type"),!1},children:j.length>=n?null:A}),Object(p.jsx)($.a,{visible:v,title:C,footer:null,onCancel:function(){return O(!1)},children:Object(p.jsx)("img",{alt:"example",style:{width:"100%"},src:g})})]})})),Ce=ke,we=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"listSdt",value:function(e){return L.get(this.baseURL+"sdt",{module:e})}},{key:"listState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"viewState";return L.get(this.baseURL+"state/list",{params:e,module:t})}},{key:"listAllState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"viewState";return L.get(this.baseURL+"state/list/ALL",{params:e,module:t})}},{key:"saveState",value:function(e,t){return L.post(this.baseURL+"state/save",e,{module:t})}},{key:"deleteState",value:function(e,t){return L.delete("".concat(this.baseURL,"/state/delete/").concat(e),{module:t})}},{key:"listDistrict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"viewDistrict";return L.get(this.baseURL+"district/list",{params:e,module:t})}},{key:"listAllDistrict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"viewDistrict";return L.get(this.baseURL+"district/list/ALL",{params:e,module:t})}},{key:"saveDistrict",value:function(e,t){return L.post(this.baseURL+"district/save",e,{module:t})}},{key:"deleteDistrict",value:function(e,t){return L.delete("".concat(this.baseURL,"/district/delete/").concat(e),{module:t})}},{key:"listTaluk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"viewTaluk";return L.get(this.baseURL+"taluk/list",{params:e,module:t})}},{key:"listAllTaluk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"viewTaluk";return L.get(this.baseURL+"taluk/list/ALL",{params:e,module:t})}},{key:"saveTaluk",value:function(e,t){return L.post(this.baseURL+"taluk/save",e,{module:t})}},{key:"deleteTaluk",value:function(e,t){return L.delete("".concat(this.baseURL,"/taluk/delete/").concat(e),{module:t})}}]),e}();we.baseURL="sdt/";var Se={view:F.getModules("viewCustomer"),add:F.getModules("addCustomer"),edit:F.getModules("editCustomer"),delete:F.getModules("deleteCustomer")},Ae=Se.view,Te=Se.add,Me=Se.edit,De=Se.delete;var Fe=Object(c.forwardRef)((function(e,t){var a=e.list,n=e.sdt,i=Object(c.useState)(!1),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!1),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)({}),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)([]),x=Object(d.a)(h,2),y=x[0],N=x[1],k=Object(c.useState)([]),C=Object(d.a)(k,2),w=C[0],S=C[1],A=Object(c.useState)(!1),T=Object(d.a)(A,2),M=T[0],D=T[1],I=Object(c.useRef)(),R=function(e){b(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){I.current={},O(e?Object(P.a)({},e):{isActive:!0}),R(!0),!(null===e||void 0===e?void 0:e._id)&&Te||(null===e||void 0===e?void 0:e._id)&&Me?D(!0):D(!1)}}}));var _=function(e,t){O(Object(P.a)(Object(P.a)({},v),{},Object(q.a)({},t,e)))},L=function(){var e,t,n;r(!0),v.photo=null===I||void 0===I||null===(e=I.current)||void 0===e||null===(t=e.uploadingFiles)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.base64,ye.save(v,v._id?Me:Te).then((function(e){ce(e.message),R(!1),a()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){r(!1)}))};return Object(c.useEffect)((function(){var e,t=(null===(e=n.find((function(e){return e._id===v.state})))||void 0===e?void 0:e.districts)||[];N((null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name,taluks:e.taluks}})))||[])}),[v.state]),Object(c.useEffect)((function(){var e,t=(null===y||void 0===y||null===(e=y.find((function(e){return e.value===v.district})))||void 0===e?void 0:e.taluks)||[];S(null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name}})))}),[v.district,y]),Object(c.useEffect)((function(){(function(){var e,t;return null===n||void 0===n||null===(e=n.find((function(e){return e._id===v.state})))||void 0===e||null===(t=e.districts.map((function(e){return e._id})))||void 0===t?void 0:t.includes(v.district)})()||_("","district")}),[v.state]),Object(c.useEffect)((function(){(function(){var e,t,a,i;return null===n||void 0===n||null===(e=n.find((function(e){return e._id===v.state})))||void 0===e||null===(t=e.districts.find((function(e){return e._id===v.district})))||void 0===t||null===(a=t.taluks)||void 0===a||null===(i=a.map((function(e){return e._id})))||void 0===i?void 0:i.includes(v.taluk)})()||_("","taluk")}),[v.district,y]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(v._id?"Edit":"Add")+" Customer",style:{top:20},visible:j,okText:"Save",onOk:L,okButtonProps:{disabled:s||!M,style:{display:M?"inline-block":"none"}},onCancel:function(){R(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:s,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),L()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!M,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"First Name"}),Object(p.jsx)(U.a,{value:v.firstName||"",onChange:function(e){return _(e.target.value,"firstName")}})]}),Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Last Name"}),Object(p.jsx)(U.a,{value:v.lastName||"",onChange:function(e){return _(e.target.value,"lastName")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Email"}),Object(p.jsx)(U.a,{value:v.email||"",onChange:function(e){return _(e.target.value,"email")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Phone No."}),Object(p.jsx)(U.a,{value:v.phoneNo||"",onChange:function(e){return _(F.handleInteger(e.target.value),"phoneNo")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsxs)("label",{className:v._id?"":"req",children:[v._id?"Update":"Set"," Password"]}),Object(p.jsx)(U.a,{value:v.password||"",onChange:function(e){return _(e.target.value,"password")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"DOB"}),Object(p.jsx)(ie,{format:"MMMM D, YYYY",value:v.dob||new Date,onChange:function(e){_(e,"dob")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"State"}),Object(p.jsx)(ne,{options:n.map((function(e){return{value:e._id,label:e.name}})),value:v.state,onChange:function(e){_(e,"state")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"District"}),Object(p.jsx)(ne,{options:y||[],value:v.district,onChange:function(e){_(e,"district")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Taluk"}),Object(p.jsx)(ne,{options:w||[],value:v.taluk,onChange:function(e){_(e,"taluk")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Zip Code"}),Object(p.jsx)(U.a,{value:v.zipcode||"",onChange:function(e){_(F.handleInteger(e.target.value,6),"zipcode")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Address"}),Object(p.jsx)(U.a.TextArea,{value:v.address||"",onChange:function(e){_(e.target.value,"address")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Image"}),Object(p.jsx)(Ce,{ref:I,fileCount:1,files:v.image?[v.image]:[]})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ne,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:v.isActive,onChange:function(e){_(e,"isActive")}})]})]})})})})})})})),Ie=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"listModules",value:function(e,t){return L.get(this.baseURL+"/list-modules",{params:e,module:t})}},{key:"listModulesAll",value:function(e,t){return L.get(this.baseURL+"/list-modules/ALL",{params:e,module:t})}},{key:"saveModule",value:function(e,t){return L.post(this.baseURL+"/save-module",e,{module:t})}},{key:"deleteModule",value:function(e,t){return L.delete("".concat(this.baseURL,"/delete-module/").concat(e),{module:t})}},{key:"listAdminModules",value:function(e,t){return L.get(this.baseURL+"/admin-modules",{params:e,module:t})}},{key:"saveAdminModules",value:function(e,t){return L.post(this.baseURL+"/save-admin-modules",e,{module:t})}}]),e}();Ie.baseURL="adm";var Re=Object(c.forwardRef)((function(e,t){var a=e.list,n=e.modules,i=Object(c.useState)(!1),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!1),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)({}),f=Object(d.a)(m,2),v=f[0],O=f[1],h=function(e){b(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){O(Object(P.a)({},e)),h(!0)}}}));var x=function(e,t){O(Object(P.a)(Object(P.a)({},v),{},Object(q.a)({},t,e)))},y=function(){r(!0),Ie.saveAdminModules(v).then((function(e){ce(e.message),h(!1),a()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){r(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:"Add / Remove Modules",style:{top:20},visible:j,okText:"Save",onOk:y,okButtonProps:{disabled:s},onCancel:function(){h(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:s,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),y()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{children:Object(p.jsx)("div",{className:"row mingap",children:Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"col-md-12 form-group",children:Object(p.jsxs)("div",{className:"d-flex mb-2",children:[Object(p.jsx)(N.a,{size:"small",danger:!0,className:"ml-auto mx-2",onClick:function(){x([],"grantedModules")},children:" Uncheck All Modules"}),Object(p.jsx)(N.a,{size:"small",type:"primary",onClick:function(){x(null===n||void 0===n?void 0:n.map((function(e){return null===e||void 0===e?void 0:e._id})),"grantedModules")},children:" Check All Modules"})]})}),Object(p.jsx)("div",{className:"col-md-12 form-group",children:Object(p.jsx)(le,{options:null===n||void 0===n?void 0:n.map((function(e){return{_id:e.key,label:e.title}})),value:v.grantedModules,onChange:function(e){!(null===e||void 0===e?void 0:e.length)||x(e,"grantedModules")}})})]})})})})})})})})),_e={userType:""};function Le(e){var t=e.data,a=e.handleChange,n=e.key,i=void 0===n?"type":n,l=Object(c.useState)(Object(P.a)({},t)),s=Object(d.a)(l,2),r=s[0],o=s[1],u="superAdmin"===_e.userType?[{value:"stateAdmin",label:"State Admin"},{value:"districtAdmin",label:"District Admin"},{value:"talukAdmin",label:"Taluk Admin"}]:"stateAdmin"===_e.userType?[{value:"districtAdmin",label:"District Admin"},{value:"talukAdmin",label:"Taluk Admin"}]:"talukAdmin"===_e.userType?[{value:"talukAdmin",label:"Taluk Admin"}]:[];return Object(c.useEffect)((function(){o(Object(P.a)({},t))}),[t[i]]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(ne,{options:u,value:r[i],onChange:function(e){a(e,i)}})})}var Ee={view:F.getModules("viewUser"),add:F.getModules("addUser"),edit:F.getModules("editUser"),delete:F.getModules("deleteUser")},qe=Ee.view,Pe=Ee.add,Ue=Ee.edit,Ye=Ee.delete;var ze=Object(c.forwardRef)((function(e,t){var a=e.list,n=e.sdt,i=Object(c.useState)(!1),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!1),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)({}),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)([]),x=Object(d.a)(h,2),y=x[0],N=x[1],C=Object(c.useState)([]),w=Object(d.a)(C,2),S=w[0],A=w[1],T=Object(c.useState)(!1),M=Object(d.a)(T,2),D=M[0],I=M[1],R=Object(c.useRef)(),_=Object(c.useRef)(),L=Object(c.useRef)(),z=function(e){b(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){R.current={},_.current={},L.current={},O(e?Object(P.a)({},e):{isActive:!0}),z(!0),!(null===e||void 0===e?void 0:e._id)&&Pe||e._id&&Ue?I(!0):I(!1)}}}));var V=function(e,t){O(Object(P.a)(Object(P.a)({},v),{},Object(q.a)({},t,e)))},B=function(){var e,t,n,i,l,c,s,o,d;r(!0),v.photo=null===R||void 0===R||null===(e=R.current)||void 0===e||null===(t=e.uploadingFiles)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.base64,v.adharCardPhoto=null===_||void 0===_||null===(i=_.current)||void 0===i||null===(l=i.uploadingFiles)||void 0===l||null===(c=l[0])||void 0===c?void 0:c.base64,v.panCardPhoto=null===L||void 0===L||null===(s=L.current)||void 0===s||null===(o=s.uploadingFiles)||void 0===o||null===(d=o[0])||void 0===d?void 0:d.base64,E.save(v,v._id?Ue:Pe).then((function(e){ce(e.message),z(!1),a()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){r(!1)}))};return Object(c.useEffect)((function(){var e,t=(null===(e=n.find((function(e){return e._id===v.state})))||void 0===e?void 0:e.districts)||[];N((null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name,taluks:e.taluks}})))||[])}),[v.state]),Object(c.useEffect)((function(){var e,t=(null===y||void 0===y||null===(e=y.find((function(e){return e.value===v.district})))||void 0===e?void 0:e.taluks)||[];A(null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name}})))}),[v.district,y]),Object(c.useEffect)((function(){(function(){var e,t;return null===n||void 0===n||null===(e=n.find((function(e){return e._id===v.state})))||void 0===e||null===(t=e.districts.map((function(e){return e._id})))||void 0===t?void 0:t.includes(v.district)})()||V("","district")}),[v.state]),Object(c.useEffect)((function(){(function(){var e,t,a,i;return null===n||void 0===n||null===(e=n.find((function(e){return e._id===v.state})))||void 0===e||null===(t=e.districts.find((function(e){return e._id===v.district})))||void 0===t||null===(a=t.taluks)||void 0===a||null===(i=a.map((function(e){return e._id})))||void 0===i?void 0:i.includes(v.taluk)})()||V("","taluk")}),[v.district,y]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(v._id?"Edit":"Add")+" User",style:{top:20},visible:j,okText:"Save",onOk:B,okButtonProps:{disabled:s||!D,style:{display:D?"inline-block":"none"}},onCancel:function(){z(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:s,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),B()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!D,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Type"}),Object(p.jsx)(Le,{data:v,handleChange:V})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"First Name"}),Object(p.jsx)(U.a,{value:v.firstName||"",onChange:function(e){return V(e.target.value,"firstName")}})]}),Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Last Name"}),Object(p.jsx)(U.a,{value:v.lastName||"",onChange:function(e){return V(e.target.value,"lastName")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Email"}),Object(p.jsx)(U.a,{value:v.email||"",onChange:function(e){return V(e.target.value,"email")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Phone No."}),Object(p.jsx)(U.a,{value:v.phoneNo||"",onChange:function(e){return V(F.handleInteger(e.target.value),"phoneNo")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsxs)("label",{className:v._id?"":"req",children:[v._id?"Update":"Set"," Password"]}),Object(p.jsx)(U.a,{value:v.password||"",onChange:function(e){return V(e.target.value,"password")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"DOB"}),Object(p.jsx)(ie,{format:"MMMM D, YYYY",value:v.dob||new Date,onChange:function(e){V(e,"dob")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"State"}),Object(p.jsx)(ne,{options:n.map((function(e){return{value:e._id,label:e.name}})),value:v.state,onChange:function(e){V(e,"state")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"District"}),Object(p.jsx)(ne,{options:y||[],value:v.district,onChange:function(e){V(e,"district")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Taluk"}),Object(p.jsx)(ne,{options:S||[],value:v.taluk,onChange:function(e){V(e,"taluk")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Zip Code"}),Object(p.jsx)(U.a,{value:v.zipcode||"",onChange:function(e){V(F.handleInteger(e.target.value,6),"zipcode")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Address"}),Object(p.jsx)(U.a.TextArea,{value:v.address||"",onChange:function(e){V(e.target.value,"address")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Image"}),Object(p.jsx)(Ce,{ref:R,fileCount:1,files:v.image?[v.image]:[]})]}),Object(p.jsx)("div",{}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Document Details "})}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Adhar Number"}),Object(p.jsx)(U.a,{value:v.adharNo||"",onChange:function(e){return V(e.target.value,"adharNo")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Adhar Card photo"}),Object(p.jsx)(Ce,{ref:_,fileCount:1,files:v.adharCardImage?[v.adharCardImage]:[]})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Pan No."}),Object(p.jsx)(U.a,{value:v.panNo||"",onChange:function(e){return V(e.target.value,"panNo")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Pan Card photo"}),Object(p.jsx)(Ce,{ref:L,fileCount:1,files:v.panCardImage?[v.panCardImage]:[]})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ne,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:v.isActive,onChange:function(e){V(e,"isActive")}})]})]})})})})})})})),Ve=a(37),Be=a(310);function Ke(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)(!0),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useRef)(),u=Object(c.useState)({key:"",page:1,limit:20,total:0}),j=Object(d.a)(u,2),b=j[0],m=j[1],f=[{title:"Title",dataIndex:"title"},{title:"Key",dataIndex:"key",width:200},{title:"Action",width:90,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){o.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}),Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{title:"Are you sure to delete this module?",onConfirm:function(){return O(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(ge.a,{})})})})]})}}].filter((function(e){return!e.hidden})),v=function(e){"undefined"===typeof e&&(e=b),r(!0),Ie.listModules(e).then((function(t){var a,i,l=e;l.total=(null===(a=t.result)||void 0===a?void 0:a.total)||0,m(Object(P.a)({},l)),n((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){r(!1)}))},O=function(e){Ie.deleteModule(e).then((function(e){ce(e.message),v()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){v()}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Module List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(ve,{data:a,columns:f,parentSData:b,loading:s,formRef:o,list:v,searchPlaceholder:"Name or Key"})}),Object(p.jsx)(He,{ref:o,list:v})]})}var He=Object(c.forwardRef)((function(e,t){var a=e.list,n=Object(c.useState)(!1),i=Object(d.a)(n,2),l=i[0],s=i[1],r=Object(c.useState)(!1),o=Object(d.a)(r,2),u=o[0],j=o[1],b=Object(c.useState)({}),m=Object(d.a)(b,2),f=m[0],v=m[1],O=Object(c.useRef)(),h=function(e){j(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){O.current={},v(e?Object(P.a)({},e):{isActive:!0}),h(!0)}}}));var x=function(e,t){v(Object(P.a)(Object(P.a)({},f),{},Object(q.a)({},t,e)))},y=function(){var e,t,n;s(!0),f.photo=null===O||void 0===O||null===(e=O.current)||void 0===e||null===(t=e.uploadingFiles)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.base64,Ie.saveModule(f).then((function(e){ce(e.message),h(!1),a()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){s(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(f._id?"Edit":"Add")+" Module",style:{top:20},visible:u,okText:"Save",onOk:y,okButtonProps:{disabled:l},onCancel:function(){h(!1)},destroyOnClose:!0,maskClosable:!1,width:400,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:l,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),y()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Title"}),Object(p.jsx)(U.a,{value:f.title||"",onChange:function(e){return x(e.target.value,"title")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Key"}),Object(p.jsx)(U.a,{value:f.key||"",onChange:function(e){return x(e.target.value,"key")}})]})]})})})})})})})),We=[{component:Ke,name:"Module",key:"module"}];var Je=Object(c.forwardRef)((function(){var e,t,a=Be.a.TabPane,n=Object(Ve.f)(),i=Object(c.useState)((null===(e=F.queryStringToJSON(null===(t=n.location)||void 0===t?void 0:t.search))||void 0===e?void 0:e.tab)||We[0].key),l=Object(d.a)(i,2),s=l[0],r=l[1];return Object(c.useEffect)((function(){n.push({search:"?tab=".concat(s)}),document.querySelector(".ant-tabs-content-holder").scrollTop=0}),[s]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(Be.a,{activeKey:s,className:"border overflow-y-auto",type:"card",size:"small",onChange:function(e){r(e)},children:We.map((function(e){return Object(p.jsx)(a,{tab:e.name,children:s===e.key?Object(p.jsx)(e.component,{}):null},e.key)}))})})})),Ge=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"listColor",value:function(e,t){return L.get(this.baseURL+"color/list",{params:e,module:t})}},{key:"listAllColor",value:function(e,t){return L.get(this.baseURL+"color/list/ALL",{params:e,module:t})}},{key:"saveColor",value:function(e,t){return L.post(this.baseURL+"color/save",e,{module:t})}},{key:"deleteColor",value:function(e,t){return L.delete("".concat(this.baseURL,"color/delete/").concat(e),{module:t})}},{key:"listMake",value:function(e,t){return L.get(this.baseURL+"make/list",{params:e,module:t})}},{key:"listAllMake",value:function(e,t){return L.get(this.baseURL+"make/list/ALL",{params:e,module:t})}},{key:"saveMake",value:function(e,t){return L.post(this.baseURL+"make/save",e,{module:t})}},{key:"deleteMake",value:function(e,t){return L.delete("".concat(this.baseURL,"make/delete/").concat(e),{module:t})}},{key:"listMakeModel",value:function(e,t){return L.get(this.baseURL+"make-model/list",{params:e,module:t})}},{key:"listAllMakeModel",value:function(e,t){return L.get(this.baseURL+"make-model/list/ALL",{params:e,module:t})}},{key:"saveMakeModel",value:function(e,t){return L.post(this.baseURL+"make-model/save",e,{module:t})}},{key:"deleteMakeModel",value:function(e,t){return L.delete("".concat(this.baseURL,"make-model/delete/").concat(e),{module:t})}},{key:"listCategory",value:function(e,t){return L.get(this.baseURL+"category/list",{params:e,module:t})}},{key:"listAllCategory",value:function(e,t){return L.get(this.baseURL+"category/list/ALL",{params:e,module:t})}},{key:"saveCategory",value:function(e,t){return L.post(this.baseURL+"category/save",e,{module:t})}},{key:"deleteCategory",value:function(e,t){return L.delete("".concat(this.baseURL,"category/delete/").concat(e),{module:t})}},{key:"list",value:function(e,t){return L.get(this.baseURL+"list",{params:e,module:t})}},{key:"listAll",value:function(e,t){return L.get(this.baseURL+"list/ALL",{params:e,module:t})}},{key:"save",value:function(e,t){return L.post(this.baseURL+"save",e,{module:t})}},{key:"delete",value:function(e,t){return L.delete("".concat(this.baseURL,"delete/").concat(e),{module:t})}}]),e}();Ge.baseURL="vehicle/";var Ze=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"listServiceType",value:function(){return L.get(this.baseURL+"/list-service-type",{module:"ignoreModule"})}}]),e}();Ze.baseURL="common";var Qe={view:F.getModules("viewVehicleCategory"),add:F.getModules("addVehicleCategory"),edit:F.getModules("editVehicleCategory"),delete:F.getModules("deleteVehicleCategory")},Xe=Qe.view,$e=Qe.add,et=Qe.edit,tt=Qe.delete;var at=Object(c.forwardRef)((function(e,t){var a=e.list,n=e.serviceTypes,i=Object(c.useState)(!1),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!1),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)({}),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)(!1),x=Object(d.a)(h,2),y=x[0],N=x[1],k=Object(c.useRef)(),C=function(e){b(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){k.current={},O(e?Object(P.a)({},e):{isActive:!0}),C(!0),!(null===e||void 0===e?void 0:e._id)&&$e||e._id&&et?N(!0):N(!1)}}}));var w=function(e,t){O(Object(P.a)(Object(P.a)({},v),{},Object(q.a)({},t,e)))};Object(c.useEffect)((function(){w(F.removeSpecialChars(v.name||""),"slug")}),[v.name]);var S=function(){var e,t,n;r(!0),v.photo=null===k||void 0===k||null===(e=k.current)||void 0===e||null===(t=e.uploadingFiles)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.base64,Ge.saveCategory(v,v._id?et:$e).then((function(e){ce(e.message),C(!1),a()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){r(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(v._id?"Edit":"Add")+" Vehicle Category",style:{top:20},visible:j,okText:"Save",onOk:S,okButtonProps:{disabled:s||!y,style:{display:y?"inline-block":"none"}},onCancel:function(){C(!1)},destroyOnClose:!0,maskClosable:!1,width:400,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:s,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),S()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!y,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Service Type"}),Object(p.jsx)(ne,{options:n,value:v.serviceType,onChange:function(e){w(e,"serviceType")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Name"}),Object(p.jsx)(U.a,{value:v.name||"",onChange:function(e){return w(e.target.value,"name")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Slug"}),Object(p.jsx)(U.a,{value:v.slug||"",onChange:function(e){return w(F.removeSpecialChars(e.target.value),"slug")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Image"}),Object(p.jsx)(Ce,{ref:k,fileCount:1,files:v.image?[v.image]:[]})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ne,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:v.isActive,onChange:function(e){w(e,"isActive")}})]})]})})})})})})})),nt=a(322),it=a(143),lt=a(145),ct=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"listRideType",value:function(e,t){return L.get(this.baseURL+"type/list",{params:e,module:t})}},{key:"listAllRideType",value:function(e,t){return L.get(this.baseURL+"type/list/ALL",{params:e,module:t})}},{key:"saveRideType",value:function(e,t){return L.post(this.baseURL+"type/save",e,{module:t})}}]),e}();ct.baseURL="ride/";var st=a(313),rt=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"list",value:function(e,t){return L.get(this.baseURL+"list",{params:e,module:t})}},{key:"listAll",value:function(e,t){return L.get(this.baseURL+"list/ALL",{params:e,module:t})}},{key:"save",value:function(e,t){return L.post(this.baseURL+"save",e,{module:t})}},{key:"delete",value:function(e,t){return L.delete("".concat(this.baseURL,"/delete/").concat(e),{module:t})}},{key:"listWalletHistory",value:function(e,t){return L.get(this.baseURL+"list/wallet-history",{params:e,module:t})}},{key:"listAllWalletHistory",value:function(e,t){return L.get(this.baseURL+"list/wallet-history/ALL",{params:e,module:t})}},{key:"saveWalletHistory",value:function(e,t){return L.post(this.baseURL+"save/wallet-history",e,{module:t})}},{key:"listLogins",value:function(e,t){return L.get(this.baseURL+"logins/list",{params:e,module:t})}},{key:"listLoginsAll",value:function(e,t){return L.get(this.baseURL+"logins/list/ALL",{params:e,module:t})}},{key:"listOnOff",value:function(e,t){return L.get(this.baseURL+"on-off/list",{params:e,module:t})}},{key:"listOnOffAll",value:function(e,t){return L.get(this.baseURL+"on-off/list/ALL",{params:e,module:t})}}]),e}();rt.baseURL="driver/";var ot=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"listTeplates",value:function(e,t){return L.get(this.baseURL+"/template/list",{params:e,module:t})}},{key:"listAllTeplates",value:function(e){return L.get(this.baseURL+"/template/list/ALL",{module:e})}},{key:"saveTeplate",value:function(e,t){return L.post(this.baseURL+"/template/save",e,{module:t})}},{key:"deleteTeplates",value:function(e,t){return L.delete("".concat(this.baseURL,"/template/delete/").concat(e),{module:t})}},{key:"list",value:function(e,t){return L.get(this.baseURL+"/list",{params:e,module:t})}},{key:"listAll",value:function(e){return L.get(this.baseURL+"/list/ALL",{module:e})}},{key:"save",value:function(e,t){return L.post(this.baseURL+"/save",e,{module:t})}},{key:"delete",value:function(e,t){return L.delete("".concat(this.baseURL,"/delete/").concat(e),{module:t})}}]),e}();ot.baseURL="email";var dt={view:F.getModules("viewWallet"),add:F.getModules("addWallet")},ut=dt.view,jt=dt.add;function bt(e){var t=e.driverId,a=Object(c.useState)([]),n=Object(d.a)(a,2),i=n[0],l=n[1],s=Object(c.useState)(!0),r=Object(d.a)(s,2),o=r[0],u=r[1],j=Object(c.useRef)(),b=Object(c.useState)({key:"",page:1,limit:20,total:0,driverId:t}),m=Object(d.a)(b,2),f=m[0],v=m[1],O=[{title:"Transaction Id",dataIndex:"transactionId",width:150},{title:"Transaction Method",dataIndex:"transactionMethod",width:150,render:function(e){return"byAdmin"===e?Object(p.jsx)(G.a,{color:"magenta",children:"By Admin"}):"paytm"===e?Object(p.jsx)(G.a,{color:"yellow",children:"Paytm"}):Object(p.jsx)(G.a,{color:"",children:e})}},{title:"Transaction Type",dataIndex:"transactionType",width:150,render:function(e){return"credit"===e?Object(p.jsx)(G.a,{color:"green",children:"Credit"}):"debit"===e?Object(p.jsx)(G.a,{color:"red",children:"Debit"}):void 0}},{title:"Amount",dataIndex:"amount",width:150},{title:"Description",dataIndex:"description"},{title:"Status",dataIndex:"status",width:80,render:function(e){return"completed"===e?Object(p.jsx)(G.a,{color:"green",children:"completed"}):"pending"===e?Object(p.jsx)(G.a,{color:"yellow",children:"Pending"}):"failed"===e?Object(p.jsx)(G.a,{color:"red",children:"Failed"}):void 0}},{width:10}].filter((function(e){return!e.hidden})),h=function(e){"undefined"===typeof e&&(e=f),u(!0),rt.listWalletHistory(e,ut).then((function(t){var a,n,i=e;i.total=(null===(a=t.result)||void 0===a?void 0:a.total)||0,v(Object(P.a)({},i)),l((null===(n=t.result)||void 0===n?void 0:n.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){u(!1)}))};return Object(c.useEffect)((function(){h()}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(ve,{data:i,columns:O,filters:[{type:"dropdown",key:"transactionMethod",placeholder:"Transction Method",className:"w200 mx-1",options:[{_id:"byAdmin",title:"By Admin"},{_id:"paytm",title:"Paytm"}]},{type:"dropdown",key:"transactionType",placeholder:"Transction Type",className:"w200 mx-1",options:[{_id:"debit",title:"Debit"},{_id:"credit",title:"Credit"}]},{type:"dropdown",key:"status",placeholder:"Status",className:"w200 mx-1",options:[{_id:"pending",title:"Pending"},{_id:"failed",title:"Failed"},{_id:"completed",title:"Completed"}]}],parentSData:f,loading:o,formRef:j,list:h,searchPlaceholder:"Transaction Id",addNew:jt})}),Object(p.jsx)(mt,{ref:j,list:h,driverId:t})]})}var mt=Object(c.forwardRef)((function(e,t){var a=e.list,n=e.driverId,i=Object(c.useState)(!1),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!1),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)({}),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)(!1),x=Object(d.a)(h,2),y=x[0],N=x[1],k=function(e){b(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){O({driverId:n}),k(!0),jt&&N(!0)}}}));var C=function(e,t){O(Object(P.a)(Object(P.a)({},v),{},Object(q.a)({},t,e)))},w=function(){r(!0),rt.saveWalletHistory(v,jt).then((function(e){ce(e.message),k(!1),a()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){r(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:"Add Wallet History",style:{top:20},visible:j,okText:"Save",onOk:w,okButtonProps:{disabled:s||!y,style:{display:y?"inline-block":"none"}},onCancel:function(){k(!1)},destroyOnClose:!0,maskClosable:!1,width:400,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:s,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),w()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!y,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Transaction Type"}),Object(p.jsx)(ne,{options:[{_id:"debit",name:"Debit"},{_id:"credit",name:"Credit"}],value:null===v||void 0===v?void 0:v.transactionType,onChange:function(e){C(e,"transactionType")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Amount"}),Object(p.jsx)(U.a,{value:v.amount||"",onChange:function(e){return C(F.handleInteger(e.target.value),"amount")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"",children:"Description"}),Object(p.jsx)(U.a.TextArea,{value:v.description||"",onChange:function(e){return C(e.target.value,"description")}})]})]})})})})})})})),ft=a(59),vt=a(320),Ot=a(321),ht=a(191);function xt(e){var t=e.height,a=void 0===t?400:t,n=e.menubar,i=void 0!==n&&n,l=e.plugins,s=e.toolbar,r=e.content_style,o=e.initialValue,d=e.onChange;l||(l=["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount forecolor backcolor textcolor"]),s||(s="undo redo | insert | styleselect | bold italic | fontselect fontsizeselect | alignleft aligncenter alignright alignjustify | forecolor backcolor emoticons | bullist numlist outdent indent | link unlink | image responsivefilemanager table | removeformat code help | fullscreen"),r||(r="body { font-family:Helvetica,Arial,sans-serif; font-size:14px }");var u=Object(c.useRef)(null);return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(ht.a,{onInit:function(e,t){return u.current=t},initialValue:o,init:{height:a,menubar:i,plugins:l,toolbar:s,content_style:r,file_browser_callback_types:"image",file_picker_callback:function(e,t,a){var n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("accept","image/*"),n.onchange=function(){var t=this.files[0],a=new FileReader;a.readAsDataURL(t),a.onload=function(){e(a.result,{title:t.name})}},n.click()},deprecation_warnings:!1},onSelectionChange:function(){u.current&&d(u.current.getContent())}})})}var pt={view:F.getModules("viewSentEmail"),add:F.getModules("sendEmail")},gt=pt.view,yt=pt.add;var Nt=Object(c.forwardRef)((function(e,t){var a=e.list,n=e.templates,i=void 0===n?[]:n,l=e.sdt,s=void 0===l?[]:l,r=e.customers,o=void 0===r?[]:r,u=e.drivers,j=void 0===u?[]:u,b=e.admins,m=void 0===b?[]:b,f=e.serviceTypes,v=void 0===f?[]:f,O=Object(c.useState)(!1),h=Object(d.a)(O,2),x=h[0],y=h[1],k=Object(c.useState)(!1),C=Object(d.a)(k,2),w=C[0],S=C[1],A=Object(c.useState)({}),T=Object(d.a)(A,2),M=T[0],D=T[1],F=Object(c.useState)(!1),I=Object(d.a)(F,2),R=I[0],_=I[1],L=Object(c.useState)([]),E=Object(d.a)(L,2),z=E[0],V=E[1],B=Object(c.useState)([]),K=Object(d.a)(B,2),H=K[0],W=K[1],J=Object(c.useState)("multiple"),G=Object(d.a)(J,2),Z=G[0],Q=G[1],X=Object(c.useState)([]),ee=Object(d.a)(X,2),te=ee[0],ae=ee[1],ie=Object(c.useState)([]),le=Object(d.a)(ie,2),se=le[0],re=le[1],oe=Object(c.useState)(!1),de=Object(d.a)(oe,2),ue=de[0],je=de[1],be=function(e){S(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){var t,a;(null===(t=e)||void 0===t?void 0:t.outerData)&&(je(!0),e=e.outerData),D(e?Object(P.a)({},e):{deletable:!0}),be(!0),!(null===(a=e)||void 0===a?void 0:a._id)&&yt||e._id?_(!0):_(!1)}}}));var me=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];R&&(a?D(Object(P.a)(Object(P.a)({},M),{},Object(q.a)({},t,e))):M=Object(P.a)(Object(P.a)({},M),{},Object(q.a)({},t,e)))},fe=function(){y(!0),ue&&delete M._id,ot.save(M,yt).then((function(e){ce(e.message),be(!1),a()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){y(!1)}))};Object(c.useEffect)((function(){"manyCustomers"===M.to?V(o.map((function(e){return{_id:e.email,title:e.firstName+" "+(null===e||void 0===e?void 0:e.lastName)+" - (".concat(e.email,")"),state:e.state,district:e.district,taluk:e.taluk}}))||[]):"manyDrivers"===M.to?V(j.map((function(e){var t;return{_id:e.email,title:e.firstName+" "+(null===e||void 0===e?void 0:e.lastName)+" - (".concat(e.email,")"),state:e.state,district:e.district,taluk:e.taluk,serviceType:null===e||void 0===e||null===(t=e.vehicleDetails)||void 0===t?void 0:t.serviceType}}))||[]):"manyAdmins"===M.to?V(m.map((function(e){return{_id:e.email,title:e.firstName+" "+(null===e||void 0===e?void 0:e.lastName)+" - (".concat(e.email,")"),state:e.state,district:e.district,taluk:e.taluk}}))||[]):(M.to,V([]))}),[M.to]),Object(c.useEffect)((function(){W(z)}),[z]),Object(c.useEffect)((function(){"custom"===M.to?Q("tags"):Q("multiple")}),[M.to]),Object(c.useEffect)((function(){M._id||me(null,"emailIds")}),[H]);return Object(c.useEffect)((function(){var e,t=(null===(e=s.find((function(e){return e._id===M.state})))||void 0===e?void 0:e.districts)||[];ae((null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name,taluks:e.taluks}})))||[])}),[M.state]),Object(c.useEffect)((function(){var e,t=(null===te||void 0===te||null===(e=te.find((function(e){return e.value===M.district})))||void 0===e?void 0:e.taluks)||[];re(null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name}})))}),[M.district,te]),Object(c.useEffect)((function(){(function(){var e,t;return null===s||void 0===s||null===(e=s.find((function(e){return e._id===M.state})))||void 0===e||null===(t=e.districts.map((function(e){return e._id})))||void 0===t?void 0:t.includes(M.district)})()||me("","district")}),[M.state]),Object(c.useEffect)((function(){(function(){var e,t,a,n;return null===s||void 0===s||null===(e=s.find((function(e){return e._id===M.state})))||void 0===e||null===(t=e.districts.find((function(e){return e._id===M.district})))||void 0===t||null===(a=t.taluks)||void 0===a||null===(n=a.map((function(e){return e._id})))||void 0===n?void 0:n.includes(M.taluk)})()||me("","taluk")}),[M.district,te]),Object(c.useEffect)((function(){M.taluk?W(z.filter((function(e){var t,a;return M.serviceType&&e.serviceType?(null===e||void 0===e?void 0:e.taluk)===(null===(t=M)||void 0===t?void 0:t.taluk)&&e.serviceType===M.serviceType:(null===e||void 0===e?void 0:e.taluk)===(null===(a=M)||void 0===a?void 0:a.taluk)}))):M.district?W(z.filter((function(e){var t,a;return M.serviceType&&e.serviceType?(null===e||void 0===e?void 0:e.district)===(null===(t=M)||void 0===t?void 0:t.district)&&e.serviceType===M.serviceType:(null===e||void 0===e?void 0:e.district)===(null===(a=M)||void 0===a?void 0:a.district)}))):M.state?W(z.filter((function(e){var t,a;return M.serviceType&&e.serviceType?(null===e||void 0===e?void 0:e.state)===(null===(t=M)||void 0===t?void 0:t.state)&&e.serviceType===M.serviceType:(null===e||void 0===e?void 0:e.state)===(null===(a=M)||void 0===a?void 0:a.state)}))):M.serviceType?W(z.filter((function(e){return!e.serviceType||e.serviceType===M.serviceType}))):W(z)}),[M.serviceType,M.state,M.district,M.taluk,z]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:"Send Email",style:{top:20},visible:w,okText:Object(p.jsxs)("div",{className:"d-flex",children:["Send ",Object(p.jsx)(vt.a,{className:"my-auto mx-1"})]}),onOk:fe,okButtonProps:{disabled:x||!R,style:{display:R?"inline-block":"none"}},onCancel:function(){be(!1)},destroyOnClose:!0,maskClosable:!1,width:ue?800:1200,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:x,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),fe()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!R,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Email Template"}),Object(p.jsx)(ne,{options:i.map((function(e){return{_id:e._id,title:e.subject}}))||[],value:M.emailTemplate,onChange:function(e){me(e,"emailTemplate")}})]}),Object(p.jsx)("div",{}),ue?null:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"State"}),Object(p.jsx)(ne,{placeholder:"All States",allowClear:!0,options:s.map((function(e){return{value:e._id,label:e.name}})),value:M.state,onChange:function(e){me(e,"state")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"District"}),Object(p.jsx)(ne,{placeholder:"All Districts",allowClear:!0,options:te||[],value:M.district,onChange:function(e){me(e,"district")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Taluk"}),Object(p.jsx)(ne,{placeholder:"All Taluks",allowClear:!0,options:se||[],value:M.taluk,onChange:function(e){me(e,"taluk")}})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Send To"}),Object(p.jsx)(ne,{options:[{_id:"manyCustomers",title:"Many Customers"},{_id:"manyDrivers",title:"Many Drivers"},{_id:"manyAdmins",title:"Many Admins"},{_id:"allCustomers",title:"All Customers"},{_id:"allDrivers",title:"All Drivers"},{_id:"allAdmins",title:"All Admins"},{_id:"custom",title:"Custom"}],value:M.to,onChange:function(e){me(e,"to")}})]}),["manyDrivers","allDrivers"].includes(M.to)?Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Service Type"}),Object(p.jsx)(ne,{allowClear:!0,placeholder:"All Service Types",options:v||[],value:M.serviceType,onChange:function(e){me(e,"serviceType")}})]}):null,["manyCustomers","manyDrivers","manyAdmins","custom"].includes(M.to)?Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"custom"===M.to?"Enter Emails":"Select Users"}),Object(p.jsx)(ne,{mode:Z,placeholder:"custom"===M.to?"Enter Emails":"Select Users",options:H||[],value:M.emailIds,onChange:function(e){me(e,"emailIds")}})]}):null]}),"custom"===M.emailTemplate?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Subject"}),Object(p.jsx)(U.a,{value:M.subject||"",onChange:function(e){me(e.target.value,"subject")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsxs)("label",{className:"req",children:["Template Design",Object(p.jsx)(ft.a,{title:Object(p.jsx)("table",{children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"First Name: "}),Object(p.jsx)("td",{children:"<%= firstName %>"})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"Last Name: "}),Object(p.jsx)("td",{children:"<%= lastName %>"})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"Email: "}),Object(p.jsx)("td",{children:"<%= email %>"})]})]})}),color:"cyan",children:Object(p.jsx)(N.a,{size:"small",shape:"circle",icon:Object(p.jsx)(Ot.a,{})})})]}),Object(p.jsx)(xt,{height:700,initialValue:M.html||"",onChange:function(e){me(e,"html",!1)}})]})]}):null]})})})})})})})),kt={view:F.getModules("viewDriver")}.view;function Ct(e){var t=e.driverId,a=Object(c.useState)([]),n=Object(d.a)(a,2),i=n[0],l=n[1],s=Object(c.useState)(!0),r=Object(d.a)(s,2),o=r[0],u=r[1],j=Object(c.useState)({key:"",page:1,limit:20,total:0,driverId:t}),b=Object(d.a)(j,2),m=b[0],f=b[1],v=[{title:"Login Time",dataIndex:"loginTime",width:300,render:function(e){return K()(e).calendar()}},{title:"Logout Time",dataIndex:"logoutTime"}].filter((function(e){return!e.hidden})),O=function(e){"undefined"===typeof e&&(e=m),u(!0),rt.listLogins(e,kt).then((function(t){var a,n,i=e;i.total=(null===(a=t.result)||void 0===a?void 0:a.total)||0,f(Object(P.a)({},i)),l((null===(n=t.result)||void 0===n?void 0:n.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){u(!1)}))};return Object(c.useEffect)((function(){O()}),[]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(ve,{data:i,columns:v,parentSData:m,loading:o,list:O,addNew:!1})})})}var wt={view:F.getModules("viewDriver"),add:F.getModules("addDriver"),edit:F.getModules("editDriver"),delete:F.getModules("deleteDriver")},St=wt.view,At=wt.add,Tt=wt.edit,Mt=wt.delete;function Dt(e){var t=e.vehicleData,a=e.setVisible,n=Object(c.useState)(),i=Object(d.a)(n,2),l=i[0],s=i[1],r=Object(c.useState)([]),o=Object(d.a)(r,2),u=o[0],j=o[1],b=Object(c.useState)([]),m=Object(d.a)(b,2),f=m[0],v=m[1],O=Object(c.useState)(!0),h=Object(d.a)(O,2),x=h[0],g=h[1],y=Object(c.useState)([]),k=Object(d.a)(y,2),C=k[0],w=k[1],S=Object(c.useState)(),A=Object(d.a)(S,2),T=A[0],M=A[1],D=Object(c.useState)([]),I=Object(d.a)(D,2),R=I[0],_=I[1],L=Object(c.useState)([]),E=Object(d.a)(L,2),q=E[0],U=E[1],Y=Object(c.useRef)(),V=Object(c.useRef)(),B=Object(c.useRef)(),H=Object(c.useRef)(),W=Object(c.useState)({key:"",page:1,limit:20,total:0,vehicleId:null===t||void 0===t?void 0:t._id}),J=Object(d.a)(W,2),Z=J[0],Q=J[1],X=[{title:"Driver Id",dataIndex:"driverId",width:80},{title:"Name",dataIndex:"firstName",render:function(e,t){return e+" "+t.lastName}},{title:"Email",dataIndex:"email",width:200},{title:"Phone No",dataIndex:"phoneNo",width:100},{title:"Wallet",dataIndex:"walletDetails",hidden:!F.getModules("viewWallet"),width:100,render:function(e,t){var a;return Object(p.jsxs)(N.a,{size:"small",type:"primary",className:"mx-1",onClick:function(){V.current.openForm(t)},children:["Wallet  (",null===e||void 0===e||null===(a=e[0])||void 0===a?void 0:a.amount,")"]})}},{title:"Logins",dataIndex:"",width:80,render:function(e,t){return Object(p.jsx)(N.a,{size:"small",type:"default",className:"mx-1",onClick:function(){H.current.openForm(t)},children:"Logins"})}},{title:"Rating",dataIndex:"ratingAverage",width:210,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:["(",e," / ",t.ratingCount,")",Object(p.jsx)(st.a,{disabled:!0,defaultValue:e})]})}},{title:"Approval Status",dataIndex:"isApproved",width:120,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Approved"}):Object(p.jsx)(G.a,{color:"red",children:"Not Approved"})}},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:90,hidden:!At&&!Tt&&!Mt&&!St,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[Tt?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){Y.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,!Tt&&St?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){Y.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(pe.a,{})})}):null,Mt?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{title:"Are you sure to delete this driver?",onConfirm:function(){return ee(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(ge.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),$=function(e){"undefined"===typeof e&&(e=Z),g(!0),rt.list(e,St).then((function(t){var a,n,i=e;i.total=(null===(a=t.result)||void 0===a?void 0:a.total)||0,Q(Object(P.a)({},i)),s((null===(n=t.result)||void 0===n?void 0:n.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){g(!1)}))},ee=function(e){rt.delete(e,Mt).then((function(e){ce(e.message),$()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){C.length>0&&U([].concat(Object(z.a)(q),[{type:"dropdown",key:"serviceType",placeholder:"Service Type",className:"w200 mx-1",options:C}]))}),[C]),Object(c.useEffect)((function(){$(),we.listSdt("ignoreModule").then((function(e){v(e.result.data||[])})),ot.listAllTeplates("viewEmailTemplate").then((function(e){M([].concat(Object(z.a)(e.result.data||[]),[{_id:"custom",subject:"Custom"}]))})).catch((function(e){ce("Email templates are not loaded! Contact super admin if you have any permission error","error")})),Ze.listServiceType().then((function(e){w(e.result.data)}))}),[]),Object(c.useEffect)((function(){t&&"object"===typeof l&&Y.current.openForm((null===l||void 0===l?void 0:l[0])?null===l||void 0===l?void 0:l[0]:{vehicle:t._id,isActive:!0,isApproved:!1})}),[l]),Object(c.useEffect)((function(){Array.isArray(l)&&j(l.map((function(e){var t,a,n;return{"First Name":e.firstName,"Last Name":e.lastName,Email:e.email,"Phone No":e.phoneNo,DOB:K()(e.dob).format("MMMM D, YYYY"),State:null===(t=e.stateDetails)||void 0===t?void 0:t.name,District:null===(a=e.districtDetails)||void 0===a?void 0:a.name,Taluk:null===(n=e.talukDetails)||void 0===n?void 0:n.name,Address:e.address,"Zip Code":e.zipcode,"Driving Licence Number":e.drivingLicenceNumber,"Driving Licence Number Expiry Date":K()(e.drivingLicenceNumberExpiryDate).format("MMMM D, YYYY"),"Adhar No":e.adharNo,"Pan No":e.panNo,"Badge No":e.badgeNo,"Approval Status":e.isApproved?"Approved":"Not Approved","Active Status":e.isActive?"Active":"Inactive"}})))}),[l]),Object(c.useEffect)((function(){f.length&&_(f.map((function(e){return{_id:e._id,name:e.name,districts:e.districts}})))}),[f]),Object(c.useEffect)((function(){U([{type:"dropdown",key:"isApproved",className:"w200 mx-1",placeholder:"Approval Status",options:[{id:0,name:"Not Approved"},{id:1,name:"Approved"}]},{type:"dropdown",key:"licence",className:"w200 mx-1",placeholder:"Licence Status",options:[{value:"licenceExpired",label:"Licence Expired"},{value:"licenceNotExpired",label:"Licence Not Expired"}]},{type:"dropdown",key:"state",placeholder:"State",className:"w200 mx-1",options:R}])}),[R]),Object(p.jsxs)(p.Fragment,{children:[t?null:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Driver List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(ve,{data:l,csvData:u,columns:X,filters:q,parentSData:Z,loading:x,formRef:Y,list:$,searchPlaceholder:"Driver Id or First Name or Last Name or Driver Id",addNew:!1})})]}),Object(p.jsx)(Ft,{ref:Y,list:$,sdt:f,setVisibleParent:a,emailModalRef:B}),Object(p.jsx)(It,{ref:V}),Object(p.jsx)(Nt,{ref:B,templates:T}),Object(p.jsx)(Rt,{ref:H})]})}var Ft=Object(c.forwardRef)((function(e,t){var a=e.list,n=e.sdt,i=e.setVisibleParent,l=e.emailModalRef,s=Object(c.useState)(!1),r=Object(d.a)(s,2),o=r[0],u=r[1],j=Object(c.useState)(!1),b=Object(d.a)(j,2),m=b[0],f=b[1],v=Object(c.useState)({}),O=Object(d.a)(v,2),h=O[0],x=O[1],y=Object(c.useState)([]),C=Object(d.a)(y,2),w=C[0],S=C[1],A=Object(c.useState)([]),T=Object(d.a)(A,2),M=T[0],D=T[1],I=Object(c.useState)(!1),R=Object(d.a)(I,2),_=R[0],L=R[1],E=Object(c.useRef)(),z=Object(c.useRef)(),V=Object(c.useRef)(),B=Object(c.useRef)(),H=Object(c.useRef)(),W=function(e){f(e),i&&!e&&i(!1)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){var t;e||(e={}),E.current={},z.current={},V.current={},B.current={},H.current={},e.dob=K()(e.dob).format("YYYY-MM-DD"),x(e?Object(P.a)({},e):{isActive:!0,isApproved:!1}),W(!0),!(null===(t=e)||void 0===t?void 0:t._id)&&At||e._id&&Tt?L(!0):L(!1)}}}));var J=function(e,t){x(Object(P.a)(Object(P.a)({},h),{},Object(q.a)({},t,e)))},G=function(){var e,t,n,i,l,c,s,r,o,d,j,b,m,f,v;u(!0),h.photo=null===E||void 0===E||null===(e=E.current)||void 0===e||null===(t=e.uploadingFiles)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.base64,h.drivingLicencePhoto=null===z||void 0===z||null===(i=z.current)||void 0===i||null===(l=i.uploadingFiles)||void 0===l||null===(c=l[0])||void 0===c?void 0:c.base64,h.adharCardPhoto=null===V||void 0===V||null===(s=V.current)||void 0===s||null===(r=s.uploadingFiles)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.base64,h.panCardPhoto=null===B||void 0===B||null===(d=B.current)||void 0===d||null===(j=d.uploadingFiles)||void 0===j||null===(b=j[0])||void 0===b?void 0:b.base64,h.badgePhoto=null===H||void 0===H||null===(m=H.current)||void 0===m||null===(f=m.uploadingFiles)||void 0===f||null===(v=f[0])||void 0===v?void 0:v.base64,rt.save(h,h._id?Tt:At).then((function(e){ce(e.message),W(!1),a()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){u(!1)}))};return Object(c.useEffect)((function(){var e,t=(null===(e=n.find((function(e){return e._id===h.state})))||void 0===e?void 0:e.districts)||[];S((null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name,taluks:e.taluks}})))||[])}),[h.state]),Object(c.useEffect)((function(){var e,t=(null===w||void 0===w||null===(e=w.find((function(e){return e.value===h.district})))||void 0===e?void 0:e.taluks)||[];D(null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name}})))}),[h.district,w]),Object(c.useEffect)((function(){(function(){var e,t;return null===n||void 0===n||null===(e=n.find((function(e){return e._id===h.state})))||void 0===e||null===(t=e.districts.map((function(e){return e._id})))||void 0===t?void 0:t.includes(h.district)})()||J("","district")}),[h.state]),Object(c.useEffect)((function(){(function(){var e,t,a,i;return null===n||void 0===n||null===(e=n.find((function(e){return e._id===h.state})))||void 0===e||null===(t=e.districts.find((function(e){return e._id===h.district})))||void 0===t||null===(a=t.taluks)||void 0===a||null===(i=a.map((function(e){return e._id})))||void 0===i?void 0:i.includes(h.taluk)})()||J("","taluk")}),[h.district,w]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(h._id?"Edit":"Add")+" Driver",style:{top:20},visible:m,okText:"Save",onOk:G,okButtonProps:{disabled:o||!_,style:{display:_?"inline-block":"none"}},onCancel:function(){W(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body-overflow",footer:[Object(p.jsx)(N.a,{type:"dashed",onClick:function(){l.current.openForm({outerData:{_id:h._id,state:h.state,district:h.district,taluk:h.taluk,to:"manyDrivers",emailIds:[h.email]}})},children:"Send Email"},"sendEmail"),Object(p.jsx)(N.a,{onClick:function(){W(!1)},children:"Cancel"},"cancel"),Object(p.jsx)(N.a,{type:"primary",onClick:G,children:"Save"},"save")],children:Object(p.jsx)(g.a,{spinning:o,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),G()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!_,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Personal Details "})}),Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"First Name"}),Object(p.jsx)(U.a,{value:h.firstName||"",onChange:function(e){return J(e.target.value,"firstName")}})]}),Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Last Name"}),Object(p.jsx)(U.a,{value:h.lastName||"",onChange:function(e){return J(e.target.value,"lastName")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Email"}),Object(p.jsx)(U.a,{value:h.email||"",onChange:function(e){return J(e.target.value,"email")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Phone No."}),Object(p.jsx)(U.a,{value:h.phoneNo||"",onChange:function(e){return J(F.handleInteger(e.target.value),"phoneNo")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"User Name"}),Object(p.jsx)(U.a,{value:h.userName||"",onChange:function(e){return J(F.removeSpecialChars(e.target.value),"userName")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Gender"}),Object(p.jsx)(ne,{options:[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"}],value:h.gender,onChange:function(e){J(e,"gender")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsxs)("label",{className:h._id?"":"req",children:[h._id?"Update":"Set"," Password"]}),Object(p.jsx)(U.a,{value:h.password||"",onChange:function(e){return J(e.target.value,"password")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"DOB"}),Object(p.jsx)(ie,{format:"MMMM D, YYYY",value:h.dob||new Date,onChange:function(e){J(e,"dob")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"State"}),Object(p.jsx)(ne,{options:n.map((function(e){return{value:e._id,label:e.name}})),value:h.state,onChange:function(e){J(e,"state")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"District"}),Object(p.jsx)(ne,{options:w||[],value:h.district,onChange:function(e){J(e,"district")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Taluk"}),Object(p.jsx)(ne,{options:M||[],value:h.taluk,onChange:function(e){J(e,"taluk")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Zip Code"}),Object(p.jsx)(U.a,{value:h.zipcode||"",onChange:function(e){J(F.handleInteger(e.target.value,6),"zipcode")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Address"}),Object(p.jsx)(U.a.TextArea,{value:h.address||"",onChange:function(e){J(e.target.value,"address")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Image"}),Object(p.jsx)(Ce,{ref:E,fileCount:1,files:h.image?[h.image]:[]})]}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Driving Licence Details "})}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Driving Licence Number"}),Object(p.jsx)(U.a,{value:h.drivingLicenceNumber||"",onChange:function(e){return J(e.target.value,"drivingLicenceNumber")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Driving Licence Number Expiry Date"}),Object(p.jsx)(ie,{format:"MMMM D, YYYY",value:h.drivingLicenceNumberExpiryDate||new Date,onChange:function(e){J(e,"drivingLicenceNumberExpiryDate")}})]}),Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Driving Licence photo"}),Object(p.jsx)(Ce,{ref:z,fileCount:1,files:h.drivingLicenceImage?[h.drivingLicenceImage]:[]})]}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Adhar Details "})}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Adhar Number"}),Object(p.jsx)(U.a,{value:h.adharNo||"",onChange:function(e){return J(e.target.value,"adharNo")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Adhar Card photo"}),Object(p.jsx)(Ce,{ref:V,fileCount:1,files:h.adharCardImage?[h.adharCardImage]:[]})]}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Pan Card Details "})}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Pan No."}),Object(p.jsx)(U.a,{value:h.panNo||"",onChange:function(e){return J(e.target.value,"panNo")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Pan Card photo"}),Object(p.jsx)(Ce,{ref:B,fileCount:1,files:h.panCardImage?[h.panCardImage]:[]})]}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Badge Details "})}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Badge No."}),Object(p.jsx)(U.a,{value:h.badgeNo||"",onChange:function(e){return J(e.target.value,"badgeNo")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Badge photo"}),Object(p.jsx)(Ce,{ref:H,fileCount:1,files:h.badgeImage?[h.badgeImage]:[]})]}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Status "})}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Approval Status"}),Object(p.jsx)(ne,{options:[{value:!0,label:"Approved"},{value:!1,label:"Not Approved"}],value:h.isApproved,onChange:function(e){J(e,"isApproved")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ne,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:h.isActive,onChange:function(e){J(e,"isActive")}})]})]})})})})})})})),It=Object(c.forwardRef)((function(e,t){var a=Object(c.useState)(!1),n=Object(d.a)(a,2),i=n[0],l=n[1],s=Object(c.useState)({}),r=Object(d.a)(s,2),o=r[0],u=r[1],j=function(e){l(e)};return Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){u(Object(P.a)({},e)),j(!0)}}})),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:Object(p.jsxs)(p.Fragment,{children:["Wallet History of ",Object(p.jsx)("span",{className:"text-danger",children:o.name})]}),style:{top:20},visible:i,onCancel:function(){j(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,footer:null,className:"app-modal-body-overflow",children:Object(p.jsx)(bt,{driverId:o._id})})})})),Rt=Object(c.forwardRef)((function(e,t){var a=Object(c.useState)(!1),n=Object(d.a)(a,2),i=n[0],l=n[1],s=Object(c.useState)({}),r=Object(d.a)(s,2),o=r[0],u=r[1],j=function(e){l(e)};return Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){u(Object(P.a)({},e)),j(!0)}}})),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:Object(p.jsxs)(p.Fragment,{children:["Login History of ",Object(p.jsx)("span",{className:"text-danger",children:o.name})]}),style:{top:20},visible:i,onCancel:function(){j(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,footer:null,className:"app-modal-body-overflow",children:Object(p.jsx)(Ct,{driverId:o._id})})})})),_t={view:F.getModules("viewVehicle"),add:F.getModules("addVehicle"),edit:F.getModules("editVehicle"),delete:F.getModules("deleteVehicle")},Lt=_t.view,Et=_t.add,qt=_t.edit,Pt=_t.delete;var Ut=Object(c.forwardRef)((function(e,t){var a,n,i=e.list,l=e.serviceType,s=e.rideTypes,r=e.makes,o=e.colors,u=e.sdt,j=Object(c.useState)(!1),b=Object(d.a)(j,2),m=b[0],f=b[1],v=Object(c.useState)(!1),O=Object(d.a)(v,2),h=O[0],x=O[1],y=Object(c.useState)({}),N=Object(d.a)(y,2),C=N[0],w=N[1],S=Object(c.useState)([]),A=Object(d.a)(S,2),T=A[0],M=A[1],D=Object(c.useState)([]),I=Object(d.a)(D,2),R=I[0],_=I[1],L=Object(c.useState)(!1),E=Object(d.a)(L,2),V=E[0],B=E[1],H=Object(c.useState)([]),W=Object(d.a)(H,2),J=W[0],G=W[1],Z=Object(c.useState)([]),Q=Object(d.a)(Z,2),X=Q[0],ee=Q[1],te=Object(c.useState)([]),ae=Object(d.a)(te,2),se=ae[0],re=ae[1],oe=Object(c.useRef)(),de=Object(c.useRef)(),ue=Object(c.useRef)(),je=Object(c.useRef)(),be=Object(c.useRef)(),me=Object(c.useRef)(),fe=function(e){x(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){var t;e||(e={}),oe.current={},de.current={},ue.current={},je.current={},be.current={},me.current={},e.registrationExpiryDate=K()(e.registrationExpiryDate).format("YYYY-MM-DD"),e.insuranceExpiryDate=K()(e.insuranceExpiryDate).format("YYYY-MM-DD"),e.permitExpiryDate=K()(e.permitExpiryDate).format("YYYY-MM-DD"),e.pollutionExpiryDate=K()(e.pollutionExpiryDate).format("YYYY-MM-DD"),w(e._id?Object(P.a)({},e):{isActive:!0,addedBy:"admin",isApproved:!1}),fe(!0),!(null===(t=e)||void 0===t?void 0:t._id)&&Et||e._id&&qt?B(!0):B(!1)}}}));var ve=function(e,t){w(Object(P.a)(Object(P.a)({},C),{},Object(q.a)({},t,e)))};Object(c.useEffect)((function(){ve(F.removeSpecialChars(C.name||""),"slug")}),[C.name]),Object(c.useEffect)((function(){var e=null===s||void 0===s?void 0:s.filter((function(e){return e.serviceType._id===C.serviceType}));M(e||[])}),[C.serviceType]),Object(c.useEffect)((function(){ve([],"rideTypes")}),[T]),Object(c.useEffect)((function(){var e,t,a,n=null===s||void 0===s?void 0:s.filter((function(e){var t;return null===(t=C.rideTypes)||void 0===t?void 0:t.includes(e._id)}));n=null===(a=n=null===(e=n)||void 0===e||null===(t=e.map((function(e){return e.allowedVehicleCategoriesDetails})))||void 0===t?void 0:t.flat(1))||void 0===a?void 0:a.filter((function(e,t,a){return t===a.findIndex((function(t){return t._id===e._id}))})),_(n)}),[T,C.rideTypes]),Object(c.useEffect)((function(){var e,t=(null===r||void 0===r||null===(e=r.find((function(e){return C.make===e._id})))||void 0===e?void 0:e.models)||[];G(Object(z.a)(t))}),[C.make]),Object(c.useEffect)((function(){var e;(null===J||void 0===J||null===(e=J.map((function(e){return e._id})))||void 0===e?void 0:e.includes(null===C||void 0===C?void 0:C.model))||ve("","model")}),[J]),Object(c.useEffect)((function(){var e,t;ve(((null===r||void 0===r||null===(e=r.find((function(e){return e._id===C.make})))||void 0===e?void 0:e.name)||"")+" - "+((null===J||void 0===J||null===(t=J.find((function(e){return e._id===C.model})))||void 0===t?void 0:t.name)||""),"name")}),[C.make,C.model]),Object(c.useEffect)((function(){if(Array.isArray(R)&&R.length>0){var e=null===R||void 0===R?void 0:R.filter((function(e){return e._id===C.vehicleCategory}));0===(null===e||void 0===e?void 0:e.length)&&ve("","vehicleCategory")}}),[R]);Object(c.useEffect)((function(){var e,t=(null===(e=u.find((function(e){return e._id===C.state})))||void 0===e?void 0:e.districts)||[];ee((null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name,taluks:e.taluks}})))||[])}),[C.state]),Object(c.useEffect)((function(){var e,t=(null===X||void 0===X||null===(e=X.find((function(e){return e.value===C.district})))||void 0===e?void 0:e.taluks)||[];re(null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name}})))}),[C.district,X]),Object(c.useEffect)((function(){(function(){var e,t;return null===u||void 0===u||null===(e=u.find((function(e){return e._id===C.state})))||void 0===e||null===(t=e.districts.map((function(e){return e._id})))||void 0===t?void 0:t.includes(C.district)})()||ve("","district")}),[C.state]),Object(c.useEffect)((function(){(function(){var e,t,a,n;return null===u||void 0===u||null===(e=u.find((function(e){return e._id===C.state})))||void 0===e||null===(t=e.districts.find((function(e){return e._id===C.district})))||void 0===t||null===(a=t.taluks)||void 0===a||null===(n=a.map((function(e){return e._id})))||void 0===n?void 0:n.includes(C.taluk)})()||ve("","taluk")}),[C.district,X]);var Oe=function(){var e,t,a,n,l,c,s,r,o,d,u,j,b,m,v,O,h,x;f(!0),C.primaryPhoto=null===oe||void 0===oe||null===(e=oe.current)||void 0===e||null===(t=e.uploadingFiles)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.base64,C.otherPhotos=null===de||void 0===de||null===(n=de.current)||void 0===n||null===(l=n.uploadingFiles)||void 0===l?void 0:l.map((function(e){return e.base64})),C.registrationPhoto=null===ue||void 0===ue||null===(c=ue.current)||void 0===c||null===(s=c.uploadingFiles)||void 0===s||null===(r=s[0])||void 0===r?void 0:r.base64,C.insurancePhoto=null===je||void 0===je||null===(o=je.current)||void 0===o||null===(d=o.uploadingFiles)||void 0===d||null===(u=d[0])||void 0===u?void 0:u.base64,C.permitPhoto=null===be||void 0===be||null===(j=be.current)||void 0===j||null===(b=j.uploadingFiles)||void 0===b||null===(m=b[0])||void 0===m?void 0:m.base64,C.pollutionPhoto=null===me||void 0===me||null===(v=me.current)||void 0===v||null===(O=v.uploadingFiles)||void 0===O||null===(h=O[0])||void 0===h?void 0:h.base64,C.deletingFiles=null===de||void 0===de||null===(x=de.current)||void 0===x?void 0:x.deletingFiles,Ge.save(C,C._id?qt:Et).then((function(e){ce(e.message),fe(!1),i()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){f(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(C._id?"Edit":"Add")+" Vehicle",style:{top:20},visible:h,okText:"Save",onOk:Oe,okButtonProps:{disabled:m||!V,style:{display:V?"inline-block":"none"}},onCancel:function(){fe(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:m,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),Oe()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!V,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Added By"}),Object(p.jsx)(ne,{disabled:!0,options:[{value:"admin",label:"Admin"},{value:"driver",label:"Driver"}],value:C.addedBy,onChange:function(e){ve(e,"addedBy")}})]}),Object(p.jsx)("div",{className:"col-md-6 form-group"}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Approved"}),Object(p.jsx)(ne,{options:[{value:!0,label:"Yes"},{value:!1,label:"No"}],value:C.isApproved,onChange:function(e){ve(e,"isApproved")}})]}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Vehicle Id"})}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Service Type "})}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Service Type"}),Object(p.jsx)(ne,{options:l,value:C.serviceType,onChange:function(e){ve(e,"serviceType")}})]}),(null===T||void 0===T?void 0:T.length)?Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Ride Types"}),Object(p.jsx)(le,{options:T,col:4,value:C.rideTypes,onChange:function(e){!(null===e||void 0===e?void 0:e.length)||ve(e,"rideTypes")}})]}):null,(null===R||void 0===R?void 0:R.length)?Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Vehicle Categories"}),Object(p.jsx)(ne,{options:R,value:C.vehicleCategory||"",onChange:function(e){ve(e,"vehicleCategory")}})]}):null,Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Make Details "})}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Make"}),Object(p.jsx)(ne,{options:r||[],value:C.make||"",onChange:function(e){ve(e,"make")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Model"}),Object(p.jsx)(ne,{options:J||[],value:C.model||"",onChange:function(e){ve(e,"model")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Color"}),Object(p.jsx)(ne,{options:o,value:C.color||"",onChange:function(e){ve(e,"color")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Manufacturing Year"}),Object(p.jsx)(ie,{picker:"year",format:"YYYY",getFormat:"YYYY",disableUpcomingDate:!0,value:C.manufacturingYear||new Date,onChange:function(e){ve(e,"manufacturingYear")}})]}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Basic Details"})}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Name"}),Object(p.jsx)(U.a,{value:C.name||"",onChange:function(e){return ve(e.target.value,"name")},disabled:!0})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Vehicle Number"}),Object(p.jsx)(U.a,{value:C.vehicleNumber||"",onChange:function(e){return ve(e.target.value,"vehicleNumber")}})]}),"taxi"===(null===l||void 0===l||null===(a=l.find((function(e){return e._id===C.serviceType})))||void 0===a?void 0:a.key)?Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Available Seats"}),Object(p.jsx)(U.a,{value:C.availableSeats||"",onChange:function(e){return ve(F.handleInteger(e.target.value,2),"availableSeats")}})]}):null,"cargo"===(null===l||void 0===l||null===(n=l.find((function(e){return e._id===C.serviceType})))||void 0===n?void 0:n.key)?Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Available Capacity (in tons)"}),Object(p.jsx)(U.a,{value:C.availableCapacity||"",onChange:function(e){return ve(e.target.value,"availableCapacity")}})]}):null,Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"State"}),Object(p.jsx)(ne,{options:u.map((function(e){return{value:e._id,label:e.name}})),value:C.state,onChange:function(e){ve(e,"state")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"District"}),Object(p.jsx)(ne,{options:X||[],value:C.district,onChange:function(e){ve(e,"district")}})]}),Object(p.jsxs)("div",{className:"col-md-3 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Taluk"}),Object(p.jsx)(ne,{options:se||[],value:C.taluk,onChange:function(e){ve(e,"taluk")}})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-2 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Primary Image"}),Object(p.jsx)(Ce,{ref:oe,fileCount:1,files:C.image?[C.image]:[]})]}),Object(p.jsxs)("div",{className:"col-md-10 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Images"}),Object(p.jsx)(Ce,{ref:de,fileCount:4,files:C.otherPhotos?C.otherPhotos:[]})]}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Registration"})}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Registration Number"}),Object(p.jsx)(U.a,{value:C.registrationNumber||"",onChange:function(e){return ve(e.target.value,"registrationNumber")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Registration Expiry Date"}),Object(p.jsx)(ie,{format:"MMMM D, YYYY",disablePastDate:!0,value:C.registrationExpiryDate||new Date,onChange:function(e){ve(e,"registrationExpiryDate")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Registration Image"}),Object(p.jsx)(Ce,{ref:ue,fileCount:1,files:C.registrationImage?[C.registrationImage]:[]})]}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Insurance"})}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Insurance Number"}),Object(p.jsx)(U.a,{value:C.insuranceNumber||"",onChange:function(e){return ve(e.target.value,"insuranceNumber")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Insurance Expiry Date"}),Object(p.jsx)(ie,{format:"MMMM D, YYYY",disablePastDate:!0,value:C.insuranceExpiryDate||new Date,onChange:function(e){ve(e,"insuranceExpiryDate")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Insurance Image"}),Object(p.jsx)(Ce,{ref:je,fileCount:1,files:C.insuranceImage?[C.insuranceImage]:[]})]}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Permit"})}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Permit Number"}),Object(p.jsx)(U.a,{value:C.permitNumber||"",onChange:function(e){return ve(e.target.value,"permitNumber")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Permit Expiry Date"}),Object(p.jsx)(ie,{format:"MMMM D, YYYY",disablePastDate:!0,value:C.permitExpiryDate||new Date,onChange:function(e){ve(e,"permitExpiryDate")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Permit Image"}),Object(p.jsx)(Ce,{ref:be,fileCount:1,files:C.permitImage?[C.permitImage]:[]})]}),Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",className:"text-danger",children:"Pollution Certificate"})}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Pollution Certificate Number"}),Object(p.jsx)(U.a,{value:C.pollutionNumber||"",onChange:function(e){return ve(e.target.value,"pollutionNumber")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Pollution Certificate Expiry Date"}),Object(p.jsx)(ie,{format:"MMMM D, YYYY",disablePastDate:!0,value:C.pollutionExpiryDate||new Date,onChange:function(e){ve(e,"pollutionExpiryDate")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Pollution Certificate Image"}),Object(p.jsx)(Ce,{ref:me,fileCount:1,files:C.pollutionImage?[C.pollutionImage]:[]})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ne,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:C.isActive,onChange:function(e){ve(e,"isActive")}})]})]})})})})})})})),Yt=Object(c.forwardRef)((function(e,t){var a=Object(c.useState)(!1),n=Object(d.a)(a,2),i=n[0],l=n[1],s=Object(c.useState)({}),r=Object(d.a)(s,2),o=r[0],u=r[1];return Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){u(e),l(!0)}}})),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)($.a,{style:{top:20},visible:i,onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:200,closable:!1,footer:null,children:[Object(p.jsx)(g.a,{spinning:!0,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:"Loading"}),Object(p.jsx)(Dt,{vehicleData:o,setVisible:l})]})})})),zt={view:F.getModules("viewRideType"),add:F.getModules("addRideType"),edit:F.getModules("editRideType"),delete:F.getModules("deleteRideType")},Vt=zt.view,Bt=zt.add,Kt=zt.edit,Ht=zt.delete;var Wt=Object(c.forwardRef)((function(e,t){var a,n=e.list,i=e.serviceType,l=e.vehicleCategories,s=Object(c.useState)(!1),r=Object(d.a)(s,2),o=r[0],u=r[1],j=Object(c.useState)(!1),b=Object(d.a)(j,2),m=b[0],f=b[1],v=Object(c.useState)({}),O=Object(d.a)(v,2),h=O[0],x=O[1],y=Object(c.useState)(!1),N=Object(d.a)(y,2),k=N[0],C=N[1],w=Object(c.useRef)(),S=function(e){f(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){w.current={},x(e?Object(P.a)({},e):{isActive:!0}),S(!0),!(null===e||void 0===e?void 0:e._id)&&Bt||e._id&&Kt?C(!0):C(!1)}}}));var A=function(e,t){x(Object(P.a)(Object(P.a)({},h),{},Object(q.a)({},t,e)))},T=function(){var e,t,a;u(!0),h.photo=null===w||void 0===w||null===(e=w.current)||void 0===e||null===(t=e.uploadingFiles)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.base64,ct.saveRideType(h,h._id?Kt:Bt).then((function(e){ce(e.message),S(!1),n()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){u(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(h._id?"Edit":"Add")+" Ride Type",style:{top:20},visible:m,okText:"Save",onOk:T,okButtonProps:{disabled:o||!k,style:{display:k?"inline-block":"none"}},onCancel:function(){S(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:o,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),T()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!k,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Service Type"}),Object(p.jsx)(ne,{options:i,value:null===h||void 0===h||null===(a=h.serviceType)||void 0===a?void 0:a._id,disabled:h._id,onChange:function(e){}})]}),Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Name"}),Object(p.jsx)(U.a,{value:h.name||"",onChange:function(e){return A(e.target.value,"name")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Vehicle Categories"}),Object(p.jsx)(le,{options:l,value:h.allowedVehicleCategories,onChange:function(e){!(null===e||void 0===e?void 0:e.length)||A(e,"allowedVehicleCategories")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Image"}),Object(p.jsx)(Ce,{ref:w,fileCount:1,files:h.image?[h.image]:[]})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ne,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:h.isActive,onChange:function(e){A(e,"isActive")}})]})]})})})})})})})),Jt={view:F.getModules("viewMake"),add:F.getModules("addMake"),edit:F.getModules("editMake"),delete:F.getModules("deleteMake")},Gt=Jt.view,Zt=Jt.add,Qt=Jt.edit,Xt=Jt.delete;var $t=Object(c.forwardRef)((function(e,t){var a=e.list,n=Object(c.useState)(!1),i=Object(d.a)(n,2),l=i[0],s=i[1],r=Object(c.useState)(!1),o=Object(d.a)(r,2),u=o[0],j=o[1],b=Object(c.useState)({}),m=Object(d.a)(b,2),f=m[0],v=m[1],O=Object(c.useState)(!1),h=Object(d.a)(O,2),x=h[0],y=h[1],N=Object(c.useRef)(),k=function(e){j(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){N.current={},v(e?Object(P.a)({},e):{isActive:!0}),k(!0),!(null===e||void 0===e?void 0:e._id)&&Zt||e._id&&Qt?y(!0):y(!1)}}}));var C=function(e,t){v(Object(P.a)(Object(P.a)({},f),{},Object(q.a)({},t,e)))};Object(c.useEffect)((function(){C(F.removeSpecialChars(f.name||""),"key")}),[f.name]);var w=function(){var e,t,n;s(!0),f.photo=null===N||void 0===N||null===(e=N.current)||void 0===e||null===(t=e.uploadingFiles)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.base64,Ge.saveMake(f,f._id?Qt:Zt).then((function(e){ce(e.message),k(!1),a()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){s(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(f._id?"Edit":"Add")+" Make",style:{top:20},visible:u,okText:"Save",onOk:w,okButtonProps:{disabled:l||!x,style:{display:x?"inline-block":"none"}},onCancel:function(){k(!1)},destroyOnClose:!0,maskClosable:!1,width:400,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:l,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),w()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!x,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Name"}),Object(p.jsx)(U.a,{value:f.name||"",onChange:function(e){return C(e.target.value,"name")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Key"}),Object(p.jsx)(U.a,{value:f.key||"",onChange:function(e){return C(F.removeSpecialChars(e.target.value),"key")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ne,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:f.isActive,onChange:function(e){C(e,"isActive")}})]})]})})})})})})})),ea={view:F.getModules("viewMakeModel"),add:F.getModules("addMakeModel"),edit:F.getModules("editMakeModel"),delete:F.getModules("deleteMakeModel")},ta=ea.view,aa=ea.add,na=ea.edit,ia=ea.delete;var la=Object(c.forwardRef)((function(e,t){var a=e.list,n=e.makes,i=Object(c.useState)(!1),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!1),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)({}),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)(!1),x=Object(d.a)(h,2),y=x[0],N=x[1],k=Object(c.useRef)(),C=function(e){b(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){k.current={},O(e?Object(P.a)({},e):{isActive:!0}),C(!0),!(null===e||void 0===e?void 0:e._id)&&aa||e._id&&na?N(!0):N(!1)}}}));var w=function(e,t){O(Object(P.a)(Object(P.a)({},v),{},Object(q.a)({},t,e)))};Object(c.useEffect)((function(){w(F.removeSpecialChars(v.name||""),"key")}),[v.name]);var S=function(){var e,t,n;r(!0),v.photo=null===k||void 0===k||null===(e=k.current)||void 0===e||null===(t=e.uploadingFiles)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.base64,Ge.saveMakeModel(v,v._id?na:aa).then((function(e){ce(e.message),C(!1),a()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){r(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(v._id?"Edit":"Add")+" Make Model",style:{top:20},visible:j,okText:"Save",onOk:S,okButtonProps:{disabled:s||!y,style:{display:y?"inline-block":"none"}},onCancel:function(){C(!1)},destroyOnClose:!0,maskClosable:!1,width:400,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:s,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),S()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!y,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Make"}),Object(p.jsx)(ne,{options:n,value:v.make,onChange:function(e){w(e,"make")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Name"}),Object(p.jsx)(U.a,{value:v.name||"",onChange:function(e){return w(e.target.value,"name")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Key"}),Object(p.jsx)(U.a,{value:v.key||"",onChange:function(e){return w(F.removeSpecialChars(e.target.value),"key")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ne,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:v.isActive,onChange:function(e){w(e,"isActive")}})]})]})})})})})})})),ca={view:F.getModules("viewColor"),add:F.getModules("addColor"),edit:F.getModules("editColor"),delete:F.getModules("deleteColor")},sa=ca.view,ra=ca.add,oa=ca.edit,da=ca.delete;var ua=Object(c.forwardRef)((function(e,t){var a=e.list,n=Object(c.useState)(!1),i=Object(d.a)(n,2),l=i[0],s=i[1],r=Object(c.useState)(!1),o=Object(d.a)(r,2),u=o[0],j=o[1],b=Object(c.useState)({}),m=Object(d.a)(b,2),f=m[0],v=m[1],O=Object(c.useState)(!1),h=Object(d.a)(O,2),x=h[0],y=h[1],N=Object(c.useRef)(),k=function(e){j(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){N.current={},v(e?Object(P.a)({},e):{code:"#000000",isActive:!0}),k(!0),!(null===e||void 0===e?void 0:e._id)&&ra||e._id&&oa?y(!0):y(!1)}}}));var C=function(e,t){v(Object(P.a)(Object(P.a)({},f),{},Object(q.a)({},t,e)))};Object(c.useEffect)((function(){C(F.removeSpecialChars(f.name||""),"key")}),[f.name]);var w=function(){var e,t,n;s(!0),f.photo=null===N||void 0===N||null===(e=N.current)||void 0===e||null===(t=e.uploadingFiles)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.base64,Ge.saveColor(f,f._id?oa:ra).then((function(e){ce(e.message),k(!1),a()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){s(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(f._id?"Edit":"Add")+" Color",style:{top:20},visible:u,okText:"Save",onOk:w,okButtonProps:{disabled:l||!x,style:{display:x?"inline-block":"none"}},onCancel:function(){k(!1)},destroyOnClose:!0,maskClosable:!1,width:400,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:l,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),w()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!x,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Name"}),Object(p.jsx)(U.a,{value:f.name||"",onChange:function(e){return C(e.target.value,"name")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Code"}),Object(p.jsx)(U.a,{type:"color",value:f.code||"",onChange:function(e){return C(e.target.value,"code")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ne,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:f.isActive,onChange:function(e){C(e,"isActive")}})]})]})})})})})})})),ja=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"listPackage",value:function(e,t){return L.get(this.baseURL+"package/list",{params:e,module:t})}},{key:"listPackageAll",value:function(e,t){return L.get(this.baseURL+"package/list/ALL",{params:e,module:t})}},{key:"savePackage",value:function(e,t){return L.post(this.baseURL+"package/save",e,{module:t})}},{key:"deletePackage",value:function(e,t){return L.delete("".concat(this.baseURL,"package/delete/").concat(e),{module:t})}},{key:"list",value:function(e,t){return L.get(this.baseURL+"list",{params:e,module:t})}},{key:"listAll",value:function(e,t){return L.get(this.baseURL+"list/ALL",{params:e,module:t})}},{key:"save",value:function(e,t){return L.post(this.baseURL+"save",e,{module:t})}},{key:"delete",value:function(e,t){return L.delete("".concat(this.baseURL,"delete/").concat(e),{module:t})}}]),e}();ja.baseURL="fare-management/";var ba={view:F.getModules("viewFareManagement"),add:F.getModules("addFareManagement"),edit:F.getModules("editFareManagement"),delete:F.getModules("deleteFareManagement")},ma=ba.view,fa=ba.add,va=ba.edit,Oa=ba.delete;function ha(e){var t=e.activeServiceType,a=void 0===t?"taxi":t,n=Object(c.useState)([]),i=Object(d.a)(n,2),l=i[0],s=i[1],r=Object(c.useState)([]),o=Object(d.a)(r,2),u=o[0],j=o[1],b=Object(c.useState)(!0),m=Object(d.a)(b,2),f=m[0],v=m[1],O=Object(c.useState)([]),h=Object(d.a)(O,2),x=h[0],g=h[1],y=Object(c.useState)([]),k=Object(d.a)(y,2),C=k[0],w=k[1],S=Object(c.useState)([]),A=Object(d.a)(S,2),T=A[0],M=A[1],D=Object(c.useState)([]),F=Object(d.a)(D,2),I=F[0],R=F[1],_=Object(c.useRef)(),L=Object(c.useState)({key:"",page:1,limit:20,total:0,serviceTypeKey:a}),E=Object(d.a)(L,2),q=E[0],U=E[1],Y=[{title:"Fares",dataIndex:"",width:260,render:function(e,t){var a;return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("table",{className:"text-uppercase",children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{className:"text-success",children:[Object(p.jsx)("td",{children:"Base Fare"}),Object(p.jsxs)("td",{children:[": ",t.baseFare]})]}),Object(p.jsxs)("tr",{className:"text-primary",children:[Object(p.jsx)("td",{children:"Booking Fare"}),Object(p.jsxs)("td",{children:[": ",t.bookingFare]})]}),["taxi-rentals","cargo-rentals"].includes(null===t||void 0===t||null===(a=t.rideTypeDetails)||void 0===a?void 0:a.key)?Object(p.jsxs)("tr",{className:"text-info",children:[Object(p.jsx)("td",{children:"Extra Per Minute Charge"}),Object(p.jsxs)("td",{children:[": ",t.extraPerMinuteCharge]})]}):Object(p.jsxs)("tr",{className:"text-info",children:[Object(p.jsx)("td",{children:"Per Minute Fare"}),Object(p.jsxs)("td",{children:[": ",t.perMinuteFare]})]})]})})})}},{title:"Charges",dataIndex:"",width:180,render:function(e,t){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("table",{className:"text-uppercase",children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{className:"text-danger",children:[Object(p.jsx)("td",{children:"Cancel Charge"}),Object(p.jsxs)("td",{children:[": ",t.cancelCharge]})]}),Object(p.jsxs)("tr",{className:"text-warning",children:[Object(p.jsx)("td",{children:"Waiting Charge"}),Object(p.jsxs)("td",{children:[": ",t.waitingCharge]})]})]})})})}},{title:"Admin Comission",dataIndex:"",width:180,render:function(e,t){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("table",{className:"text-uppercase",children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{className:"text-secondary",children:[Object(p.jsx)("td",{children:"Type"}),Object(p.jsxs)("td",{children:[": ",t.adminCommissionType]})]}),Object(p.jsxs)("tr",{className:"text-primary",children:[Object(p.jsx)("td",{children:"Value"}),Object(p.jsxs)("td",{children:[": ",t.adminCommissionValue]})]})]})})})}},{title:"Service Type",dataIndex:"serviceTypeDetails",width:100,render:function(e,t){return e.name}},{title:"Ride Type",dataIndex:"rideTypeDetails",width:120,render:function(e,t){return e.name}},{title:"Vehicle Category",dataIndex:"vehicleCategoryDetails",width:150,render:function(e,t){return e.name}},{title:"State",dataIndex:"stateDetails",width:150,render:function(e,t){return e.name}},{title:"District",dataIndex:"districtDetails",width:150,render:function(e,t){return e.name}},{title:"Taluk",dataIndex:"talukDetails",width:150,render:function(e,t){return e.name}},{title:"Action",width:90,hidden:!fa&&!va&&!Oa&&!ma,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[va?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){_.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,!va&&ma?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){_.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(pe.a,{})})}):null,Oa?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{title:"Are you sure to delete this fare?",onConfirm:function(){return B(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(ge.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),V=function(e){"undefined"===typeof e&&(e=q),v(!0),ja.list(e,ma).then((function(t){var a,n,i=e;i.total=(null===(a=t.result)||void 0===a?void 0:a.total)||0,U(Object(P.a)({},i)),s((null===(n=t.result)||void 0===n?void 0:n.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){v(!1)}))},B=function(e){ja.delete(e,Oa).then((function(e){ce(e.message),V()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){V(),we.listSdt("ignoreModule").then((function(e){j(e.result.data||[])})),Ze.listServiceType().then((function(e){return g(e.result.data||[])})),ct.listAllRideType({},"viewRideType").then((function(e){return w(e.result.data||[])})),ja.listPackageAll({},"ignoreModule").then((function(e){R(e.result.data||[])}))}),[]),Object(c.useEffect)((function(){var e=C.filter((function(e){var t;return(null===(t=e.serviceType)||void 0===t?void 0:t.key)===a}));e.length&&M([].concat(Object(z.a)(T),[{type:"dropdown",key:"rideType",placeholder:"Ride Type",className:"w200 mx-1",options:e}]))}),[C]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Fare List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(ve,{data:l,columns:Y,filters:T,parentSData:q,loading:f,formRef:_,list:V,searchPlaceholder:"Search",addNew:fa})}),Object(p.jsx)(xa,{ref:_,list:V,sdt:u,activeServiceType:a,serviceTypes:x,rideTypes:C,packages:I})]})}var xa=Object(c.forwardRef)((function(e,t){var a,n,i,l,s=e.list,r=e.sdt,o=e.activeServiceType,u=e.serviceTypes,j=e.rideTypes,b=e.packages,m=Object(c.useState)(!1),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)(!1),x=Object(d.a)(h,2),y=x[0],N=x[1],k=Object(c.useState)({}),C=Object(d.a)(k,2),w=C[0],S=C[1],A=Object(c.useState)([]),T=Object(d.a)(A,2),M=T[0],D=T[1],I=Object(c.useState)([]),R=Object(d.a)(I,2),_=R[0],L=R[1],E=Object(c.useState)(!1),q=Object(d.a)(E,2),z=q[0],V=q[1],B=Object(c.useState)([]),K=Object(d.a)(B,2),H=K[0],W=K[1],J=Object(c.useState)([]),G=Object(d.a)(J,2),Z=G[0],Q=G[1],X=function(e){N(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){var t,a;e||((e={isActive:!0,serviceType:null===u||void 0===u||null===(a=u.find((function(e){return e.key===o})))||void 0===a?void 0:a._id}).perKMCharges=[{}],e.extraPerKMCharges=[{}]);S(Object(P.a)({},e)),X(!0),!(null===(t=e)||void 0===t?void 0:t._id)&&fa||e._id&&va?V(!0):V(!1)}}}));var ee=function(e,t){for(var a=w,n=t.split("."),i=0;i<n.length;i++)i+1===n.length?a[n[i]]=e:("undefined"===typeof a[n[i]]&&(1*parseInt(n[i+1])>=0?a[n[i]]=[]:a[n[i]]={}),a=a[n[i]]);S(Object(P.a)({},w))},te=function(){O(!0),ja.save(w,w._id?va:fa).then((function(e){ce(e.message),X(!1),s()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){O(!1)}))};Object(c.useEffect)((function(){W(j.filter((function(e){var t;return(null===(t=e.serviceType)||void 0===t?void 0:t.key)===o})))}),[j]),Object(c.useEffect)((function(){var e,t=(null===(e=H.find((function(e){return e._id===w.rideType})))||void 0===e?void 0:e.allowedVehicleCategoriesDetails)||[];t.find((function(e){return e._id===w.vehicleCategory}))||ee("","vehicleCategory"),Q(t)}),[w.rideType,H]);return Object(c.useEffect)((function(){var e,t=(null===(e=r.find((function(e){return e._id===w.state})))||void 0===e?void 0:e.districts)||[];D((null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name,taluks:e.taluks}})))||[])}),[w.state]),Object(c.useEffect)((function(){var e,t=(null===M||void 0===M||null===(e=M.find((function(e){return e.value===w.district})))||void 0===e?void 0:e.taluks)||[];L(null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name}})))}),[w.district,M]),Object(c.useEffect)((function(){(function(){var e,t;return null===r||void 0===r||null===(e=r.find((function(e){return e._id===w.state})))||void 0===e||null===(t=e.districts.map((function(e){return e._id})))||void 0===t?void 0:t.includes(w.district)})()||ee("","district")}),[w.state]),Object(c.useEffect)((function(){(function(){var e,t,a,n;return null===r||void 0===r||null===(e=r.find((function(e){return e._id===w.state})))||void 0===e||null===(t=e.districts.find((function(e){return e._id===w.district})))||void 0===t||null===(a=t.taluks)||void 0===a||null===(n=a.map((function(e){return e._id})))||void 0===n?void 0:n.includes(w.taluk)})()||ee("","taluk")}),[w.district,M]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(w._id?"Edit":"Add")+" Fare Management",style:{top:20},visible:y,okText:"Save",onOk:te,okButtonProps:{disabled:v||!z,style:{display:z?"inline-block":"none"}},onCancel:function(){X(!1)},destroyOnClose:!0,maskClosable:!1,width:900,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:v,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),te()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!z,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Service Type"}),Object(p.jsx)(ne,{options:u,value:w.serviceType,onChange:function(e){ee(e,"serviceType")},disabled:!0})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Ride Type"}),Object(p.jsx)(ne,{options:H,value:w.rideType,onChange:function(e){ee(e,"rideType")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Vehicle Category"}),Object(p.jsx)(ne,{options:Z,value:w.vehicleCategory,onChange:function(e){ee(e,"vehicleCategory")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"State"}),Object(p.jsx)(ne,{options:r.map((function(e){return{value:e._id,label:e.name}})),value:w.state,onChange:function(e){ee(e,"state")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"District"}),Object(p.jsx)(ne,{options:M||[],value:w.district,onChange:function(e){ee(e,"district")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Taluk"}),Object(p.jsx)(ne,{options:_||[],value:w.taluk,onChange:function(e){ee(e,"taluk")}})]}),["taxi-rentals","cargo-rentals"].includes(null===H||void 0===H||null===(a=H.find((function(e){return e._id===w.rideType})))||void 0===a?void 0:a.key)?Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Package"}),Object(p.jsx)(ne,{options:null===b||void 0===b?void 0:b.filter((function(e){var t;return(null===e||void 0===e||null===(t=e.serviceTypeDetails)||void 0===t?void 0:t.key)===o})),value:w.package,onChange:function(e){ee(e,"package")}})]}):null,Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Base Fare(In \u20b9)"}),Object(p.jsx)(U.a,{value:w.baseFare||"",onChange:function(e){return ee(F.handleFloat(e.target.value),"baseFare")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Booking Fare(In \u20b9)"}),Object(p.jsx)(U.a,{value:w.bookingFare||"",onChange:function(e){return ee(F.handleFloat(e.target.value),"bookingFare")}})]}),["taxi-rentals","cargo-rentals"].includes(null===H||void 0===H||null===(n=H.find((function(e){return e._id===w.rideType})))||void 0===n?void 0:n.key)?Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Extra Per Minute Charge(In \u20b9)"}),Object(p.jsx)(U.a,{value:w.extraPerMinuteCharge||"",onChange:function(e){return ee(F.handleFloat(e.target.value),"extraPerMinuteCharge")}})]}):Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Per Minute Fare(In \u20b9)"}),Object(p.jsx)(U.a,{value:w.perMinuteFare||"",onChange:function(e){return ee(F.handleFloat(e.target.value),"perMinuteFare")}})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Cancel Charge(In \u20b9)"}),Object(p.jsx)(U.a,{value:w.cancelCharge||"",onChange:function(e){return ee(F.handleFloat(e.target.value),"cancelCharge")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Waiting Charge(Per Minute)(In \u20b9)"}),Object(p.jsx)(U.a,{value:w.waitingCharge||"",onChange:function(e){return ee(F.handleFloat(e.target.value),"waitingCharge")}})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Admin Commission Type"}),Object(p.jsx)(ne,{options:[{_id:"flat",title:"FLAT"},{_id:"percentage",title:"PERCENTAGE"}],value:w.adminCommissionType,onChange:function(e){ee(e,"adminCommissionType")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Admin Commission Value"}),Object(p.jsx)(U.a,{value:w.adminCommissionValue||"",onChange:function(e){return ee(F.handleFloat(e.target.value),"adminCommissionValue")}})]}),["taxi-pickup-drop","cargo-daily-ride"].includes(null===H||void 0===H||null===(i=H.find((function(e){return e._id===w.rideType})))||void 0===i?void 0:i.key)?Object(p.jsx)(pa,{perKMCharges:w.perKMCharges,parentKay:"perKMCharges",handleChange:ee}):["taxi-rentals","cargo-rentals"].includes(null===H||void 0===H||null===(l=H.find((function(e){return e._id===w.rideType})))||void 0===l?void 0:l.key)?Object(p.jsx)(pa,{perKMCharges:w.extraPerKMCharges,parentKay:"extraPerKMCharges",handleChange:ee}):null]})})})})})})}));function pa(e){var t=e.perKMCharges,a=e.parentKay,n=e.handleChange;return Object(c.useEffect)((function(){console.log(a,"extraPerKMCharges"===a)}),[a]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{children:Object(p.jsx)(k.a,{orientation:"left",children:"extraPerKMCharges"===a?"Extra Per KM Charge":"Per KM Charge"})}),Object(p.jsx)("div",{className:"col-md-2 form-group",children:Object(p.jsx)("label",{className:"req",children:"Min KM"})}),Object(p.jsx)("div",{className:"col-md-2 form-group",children:Object(p.jsx)("label",{className:"req",children:"Max KM"})}),Object(p.jsx)("div",{className:"col-md-4 form-group",children:Object(p.jsx)("label",{className:"req",children:"Per KM Charge(In \u20b9)"})}),Object(p.jsx)("div",{}),null===t||void 0===t?void 0:t.map((function(e,i){return Object(p.jsxs)(s.a.Fragment,{children:[Object(p.jsx)("div",{className:"col-md-2 form-group",children:Object(p.jsx)(U.a,{placeholder:"Min KM",value:0===i?0:t[i-1].maxKM,disabled:!0})}),Object(p.jsx)("div",{className:"col-md-2 form-group",children:Object(p.jsx)(U.a,{placeholder:"Max KM",value:e.maxKM||"",onChange:function(e){n(F.handleInteger(e.target.value),"".concat(a,".").concat(i,".maxKM"))}})}),Object(p.jsx)("div",{className:"col-md-4 form-group",children:Object(p.jsx)(U.a,{placeholder:"Per KM Charge",value:e.charge||"",onChange:function(e){n(F.handleFloat(e.target.value),"".concat(a,".").concat(i,".charge"))}})}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[i+1===t.length?Object(p.jsx)(N.a,{type:"dashed",onClick:function(){e.maxKM&&e.maxKM>(0===i?0:t[i-1].maxKM)&&e.charge?n([].concat(Object(z.a)(t),[{}]),a):ce("Max KM must be greater than ".concat(0===i?0:t[i-1].maxKM," and Per KM charge is required"),"error")},children:"Add"}):null,i+1===t.length&&0!==i?Object(p.jsx)(N.a,{type:"dashed",className:"mx-2",danger:!0,onClick:function(){t.pop(),n(Object(z.a)(t),a)},children:"Remove"}):null]})]},i)}))]})}var ga={view:F.getModules("viewEmailTemplate"),add:F.getModules("addEmailTemplate"),edit:F.getModules("editEmailTemplate"),delete:F.getModules("deleteEmailTemplate")},ya=ga.view,Na=ga.add,ka=ga.edit,Ca=ga.delete;var wa=Object(c.forwardRef)((function(e,t){var a=e.list,n=Object(c.useState)(!1),i=Object(d.a)(n,2),l=i[0],s=i[1],r=Object(c.useState)(!1),o=Object(d.a)(r,2),u=o[0],j=o[1],b=Object(c.useState)({}),m=Object(d.a)(b,2),f=m[0],v=m[1],O=Object(c.useState)(!1),h=Object(d.a)(O,2),x=h[0],y=h[1],N=function(e){j(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){v(e?Object(P.a)({},e):{deletable:!0}),N(!0),!(null===e||void 0===e?void 0:e._id)&&Na||e._id&&ka?y(!0):y(!1)}}}));var k=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];x&&(a?v(Object(P.a)(Object(P.a)({},f),{},Object(q.a)({},t,e))):f=Object(P.a)(Object(P.a)({},f),{},Object(q.a)({},t,e)))},C=function(){s(!0),ot.saveTeplate(f,f._id?ka:Na).then((function(e){ce(e.message),N(!1),a()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){s(!1)}))};return Object(c.useEffect)((function(){!f.deletable||k(F.removeSpecialChars(f.subject||""),"key")}),[f.subject]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(f._id?"Edit":"Add")+" Email Template",style:{top:20},visible:u,okText:"Save",onOk:C,okButtonProps:{disabled:l||!x,style:{display:x?"inline-block":"none"}},onCancel:function(){N(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:l,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),C()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!x,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Subject"}),Object(p.jsx)(U.a,{value:f.subject||"",onChange:function(e){k(e.target.value,"subject")}})]}),Object(p.jsxs)("div",{className:"col-md-6 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Key"}),Object(p.jsx)(U.a,{value:f.key||"",disabled:!f.deletable,onChange:function(e){!f.deletable||k(F.removeSpecialChars(e.target.value),"key")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Template Design"}),Object(p.jsx)(xt,{height:700,initialValue:f.html||"",onChange:function(e){k(e,"html",!1)}})]})]})})})})})})})),Sa=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"list",value:function(e,t){return L.get(this.baseURL+"list",{params:e,module:t})}},{key:"listAll",value:function(e,t){return L.get(this.baseURL+"list/ALL",{params:e,module:t})}},{key:"save",value:function(e,t){return L.post(this.baseURL+"save",e,{module:t})}},{key:"delete",value:function(e,t){return L.delete("".concat(this.baseURL,"delete/").concat(e),{module:t})}}]),e}();Sa.baseURL="notification/";var Aa={view:F.getModules("viewNotification"),add:F.getModules("addNotification"),edit:F.getModules("editNotification"),delete:F.getModules("deleteNotification")},Ta=Aa.view,Ma=Aa.add,Da=Aa.edit,Fa=Aa.delete;var Ia=Object(c.forwardRef)((function(e,t){var a=e.list,n=e.sdt,i=e.customers,l=e.drivers,s=e.admins,r=e.serviceTypes,o=Object(c.useState)(!1),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)(!1),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)({}),x=Object(d.a)(h,2),y=x[0],N=x[1],k=Object(c.useState)(!1),C=Object(d.a)(k,2),w=C[0],S=C[1],A=Object(c.useState)([]),T=Object(d.a)(A,2),M=T[0],D=T[1],F=Object(c.useState)([]),I=Object(d.a)(F,2),R=I[0],_=I[1],L=Object(c.useState)([]),E=Object(d.a)(L,2),z=E[0],V=E[1],B=Object(c.useState)([]),K=Object(d.a)(B,2),H=K[0],W=K[1],J=function(e){O(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){N(e?Object(P.a)({},e):{deletable:!0}),J(!0),!(null===e||void 0===e?void 0:e._id)&&Ma||e._id?S(!0):S(!1)}}}));var G=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];w&&(a?N(Object(P.a)(Object(P.a)({},y),{},Object(q.a)({},t,e))):y=Object(P.a)(Object(P.a)({},y),{},Object(q.a)({},t,e)))},Z=function(){b(!0),Sa.save(y,Ma).then((function(e){ce(e.message),J(!1),a()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){b(!1)}))};Object(c.useEffect)((function(){"manyCustomers"===y.to||"allCustomers"===y.to?D(i.map((function(e){return{_id:e._id,title:e.firstName+" "+(null===e||void 0===e?void 0:e.lastName)+" - (".concat(e.email,")"),state:e.state,district:e.district,taluk:e.taluk}}))||[]):"manyDrivers"===y.to||"allDrivers"===y.to?D(l.map((function(e){var t;return{_id:e._id,title:e.firstName+" "+(null===e||void 0===e?void 0:e.lastName)+" - (".concat(e.email,")"),state:e.state,district:e.district,taluk:e.taluk,serviceType:null===e||void 0===e||null===(t=e.vehicleDetails)||void 0===t?void 0:t.serviceType}}))||[]):"manyAdmins"===y.to||"allAdmins"===y.to?D(s.map((function(e){return{_id:e._id,title:e.firstName+" "+(null===e||void 0===e?void 0:e.lastName)+" - (".concat(e.email,")"),state:e.state,district:e.district,taluk:e.taluk}}))||[]):D([])}),[y.to]),Object(c.useEffect)((function(){_(M)}),[M]),Object(c.useEffect)((function(){if("allCustomers"===y.to||"allDrivers"===y.to||"allAdmins"===y.to){var e=R.map((function(e){return e._id}));G(e,"userIds")}else G(null,"userIds")}),[R]);return Object(c.useEffect)((function(){var e,t=(null===(e=n.find((function(e){return e._id===y.state})))||void 0===e?void 0:e.districts)||[];V((null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name,taluks:e.taluks}})))||[])}),[y.state]),Object(c.useEffect)((function(){var e,t=(null===z||void 0===z||null===(e=z.find((function(e){return e.value===y.district})))||void 0===e?void 0:e.taluks)||[];W(null===t||void 0===t?void 0:t.map((function(e){return{value:e._id,label:e.name}})))}),[y.district,z]),Object(c.useEffect)((function(){(function(){var e,t;return null===n||void 0===n||null===(e=n.find((function(e){return e._id===y.state})))||void 0===e||null===(t=e.districts.map((function(e){return e._id})))||void 0===t?void 0:t.includes(y.district)})()||G(null,"district")}),[y.state]),Object(c.useEffect)((function(){(function(){var e,t,a,i;return null===n||void 0===n||null===(e=n.find((function(e){return e._id===y.state})))||void 0===e||null===(t=e.districts.find((function(e){return e._id===y.district})))||void 0===t||null===(a=t.taluks)||void 0===a||null===(i=a.map((function(e){return e._id})))||void 0===i?void 0:i.includes(y.taluk)})()||G(null,"taluk")}),[y.district,z]),Object(c.useEffect)((function(){y.taluk?_(M.filter((function(e){var t,a;return y.serviceType&&e.serviceType?(null===e||void 0===e?void 0:e.taluk)===(null===(t=y)||void 0===t?void 0:t.taluk)&&e.serviceType===y.serviceType:(null===e||void 0===e?void 0:e.taluk)===(null===(a=y)||void 0===a?void 0:a.taluk)}))):y.district?_(M.filter((function(e){var t,a;return y.serviceType&&e.serviceType?(null===e||void 0===e?void 0:e.district)===(null===(t=y)||void 0===t?void 0:t.district)&&e.serviceType===y.serviceType:(null===e||void 0===e?void 0:e.district)===(null===(a=y)||void 0===a?void 0:a.district)}))):y.state?_(M.filter((function(e){var t,a;return y.serviceType&&e.serviceType?(null===e||void 0===e?void 0:e.state)===(null===(t=y)||void 0===t?void 0:t.state)&&e.serviceType===y.serviceType:(null===e||void 0===e?void 0:e.state)===(null===(a=y)||void 0===a?void 0:a.state)}))):y.serviceType?_(M.filter((function(e){return!e.serviceType||e.serviceType===y.serviceType}))):_(M)}),[y.serviceType,y.state,y.district,y.taluk,M]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:"Send Notification",style:{top:20},visible:v,okText:Object(p.jsxs)("div",{className:"d-flex",children:["Send ",Object(p.jsx)(vt.a,{className:"my-auto mx-1"})]}),onOk:Z,okButtonProps:{disabled:j||!w,style:{display:w?"inline-block":"none"}},onCancel:function(){J(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:j,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),Z()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!w,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"State"}),Object(p.jsx)(ne,{placeholder:"All States",allowClear:!0,options:n.map((function(e){return{value:e._id,label:e.name}})),value:y.state,onChange:function(e){G(e,"state")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"District"}),Object(p.jsx)(ne,{placeholder:"All Districts",allowClear:!0,options:z||[],value:y.district,onChange:function(e){G(e,"district")}})]}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Taluk"}),Object(p.jsx)(ne,{placeholder:"All Taluks",allowClear:!0,options:H||[],value:y.taluk,onChange:function(e){G(e,"taluk")}})]}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Send To"}),Object(p.jsx)(ne,{options:[{_id:"manyCustomers",title:"Many Customers"},{_id:"manyDrivers",title:"Many Drivers"},{_id:"manyAdmins",title:"Many Admins"},{_id:"allCustomers",title:"All Customers"},{_id:"allDrivers",title:"All Drivers"},{_id:"allAdmins",title:"All Admins"}],value:y.to,onChange:function(e){G(e,"to")}})]}),["manyDrivers","allDrivers"].includes(y.to)?Object(p.jsxs)("div",{className:"col-md-4 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Service Type"}),Object(p.jsx)(ne,{allowClear:!0,placeholder:"All Service Types",options:r||[],value:y.serviceType,onChange:function(e){G(e,"serviceType")}})]}):null,["manyCustomers","manyDrivers","manyAdmins"].includes(y.to)?Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Select Users"}),Object(p.jsx)(ne,{mode:"multiple",placeholder:"Select Users",options:R||[],value:y.userIds,onChange:function(e){G(e,"userIds")}})]}):null,Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Content"}),Object(p.jsx)(U.a.TextArea,{value:y.content,onChange:function(e){G(e.target.value,"content")}})]})]})})})})})})})),Ra={view:F.getModules("viewTaluk"),add:F.getModules("addTaluk"),edit:F.getModules("editTaluk"),delete:F.getModules("deleteTaluk")},_a=Ra.view,La=Ra.add,Ea=Ra.edit,qa=Ra.delete;function Pa(e){var t=e.districtId,a=void 0===t?null:t,n=Object(c.useState)([]),i=Object(d.a)(n,2),l=i[0],s=i[1],r=Object(c.useState)(!0),o=Object(d.a)(r,2),u=o[0],j=o[1],b=Object(c.useState)([]),m=Object(d.a)(b,2),f=m[0],v=m[1],O=Object(c.useState)([]),h=Object(d.a)(O,2),x=h[0],g=h[1],y=Object(c.useRef)(),k=Object(c.useState)({key:"",page:1,limit:20,total:0,district:a}),C=Object(d.a)(k,2),w=C[0],S=C[1],A=[{title:"Name",dataIndex:"name"},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:90,hidden:!La&&!Ea&&!qa&&!_a,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[Ea?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){y.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,!Ea&&_a?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){y.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(pe.a,{})})}):null,qa?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{title:"Are you sure to delete this taluk?",onConfirm:function(){return M(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(ge.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),T=function(e){"undefined"===typeof e&&(e=w),j(!0),we.listTaluk(e,_a).then((function(t){var a,n,i=e;i.total=(null===(a=t.result)||void 0===a?void 0:a.total)||0,S(Object(P.a)({},i)),s((null===(n=t.result)||void 0===n?void 0:n.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){j(!1)}))},M=function(e){we.deleteTaluk(e,qa).then((function(e){ce(e.message),T()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){T(),we.listAllState().then((function(e){v(e.result.data||[])})),we.listAllDistrict().then((function(e){g(e.result.data||[])}))}),[]),Object(p.jsxs)(p.Fragment,{children:[a?null:Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Taluk List"})}),Object(p.jsx)("div",{className:"m-2 p-2",children:Object(p.jsx)(ve,{data:l,columns:A,parentSData:w,loading:u,formRef:y,list:T,searchPlaceholder:"Name",addNew:La})}),Object(p.jsx)(Ua,{ref:y,list:T,states:f,districts:x,districtId:a})]})}var Ua=Object(c.forwardRef)((function(e,t){var a=e.list,n=e.states,i=e.districts,l=e.districtId,s=Object(c.useState)(!1),r=Object(d.a)(s,2),o=r[0],u=r[1],j=Object(c.useState)(!1),b=Object(d.a)(j,2),m=b[0],f=b[1],v=Object(c.useState)({}),O=Object(d.a)(v,2),h=O[0],x=O[1],y=Object(c.useState)([]),N=Object(d.a)(y,2),k=N[0],C=N[1],w=Object(c.useState)(!1),S=Object(d.a)(w,2),A=S[0],T=S[1],M=function(e){f(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){var t,a;e||((e={}).isActive=!0,e.state=null===(a=i.find((function(e){return e._id===l})))||void 0===a?void 0:a.state,e.district=l);x(Object(P.a)({},e)),M(!0),!(null===(t=e)||void 0===t?void 0:t._id)&&La||e._id&&Ea?T(!0):T(!1)}}}));var D=function(e,t){x(Object(P.a)(Object(P.a)({},h),{},Object(q.a)({},t,e)))};Object(c.useEffect)((function(){D(F.removeSpecialChars(h.name||""),"key")}),[h.name]),Object(c.useEffect)((function(){h.state?C(null===i||void 0===i?void 0:i.filter((function(e){return e.state===h.state}))):C([])}),[h.state]);var I=function(){u(!0),we.saveTaluk(h,h._id?Ea:La).then((function(e){ce(e.message),M(!1),a()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){u(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(h._id?"Edit":"Add")+" Taluk",style:{top:20},visible:m,okText:"Save",onOk:I,okButtonProps:{disabled:o||!A,style:{display:A?"inline-block":"none"}},onCancel:function(){M(!1)},destroyOnClose:!0,maskClosable:!1,width:400,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:o,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),I()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!A,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Name"}),Object(p.jsx)(U.a,{value:h.name||"",onChange:function(e){return D(e.target.value,"name")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"State"}),Object(p.jsx)(ne,{disabled:l,options:n||[],value:h.state,onChange:function(e){D(e,"state")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"District"}),Object(p.jsx)(ne,{disabled:l,options:k||[],value:h.district,onChange:function(e){D(e,"district")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ne,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:h.isActive,onChange:function(e){D(e,"isActive")}})]})]})})})})})})})),Ya={view:F.getModules("viewDistrict"),add:F.getModules("addDistrict"),edit:F.getModules("editDistrict"),delete:F.getModules("deleteDistrict")},za=Ya.view,Va=Ya.add,Ba=Ya.edit,Ka=Ya.delete;function Ha(e){var t=e.stateId,a=void 0===t?null:t,n=Object(c.useState)([]),i=Object(d.a)(n,2),l=i[0],s=i[1],r=Object(c.useState)(!0),o=Object(d.a)(r,2),u=o[0],j=o[1],b=Object(c.useState)([]),m=Object(d.a)(b,2),f=m[0],v=m[1],O=Object(c.useRef)(),h=Object(c.useRef)(),x=Object(c.useState)({key:"",page:1,limit:20,total:0,state:a}),g=Object(d.a)(x,2),y=g[0],k=g[1],C=[{title:"Name",dataIndex:"name"},{title:"Taluks",dataIndex:"name",width:100,render:function(e,t){return Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){h.current.openForm(t)},children:"Taluks"})}},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:90,hidden:!Va&&!Ba&&!Ka&&!za,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[Ba?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){O.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,!Ba&&za?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){O.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(pe.a,{})})}):null,Ka?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{title:"Are you sure to delete this district?",onConfirm:function(){return S(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(ge.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),w=function(e){"undefined"===typeof e&&(e=y),j(!0),we.listDistrict(e,za).then((function(t){var a,n,i=e;i.total=(null===(a=t.result)||void 0===a?void 0:a.total)||0,k(Object(P.a)({},i)),s((null===(n=t.result)||void 0===n?void 0:n.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){j(!1)}))},S=function(e){we.deleteDistrict(e,Ka).then((function(e){ce(e.message),w()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){w(),we.listAllState().then((function(e){v(e.result.data||[])}))}),[]),Object(p.jsxs)(p.Fragment,{children:[a?null:Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"District List"})}),Object(p.jsx)("div",{className:"m-2 p-2",children:Object(p.jsx)(ve,{data:l,columns:C,parentSData:y,loading:u,formRef:O,list:w,searchPlaceholder:"Name",addNew:Va})}),Object(p.jsx)(Wa,{ref:O,list:w,states:f,stateId:a}),Object(p.jsx)(Ja,{ref:h})]})}var Wa=Object(c.forwardRef)((function(e,t){var a=e.list,n=e.states,i=e.stateId,l=Object(c.useState)(!1),s=Object(d.a)(l,2),r=s[0],o=s[1],u=Object(c.useState)(!1),j=Object(d.a)(u,2),b=j[0],m=j[1],f=Object(c.useState)({}),v=Object(d.a)(f,2),O=v[0],h=v[1],x=Object(c.useState)(!1),y=Object(d.a)(x,2),N=y[0],k=y[1],C=function(e){m(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){h(e?Object(P.a)({},e):{isActive:!0,state:i}),C(!0),!(null===e||void 0===e?void 0:e._id)&&Va||e._id&&Ba?k(!0):k(!1)}}}));var w=function(e,t){h(Object(P.a)(Object(P.a)({},O),{},Object(q.a)({},t,e)))};Object(c.useEffect)((function(){w(F.removeSpecialChars(O.name||""),"key")}),[O.name]);var S=function(){o(!0),we.saveDistrict(O,O._id?Ba:Va).then((function(e){ce(e.message),C(!1),a()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){o(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(O._id?"Edit":"Add")+" District",style:{top:20},visible:b,okText:"Save",onOk:S,okButtonProps:{disabled:r||!N,style:{display:N?"inline-block":"none"}},onCancel:function(){C(!1)},destroyOnClose:!0,maskClosable:!1,width:400,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:r,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),S()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!N,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Name"}),Object(p.jsx)(U.a,{value:O.name||"",onChange:function(e){return w(e.target.value,"name")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"State"}),Object(p.jsx)(ne,{disabled:i,options:n||[],value:O.state,onChange:function(e){w(e,"state")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ne,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:O.isActive,onChange:function(e){w(e,"isActive")}})]})]})})})})})})})),Ja=Object(c.forwardRef)((function(e,t){var a=Object(c.useState)(!1),n=Object(d.a)(a,2),i=n[0],l=n[1],s=Object(c.useState)({}),r=Object(d.a)(s,2),o=r[0],u=r[1],j=function(e){l(e)};return Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){u(e?Object(P.a)({},e):{isActive:!0}),j(!0)}}})),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:Object(p.jsxs)(p.Fragment,{children:["Taluk list of ",Object(p.jsx)("span",{className:"text-danger",children:o.name})]}),style:{top:20},visible:i,footer:null,onCancel:function(){j(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body-overflow",children:Object(p.jsx)(Pa,{districtId:o._id})})})})),Ga={view:F.getModules("viewState"),add:F.getModules("addState"),edit:F.getModules("editState"),delete:F.getModules("deleteState")},Za=Ga.view,Qa=Ga.add,Xa=Ga.edit,$a=Ga.delete;var en=Object(c.forwardRef)((function(e,t){var a=e.list,n=Object(c.useState)(!1),i=Object(d.a)(n,2),l=i[0],s=i[1],r=Object(c.useState)(!1),o=Object(d.a)(r,2),u=o[0],j=o[1],b=Object(c.useState)({}),m=Object(d.a)(b,2),f=m[0],v=m[1],O=Object(c.useState)(!1),h=Object(d.a)(O,2),x=h[0],y=h[1],N=function(e){j(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){v(e?Object(P.a)({},e):{isActive:!0}),N(!0),!(null===e||void 0===e?void 0:e._id)&&Qa||e._id&&Xa?y(!0):y(!1)}}}));var k=function(e,t){v(Object(P.a)(Object(P.a)({},f),{},Object(q.a)({},t,e)))};Object(c.useEffect)((function(){k(F.removeSpecialChars(f.name||""),"key")}),[f.name]);var C=function(){s(!0),we.saveState(f,f._id?Xa:Qa).then((function(e){ce(e.message),N(!1),a()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){s(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(f._id?"Edit":"Add")+" State",style:{top:20},visible:u,okText:"Save",onOk:C,okButtonProps:{disabled:l||!x,style:{display:x?"inline-block":"none"}},onCancel:function(){N(!1)},destroyOnClose:!0,maskClosable:!1,width:400,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:l,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),C()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!x,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Name"}),Object(p.jsx)(U.a,{value:f.name||"",onChange:function(e){return k(e.target.value,"name")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ne,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:f.isActive,onChange:function(e){k(e,"isActive")}})]})]})})})})})})})),tn=Object(c.forwardRef)((function(e,t){var a=Object(c.useState)(!1),n=Object(d.a)(a,2),i=n[0],l=n[1],s=Object(c.useState)({}),r=Object(d.a)(s,2),o=r[0],u=r[1],j=function(e){l(e)};return Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){u(e?Object(P.a)({},e):{isActive:!0}),j(!0)}}})),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:Object(p.jsxs)(p.Fragment,{children:["District list of ",Object(p.jsx)("span",{className:"text-danger",children:o.name})]}),style:{top:20},visible:i,footer:null,onCancel:function(){j(!1)},destroyOnClose:!0,maskClosable:!1,width:1600,className:"app-modal-body-overflow",children:Object(p.jsx)(Ha,{stateId:o._id})})})})),an={view:F.getModules("viewPackage"),add:F.getModules("addPackage"),edit:F.getModules("editPackage"),delete:F.getModules("deletePackage")},nn=an.view,ln=an.add,cn=an.edit,sn=an.delete;var rn=Object(c.forwardRef)((function(e,t){var a=e.list,n=e.serviceTypes,i=Object(c.useState)(!1),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!1),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)({}),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)(!1),x=Object(d.a)(h,2),y=x[0],N=x[1],k=function(e){b(e)};Object(c.useImperativeHandle)(t,(function(){return{openForm:function(e){O(e?Object(P.a)({},e):{isActive:!0}),k(!0),!(null===e||void 0===e?void 0:e._id)&&ln||e._id&&cn?N(!0):N(!1)}}}));var C=function(e,t){O(Object(P.a)(Object(P.a)({},v),{},Object(q.a)({},t,e)))},w=function(){r(!0),ja.savePackage(v,v._id?cn:ln).then((function(e){ce(e.message),k(!1),a()})).catch((function(e){"object"===typeof e.message?ce(e.message[Object.keys(e.message)[0]],"error"):ce(e.message,"error")})).finally((function(){r(!1)}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)($.a,{title:(v._id?"Edit":"Add")+" Package",style:{top:20},visible:j,okText:"Save",onOk:w,okButtonProps:{disabled:s||!y,style:{display:y?"inline-block":"none"}},onCancel:function(){k(!1)},destroyOnClose:!0,maskClosable:!1,width:400,className:"app-modal-body-overflow",children:Object(p.jsx)(g.a,{spinning:s,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("form",{onSubmit:function(e){e.preventDefault(),w()},autoComplete:"off",spellCheck:"false",children:Object(p.jsx)("fieldset",{className:"",disabled:!y,children:Object(p.jsxs)("div",{className:"row mingap",children:[Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Service Type"}),Object(p.jsx)(ne,{options:n,value:v.serviceType,onChange:function(e){C(e,"serviceType")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Package Name"}),Object(p.jsx)(U.a,{value:v.name||"",onChange:function(e){return C(e.target.value,"name")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Distance (In KM)"}),Object(p.jsx)(U.a,{value:v.distance||"",onChange:function(e){return C(F.handleFloat(e.target.value),"distance")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Time (In Hour)"}),Object(p.jsx)(U.a,{value:v.time||"",onChange:function(e){return C(F.handleFloat(e.target.value),"time")}})]}),Object(p.jsxs)("div",{className:"col-md-12 form-group",children:[Object(p.jsx)("label",{className:"req",children:"Status"}),Object(p.jsx)(ne,{options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}],value:v.isActive,onChange:function(e){C(e,"isActive")}})]})]})})})})})})})),on=F.getModules(),dn=F.isSuperAdmin();Array.prototype.includesAny=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.some((function(t){return e.includes(t)}))};var un={leftNav:[{name:"Dashboard",icon:function(){return Object(p.jsx)(j.a,{})},url:"/",component:function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{style:{height:"100vh"},children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Dashboard"})}),Object(p.jsx)("h2",{className:"text-secondary",children:"Dashboard Comming Soon..."})]})})}},{name:"Modules",icon:function(){return Object(p.jsx)(j.a,{})},url:"/modules",component:Ke},{name:"Tabs",url:"/vehicles",icon:function(){return Object(p.jsx)(b.a,{})},component:function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{className:"m-21 border p-2",children:Object(p.jsx)(Je,{})})})}},{name:"States, Districts & Taluks",baseURL:"/sdt",modules:[ca.view,Jt.view,ea.view,Qe.view,_t.view],icon:function(){return Object(p.jsx)(m.a,{})},subMenus:[{name:"States",url:"/states",component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)(!0),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useRef)(),u=Object(c.useRef)(),j=Object(c.useState)({key:"",page:1,limit:20,total:0}),b=Object(d.a)(j,2),m=b[0],f=b[1],v=[{title:"Name",dataIndex:"name"},{title:"Districts",dataIndex:"name",width:100,render:function(e,t){return Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){u.current.openForm(t)},children:"Districts"})}},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:90,hidden:!Qa&&!Xa&&!$a&&!Za||!F.isSuperAdmin(),render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[Xa?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){o.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,!Xa&&Za?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){o.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(pe.a,{})})}):null,$a?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{title:"Are you sure to delete this state?",onConfirm:function(){return h(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(ge.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),O=function(e){"undefined"===typeof e&&(e=m),r(!0),we.listState(e,Za).then((function(t){var a,i,l=e;l.total=(null===(a=t.result)||void 0===a?void 0:a.total)||0,f(Object(P.a)({},l)),n((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){r(!1)}))},h=function(e){we.deleteState(e,$a).then((function(e){ce(e.message),O()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){O()}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"State List"})}),Object(p.jsx)("div",{className:"m-2 p-2",children:Object(p.jsx)(ve,{data:a,columns:v,parentSData:m,loading:s,formRef:o,list:O,searchPlaceholder:"Name",addNew:Qa&&F.isSuperAdmin()})}),Object(p.jsx)(en,{ref:o,list:O}),Object(p.jsx)(tn,{ref:u})]})},modules:[Ga.view]},{name:"Districts",url:"/districts",component:Ha,modules:[Ya.view]},{name:"Taluks",url:"/taluks",component:Pa,modules:[Ra.view]}].filter((function(e){var t;return dn||(null===(t=e.modules)||void 0===t?void 0:t.includesAny(on))}))},{name:"Vehicle",baseURL:"/vehicle",modules:[ca.view,Jt.view,ea.view,Qe.view,_t.view],icon:function(){return Object(p.jsx)(b.a,{})},subMenus:[{name:"Color",url:"/color",component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)(!0),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useRef)(),u=Object(c.useState)({key:"",page:1,limit:20,total:0}),j=Object(d.a)(u,2),b=j[0],m=j[1],f=[{title:"Name",dataIndex:"name"},{title:"Color",dataIndex:"code",width:60,render:function(e){return Object(p.jsx)(G.a,{style:{backgroundColor:e},children:"\xa0"})}},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:90,hidden:!ra&&!oa&&!da&&!sa,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[oa?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){o.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,!oa&&sa?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){o.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(pe.a,{})})}):null,da?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{title:"Are you sure to delete this color?",onConfirm:function(){return O(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(ge.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),v=function(e){"undefined"===typeof e&&(e=b),r(!0),Ge.listColor(e,sa).then((function(t){var a,i,l=e;l.total=(null===(a=t.result)||void 0===a?void 0:a.total)||0,m(Object(P.a)({},l)),n((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){r(!1)}))},O=function(e){Ge.deleteColor(e,da).then((function(e){ce(e.message),v()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){v()}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Color List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(ve,{data:a,columns:f,parentSData:b,loading:s,formRef:o,list:v,searchPlaceholder:"Name or Code",addNew:ra})}),Object(p.jsx)(ua,{ref:o,list:v})]})},modules:[ca.view]},{name:"Make",url:"/make",component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)(!0),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useRef)(),u=Object(c.useState)({key:"",page:1,limit:20,total:0}),j=Object(d.a)(u,2),b=j[0],m=j[1],f=[{title:"Name",dataIndex:"name"},{title:"Key",dataIndex:"key",width:200},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:90,hidden:!Zt&&!Qt&&!Xt&&!Gt,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[Qt?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){o.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,!Qt&&Gt?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){o.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(pe.a,{})})}):null,Xt?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{title:"Are you sure to delete this make?",onConfirm:function(){return O(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(ge.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),v=function(e){"undefined"===typeof e&&(e=b),r(!0),Ge.listMake(e,Gt).then((function(t){var a,i,l=e;l.total=(null===(a=t.result)||void 0===a?void 0:a.total)||0,m(Object(P.a)({},l)),n((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){r(!1)}))},O=function(e){Ge.deleteMake(e,Xt).then((function(e){ce(e.message),v()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){v()}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Make List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(ve,{data:a,columns:f,parentSData:b,loading:s,formRef:o,list:v,searchPlaceholder:"Name or Key",addNew:Zt})}),Object(p.jsx)($t,{ref:o,list:v})]})},modules:[Jt.view]},{name:"Make Model",url:"/make-model",component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)(!0),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)([]),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useRef)(),f=Object(c.useState)({key:"",page:1,limit:20,total:0}),v=Object(d.a)(f,2),O=v[0],h=v[1],x=[{title:"Name",dataIndex:"name"},{title:"Key",dataIndex:"key",width:200},{title:"Make",dataIndex:"makeDetails",width:200,render:function(e){return Object(p.jsx)(G.a,{children:e.name})}},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:90,hidden:!aa&&!na&&!ia&&!ta,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[na?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){m.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,!na&&ta?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){m.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(pe.a,{})})}):null,ia?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{title:"Are you sure to delete this make model?",onConfirm:function(){return y(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(ge.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),g=function(e){"undefined"===typeof e&&(e=O),r(!0),Ge.listMakeModel(e,ta).then((function(t){var a,i,l=e;l.total=(null===(a=t.result)||void 0===a?void 0:a.total)||0,h(Object(P.a)({},l)),n((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){r(!1)}))},y=function(e){Ge.deleteMakeModel(e,ia).then((function(e){ce(e.message),g()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){g(),Ge.listAllMake().then((function(e){b(e.result.data)}))}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Make Model List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(ve,{data:a,columns:x,parentSData:O,loading:s,formRef:m,list:g,searchPlaceholder:"Name or Key",addNew:aa})}),Object(p.jsx)(la,{ref:m,list:g,makes:j})]})},modules:[ea.view]},{name:"Category",url:"/category",component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)([]),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!0),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)([]),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useRef)(),x=Object(c.useState)({key:"",page:1,limit:20,total:0}),g=Object(d.a)(x,2),k=g[0],C=g[1],w=[{title:"Image",dataIndex:"image",width:100,render:function(e){return Object(p.jsx)(y.a,{height:30,preview:{mask:"View"},src:null===e||void 0===e?void 0:e.url})}},{title:"Name",dataIndex:"name"},{title:"Slug",dataIndex:"slug",width:200},{title:"Service Type",dataIndex:"serviceTypeDetails",width:100,render:function(e,t){return"cargo"===(null===e||void 0===e?void 0:e.key)?Object(p.jsx)(G.a,{color:"cyan",children:null===e||void 0===e?void 0:e.name}):"taxi"===(null===e||void 0===e?void 0:e.key)?Object(p.jsx)(G.a,{color:"purple",children:null===e||void 0===e?void 0:e.name}):Object(p.jsx)(G.a,{children:null===e||void 0===e?void 0:e.name})}},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:90,hidden:!$e&&!et&&!tt&&!Xe,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[et?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){h.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,!et&&Xe?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){h.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(pe.a,{})})}):null,tt?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{title:"Are you sure to delete this category?",onConfirm:function(){return A(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(ge.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),S=function(e){"undefined"===typeof e&&(e=k),b(!0),Ge.listCategory(e,Xe).then((function(t){var a,i,l=e;l.total=(null===(a=t.result)||void 0===a?void 0:a.total)||0,C(Object(P.a)({},l)),n((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){b(!1)}))},A=function(e){Ge.deleteCategory(e,tt).then((function(e){ce(e.message),S()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){O([{type:"dropdown",key:"serviceType",placeholder:"Service Type",className:"w200 mx-1",options:s}])}),[s]),Object(c.useEffect)((function(){S(),Ze.listServiceType().then((function(e){r(e.result.data)}))}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Vehicle Category List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(ve,{data:a,columns:w,filters:v,parentSData:k,loading:j,formRef:h,list:S,searchPlaceholder:"Name or Slug",addNew:$e})}),Object(p.jsx)(at,{ref:h,list:S,serviceTypes:s})]})},modules:[Qe.view]},{name:"Vehicle",url:"/vehicle",component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)([]),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)(!0),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)(),x=Object(d.a)(h,2),g=x[0],k=x[1],C=Object(c.useState)([]),w=Object(d.a)(C,2),S=w[0],A=w[1],T=Object(c.useState)([]),M=Object(d.a)(T,2),D=M[0],I=M[1],R=Object(c.useState)([]),_=Object(d.a)(R,2),L=_[0],E=_[1],q=Object(c.useState)([]),U=Object(d.a)(q,2),Y=U[0],z=U[1],V=Object(c.useRef)(),B=Object(c.useRef)(),H=Object(c.useState)({key:"",page:1,limit:20,total:0}),W=Object(d.a)(H,2),J=W[0],Z=W[1],Q=[{title:"Image",dataIndex:"image",width:100,render:function(e){return Object(p.jsx)(y.a,{height:30,preview:{mask:"View"},src:null===e||void 0===e?void 0:e.url})}},{title:"Vehicle Id",dataIndex:"vehicleId",width:80},{title:"Vehicle Number",dataIndex:"vehicleNumber",width:120},{title:"Name",dataIndex:"name"},{title:"Capacity",dataIndex:"availableCapacity",width:80,render:function(e,t){return e?e+" Tons":t.availableSeats+" Seats"}},{title:"State",dataIndex:"stateDetails",width:120,render:function(e){return null===e||void 0===e?void 0:e.name}},{title:"District",dataIndex:"districtDetails",width:120,render:function(e){return null===e||void 0===e?void 0:e.name}},{title:"Taluk",dataIndex:"talukDetails",width:120,render:function(e){return null===e||void 0===e?void 0:e.name}},{title:"Created At",dataIndex:"createdAt",render:function(e){return K()(e).format("MMMM D, YYYY")}},{title:"Driver",dataIndex:"",width:120,hidden:!F.getModules("viewDriver"),render:function(e,t){var a,n;return Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){B.current.openForm(t)},children:Object(p.jsxs)("span",{className:"d-flex",children:[Object(p.jsx)("span",{children:"Driver"}),Object(p.jsx)("span",{className:"d-flex mx-1 "+((null===t||void 0===t?void 0:t.driverDetails)?(null===t||void 0===t||null===(a=t.driverDetails)||void 0===a?void 0:a.isApproved)?"text-success":"text-warning":"text-danger"),children:(null===t||void 0===t?void 0:t.driverDetails)?(null===t||void 0===t||null===(n=t.driverDetails)||void 0===n?void 0:n.isApproved)?Object(p.jsx)(it.a,{className:"my-auto"}):Object(p.jsx)(lt.a,{className:"my-auto"}):Object(p.jsx)(nt.a,{className:"my-auto"})})]})})}},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:90,hidden:!Et&&!qt&&!Pt&&!Lt,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[qt?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){V.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,!qt&&Lt?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){V.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(pe.a,{})})}):null,Pt?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{title:"Are you sure to delete this vehicle?",onConfirm:function(){return $(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(ge.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),X=function(e){"undefined"===typeof e&&(e=J),O(!0),Ge.list(e,Lt).then((function(t){var a,i,l=e;l.total=(null===(a=t.result)||void 0===a?void 0:a.total)||0,Z(Object(P.a)({},l)),n((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){O(!1)}))},$=function(e){Ge.delete(e,Pt).then((function(e){ce(e.message),X()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){X(),Ze.listServiceType().then((function(e){r(e.result.data)})),ct.listAllRideType({},"viewRideType").then((function(e){b(e.result.data)})),Ge.listAllMake({models:1,active:1,modelActive:1},"viewMake").then((function(e){k(e.result.data)})),Ge.listAllColor({},"viewColor").then((function(e){A(e.result.data)})),we.listSdt("ignoreModule").then((function(e){I(e.result.data||[])}))}),[]),Object(c.useEffect)((function(){D.length&&z(D.map((function(e){return{_id:e._id,name:e.name,districts:e.districts}})))}),[D]),Object(c.useEffect)((function(){E([{type:"dropdown",key:"serviceType",placeholder:"Service Type",className:"w200 mx-1",options:s},{type:"dropdown",key:"driverApproved",placeholder:"Driver Status",className:"w200 mx-1",options:[{value:!0,label:"Approved"},{value:!1,label:"Not Approved"}]},{type:"dropdown",key:"state",placeholder:"State",className:"w200 mx-1",options:Y}])}),[s,Y]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Vehicle List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(ve,{data:a,columns:Q,filters:L,parentSData:J,loading:v,formRef:V,list:X,searchPlaceholder:"Vehicle id or Name or Number",addNew:Et})}),Object(p.jsx)(Ut,{ref:V,list:X,serviceType:s,rideTypes:j,makes:g,colors:S,sdt:D}),Object(p.jsx)(Yt,{ref:B})]})},modules:[_t.view]}].filter((function(e){var t;return dn||(null===(t=e.modules)||void 0===t?void 0:t.includesAny(on))}))},{name:"Ride",baseURL:"/ride",modules:[zt.view],icon:function(){return Object(p.jsx)(b.a,{})},subMenus:[{name:"Type",url:"/type",component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)(!0),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)([]),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)([]),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)([]),x=Object(d.a)(h,2),g=x[0],k=x[1],C=Object(c.useRef)(),w=Object(c.useState)({key:"",page:1,limit:20,total:0}),S=Object(d.a)(w,2),A=S[0],T=S[1],M=[{title:"Image",dataIndex:"image",width:100,render:function(e){return Object(p.jsx)(y.a,{height:30,preview:{mask:"View"},src:null===e||void 0===e?void 0:e.url})}},{title:"Name",dataIndex:"name",width:200},{title:"Allowed Vehicle Categories",dataIndex:"allowedVehicleCategoriesDetails",render:function(e,t){return e.map((function(e,t){return Object(p.jsx)(G.a,{color:t%4===0?"blue":t%4===1?"gold":t%4===2?"cyan":"pink",children:e.name},t)}))}},{title:"Service Type",dataIndex:"serviceType",width:100,render:function(e){return"cargo"===e.key?Object(p.jsx)(G.a,{color:"magenta",children:e.name}):Object(p.jsx)(G.a,{color:"orange",children:e.name})}},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:60,hidden:!Bt&&!Kt&&!Ht&&!Vt,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[Kt?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){C.current.openForm(Object(P.a)({serviceType:null===A||void 0===A?void 0:A.serviceType},e))},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,!Kt&&Vt?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){C.current.openForm(Object(P.a)({serviceType:null===A||void 0===A?void 0:A.serviceType},e))},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(pe.a,{})})}):null]})}}].filter((function(e){return!e.hidden})),D=function(e){"undefined"===typeof e&&(e=A),r(!0),ct.listRideType(e,Vt).then((function(t){var a,i,l=e;l.total=(null===(a=t.result)||void 0===a?void 0:a.total)||0,T(Object(P.a)({},l)),n((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){r(!1)}))};return Object(c.useEffect)((function(){D(),Ze.listServiceType().then((function(e){b(e.result.data)})),Ge.listAllCategory({},"viewVehicleCategory").then((function(e){k(e.result.data)}))}),[]),Object(c.useEffect)((function(){O([{type:"dropdown",key:"serviceType",placeholder:"Service Type",className:"w200 mx-1",options:j}])}),[j]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Ride Type List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(ve,{data:a,columns:M,parentSData:A,filters:v,loading:s,formRef:C,list:D,searchPlaceholder:"Name or Slug",addNew:!1})}),Object(p.jsx)(Wt,{ref:C,list:D,serviceType:j,vehicleCategories:g})]})},modules:[zt.view]}].filter((function(e){var t;return dn||(null===(t=e.modules)||void 0===t?void 0:t.includesAny(on))}))},{name:"Fare Management",baseURL:"/fare-management",modules:[ba.view],icon:function(){return Object(p.jsx)(b.a,{})},subMenus:[{name:"Rental Package",url:"/rental-package",component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)([]),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!0),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)([]),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useRef)(),x=Object(c.useState)({key:"",page:1,limit:20,total:0}),g=Object(d.a)(x,2),y=g[0],k=g[1],C=[{title:"Service Name",dataIndex:"name"},{title:"Distance",dataIndex:"distance",width:100},{title:"Time",dataIndex:"time",width:100},{title:"Service Type",dataIndex:"serviceTypeDetails",width:100,render:function(e,t){return"cargo"===(null===e||void 0===e?void 0:e.key)?Object(p.jsx)(G.a,{color:"cyan",children:null===e||void 0===e?void 0:e.name}):"taxi"===(null===e||void 0===e?void 0:e.key)?Object(p.jsx)(G.a,{color:"purple",children:null===e||void 0===e?void 0:e.name}):Object(p.jsx)(G.a,{children:null===e||void 0===e?void 0:e.name})}},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:90,hidden:!ln&&!cn&&!sn&&!nn,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[cn?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){h.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,!cn&&nn?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){h.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(pe.a,{})})}):null,sn?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{title:"Are you sure to delete this package?",onConfirm:function(){return S(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(ge.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),w=function(e){"undefined"===typeof e&&(e=y),b(!0),ja.listPackage(e,nn).then((function(t){var a,i,l=e;l.total=(null===(a=t.result)||void 0===a?void 0:a.total)||0,k(Object(P.a)({},l)),n((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){b(!1)}))},S=function(e){ja.deletePackage(e,sn).then((function(e){ce(e.message),w()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){O([{type:"dropdown",key:"serviceType",placeholder:"Service Type",className:"w200 mx-1",options:s}])}),[s]),Object(c.useEffect)((function(){w(),Ze.listServiceType().then((function(e){r(e.result.data)}))}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Package List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(ve,{data:a,columns:C,filters:v,parentSData:y,loading:j,formRef:h,list:w,searchPlaceholder:"Name or Slug",addNew:ln})}),Object(p.jsx)(rn,{ref:h,list:w,serviceTypes:s})]})},modules:[an.view]},{name:"Taxi Fare Management",url:"/taxi",component:ha,modules:[ba.view]},{name:"Cargo Fare Management",url:"/cargo",component:function(){return ha({activeServiceType:"cargo"})},modules:[ba.view]}].filter((function(e){var t;return dn||(null===(t=e.modules)||void 0===t?void 0:t.includesAny(on))}))},{name:"Drivers",url:"/drivers",icon:function(){return Object(p.jsx)(f.a,{})},component:Dt,modules:[wt.view]},{name:"Admins",url:"/users",icon:function(){return Object(p.jsx)(f.a,{})},component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)([]),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!0),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useRef)(),f=Object(c.useState)({key:"",page:1,limit:20,total:0}),v=Object(d.a)(f,2),O=v[0],h=v[1],x=[{title:"Name",dataIndex:"firstName",render:function(e,t){return t.firstName+" "+t.lastName}},{title:"User Type",dataIndex:"type",width:150,render:function(e){return Object(p.jsx)(G.a,{color:"stateAdmin"===e?"geekblue":"districtAdmin"===e?"magenta":"talukAdmin"===e?"orange":"",children:"stateAdmin"===e?"State Admin":"districtAdmin"===e?"District Admin":"talukAdmin"===e?"Taluk Admin":""})}},{title:"Email",dataIndex:"email",width:200},{title:"Phone No",dataIndex:"phoneNo",width:100},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:90,hidden:!Pe&&!Ue&&!Ye&&!qe,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[Ue?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){m.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,!Ue&&qe?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){m.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(pe.a,{})})}):null,Ye?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{title:"Are you sure to delete this admin?",onConfirm:function(){return y(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(ge.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),g=function(e){"undefined"===typeof e&&(e=O),b(!0),E.list(e,qe).then((function(t){var a,i,l=e;l.total=(null===(a=t.result)||void 0===a?void 0:a.total)||0,h(Object(P.a)({},l)),n((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){b(!1)}))},y=function(e){E.delete(e,Ye).then((function(e){ce(e.message),g()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){g(),we.listSdt("ignoreModule").then((function(e){r(e.result.data||[])}))}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Admin List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(ve,{data:a,columns:x,parentSData:O,loading:j,formRef:m,list:g,searchPlaceholder:"First Name or Last Name",addNew:Pe})}),Object(p.jsx)(ze,{ref:m,list:g,sdt:s})]})},modules:[Ee.view]},{name:"Customers",url:"/customers",icon:function(){return Object(p.jsx)(f.a,{})},component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)([]),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!0),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useRef)(),f=Object(c.useState)({key:"",page:1,limit:20,total:0}),v=Object(d.a)(f,2),O=v[0],h=v[1],x=[{title:"Name",dataIndex:"firstName",render:function(e,t){return t.firstName+" "+t.lastName}},{title:"Email",dataIndex:"email",width:150},{title:"Phone No",dataIndex:"phoneNo",width:100},{title:"Status",dataIndex:"isActive",width:80,render:function(e){return e?Object(p.jsx)(G.a,{color:"green",children:"Active"}):Object(p.jsx)(G.a,{color:"red",children:"Inactive"})}},{title:"Action",width:90,hidden:!Te&&!Me&&!De,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[Me?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){m.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,!Me&&Ae?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){m.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(pe.a,{})})}):null,De?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{title:"Are you sure to delete this admin?",onConfirm:function(){return y(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(ge.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),g=function(e){"undefined"===typeof e&&(e=O),b(!0),ye.list(e,Ae).then((function(t){var a,i,l=e;l.total=(null===(a=t.result)||void 0===a?void 0:a.total)||0,h(Object(P.a)({},l)),n((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){b(!1)}))},y=function(e){ye.delete(e,De).then((function(e){ce(e.message),g()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){g(),we.listSdt("ignoreModule").then((function(e){r(e.result.data||[])}))}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Customer List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(ve,{data:a,columns:x,parentSData:O,loading:j,formRef:m,list:g,searchPlaceholder:"First Name or Last Name",addNew11:Te})}),Object(p.jsx)(Fe,{ref:m,list:g,sdt:s})]})},modules:[Se.view]},{name:"User Permissions",url:"/user-permissions",icon:function(){return Object(p.jsx)(v.a,{})},component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)([]),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!0),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useRef)(),f=Object(c.useState)({key:"",page:1,limit:20,total:0}),v=Object(d.a)(f,2),O=v[0],h=v[1],x=[{title:"User Type",dataIndex:"typeName",width:150},{title:"Granted Modules",dataIndex:"grantedModuleTitles",render:function(e,t){return e.map((function(e,a){return Object(p.jsx)(G.a,{color:a%4===0?"blue":a%4===1?"gold":a%4===2?"cyan":"pink",children:e.title},t.grantedModules[a])}))}},{title:"Action",key:"action",width:60,render:function(e,t){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){m.current.openForm(e)},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})})})}}].filter((function(e){return!e.hidden})),g=function(e){"undefined"===typeof e&&(e=O),b(!0),Ie.listAdminModules(e).then((function(t){var a,i,l=e;l.total=(null===(a=t.result)||void 0===a?void 0:a.total)||0,h(Object(P.a)({},l)),n((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){b(!1)}))};return Object(c.useEffect)((function(){g(),Ie.listModulesAll().then((function(e){r(e.result.data||[])}))}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Customer List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(ve,{data:a,columns:x,parentSData:O,loading:j,formRef:m,list:g,searchPlaceholder:"First Name or Last Name",addNew:!1})}),Object(p.jsx)(Re,{ref:m,list:g,modules:s})]})}},{name:"Email",baseURL:"/email",modules:[ga.view,pt.view],icon:function(){return Object(p.jsx)(O.a,{})},subMenus:[{name:"Template",url:"/template",component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)(!0),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useRef)(),u=Object(c.useState)({key:"",page:1,limit:20,total:0}),j=Object(d.a)(u,2),b=j[0],m=j[1],f=[{title:"Subject",dataIndex:"subject"},{title:"Key",dataIndex:"key",width:200},{title:"Action",width:100,hidden:!Na&&!ka&&!Ca&&!ya,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[ka?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){o.current.openForm(Object(P.a)({},e))},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,!ka&&ya?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){o.current.openForm(Object(P.a)({},e))},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(pe.a,{})})}):null,t.deletable&&Ca?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{title:"Are you sure to delete this email template?",onConfirm:function(){return O(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(ge.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),v=function(e){"undefined"===typeof e&&(e=b),r(!0),ot.listTeplates(e,ya).then((function(t){var a,i,l=e;l.total=(null===(a=t.result)||void 0===a?void 0:a.total)||0,m(Object(P.a)({},l)),n((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){r(!1)}))},O=function(e){ot.deleteTeplates(e,Ca).then((function(e){ce(e.message),v()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){v()}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Email Template List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(ve,{data:a,columns:f,parentSData:b,loading:s,formRef:o,list:v,searchPlaceholder:"Title or Key",addNew:Na})}),Object(p.jsx)(wa,{ref:o,list:v})]})},modules:[ga.view]},{name:"Email",url:"/email",component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)(!0),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)([]),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)([]),f=Object(d.a)(m,2),v=f[0],h=f[1],x=Object(c.useState)([]),g=Object(d.a)(x,2),y=g[0],k=g[1],C=Object(c.useState)([]),w=Object(d.a)(C,2),S=w[0],A=w[1],T=Object(c.useState)([]),M=Object(d.a)(T,2),D=M[0],F=M[1],I=Object(c.useState)([]),R=Object(d.a)(I,2),_=R[0],L=R[1],q=Object(c.useRef)(),U=Object(c.useState)({key:"",page:1,limit:20,total:0}),Y=Object(d.a)(U,2),V=Y[0],B=Y[1],K=[{title:"Subject",dataIndex:"subject"},{title:"Key",dataIndex:"key",width:200},{title:"Action",width:60,hidden:!yt&&!gt,render:function(e,t){return Object(p.jsx)(p.Fragment,{children:gt?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){q.current.openForm(Object(P.a)({},e))},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(pe.a,{})})}):null})}}].filter((function(e){return!e.hidden})),H=function(e){"undefined"===typeof e&&(e=V),r(!0),ot.list(e,gt).then((function(t){var a,i,l=e;l.total=(null===(a=t.result)||void 0===a?void 0:a.total)||0,B(Object(P.a)({},l)),n((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){r(!1)}))};return Object(c.useEffect)((function(){H(),ot.listAllTeplates("viewEmailTemplate").then((function(e){b([].concat(Object(z.a)(e.result.data||[]),[{_id:"custom",subject:"Custom"}]))})).catch((function(e){ce("Email templates are not loaded! Contact super admin if you have any permission error","error")})),ye.listAll("viewCustomer").then((function(e){h(e.result.data||[])})).catch((function(e){ce("Customers are not loaded! Contact super admin if you have any permission error","error")})),rt.listAll({},"viewDriver").then((function(e){k(e.result.data||[])})).catch((function(e){ce("Drivers are not loaded! Contact super admin if you have any permission error","error")})),E.listAll({},"viewAdmin").then((function(e){A(e.result.data||[])})).catch((function(e){ce("Admins are not loaded! Contact super admin if you have any permission error","error")})),we.listSdt("ignoreModule").then((function(e){F(e.result.data||[])})),Ze.listServiceType().then((function(e){L(e.result.data)}))}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Sent Email List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(ve,{data:a,columns:K,parentSData:V,loading:s,formRef:q,list:H,searchPlaceholder:"Title or Key",addNew:yt,addNewIcon:O.a,addNewText:"Compose Email"})}),Object(p.jsx)(Nt,{ref:q,list:H,templates:j,sdt:D,customers:v,drivers:y,admins:S,serviceTypes:_})]})},modules:[pt.view]}].filter((function(e){var t;return dn||(null===(t=e.modules)||void 0===t?void 0:t.includesAny(on))}))},{name:"Notifications",url:"/notifications",icon:function(){return Object(p.jsx)(h.a,{})},component:function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)(!0),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)([]),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)([]),f=Object(d.a)(m,2),v=f[0],O=f[1],h=Object(c.useState)([]),x=Object(d.a)(h,2),g=x[0],y=x[1],k=Object(c.useState)([]),C=Object(d.a)(k,2),w=C[0],S=C[1],A=Object(c.useState)([]),T=Object(d.a)(A,2),M=T[0],D=T[1],F=Object(c.useRef)(),I=Object(c.useState)({key:"",page:1,limit:20,total:0}),R=Object(d.a)(I,2),_=R[0],L=R[1],q=[{title:"To",dataIndex:"to",width:150,render:function(e){return"manyCustomers"===e?"Many Customers":"manyDrivers"===e?"Many Drivers":"manyAdmins"===e?"Many Admins":"allCustomers"===e?"All Customers":"allDrivers"===e?"All Drivers":"allAdmins"===e?"All Admins":e}},{title:"Content",dataIndex:"content"},{title:"State",dataIndex:"stateDetails",width:250,render:function(e){return null===e||void 0===e?void 0:e.name}},{title:"District",dataIndex:"districtDetails",width:250,render:function(e){return null===e||void 0===e?void 0:e.name}},{title:"Taluk",dataIndex:"talukDetails",width:250,render:function(e){return null===e||void 0===e?void 0:e.name}},{title:"Action",width:100,hidden:!Ma&&!Da&&!Fa&&!Ta,render:function(e,t){return Object(p.jsxs)(p.Fragment,{children:[Da?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){F.current.openForm(Object(P.a)({},e))},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(xe.a,{})})}):null,!Da&&Ta?Object(p.jsx)(N.a,{size:"small",className:"mx-1",onClick:function(){F.current.openForm(Object(P.a)({},e))},children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(pe.a,{})})}):null,Fa?Object(p.jsx)(N.a,{type:"danger",size:"small",children:Object(p.jsx)("span",{className:"d-flex",children:Object(p.jsx)(he.a,{title:"Are you sure to delete this notification?",onConfirm:function(){return Y(t._id)},okText:"Yes",cancelText:"No",children:Object(p.jsx)(ge.a,{})})})}):null]})}}].filter((function(e){return!e.hidden})),U=function(e){"undefined"===typeof e&&(e=_),r(!0),Sa.list(e,Ta).then((function(t){var a,i,l=e;l.total=(null===(a=t.result)||void 0===a?void 0:a.total)||0,L(Object(P.a)({},l)),n((null===(i=t.result)||void 0===i?void 0:i.data)||[])})).catch((function(e){ce(e.message,"error")})).finally((function(){r(!1)}))},Y=function(e){Sa.delete(e,Fa).then((function(e){ce(e.message),U()})).catch((function(e){ce(e.message,"error")}))};return Object(c.useEffect)((function(){U(),ye.listAll("viewCustomer").then((function(e){b(e.result.data||[])})).catch((function(e){ce("Customers are not loaded! Contact super admin if you have any permission error","error")})),rt.listAll({},"viewDriver").then((function(e){O(e.result.data||[])})).catch((function(e){ce("Drivers are not loaded! Contact super admin if you have any permission error","error")})),E.listAll({},"viewAdmin").then((function(e){y(e.result.data||[])})).catch((function(e){ce("Admins are not loaded! Contact super admin if you have any permission error","error")})),we.listSdt("ignoreModule").then((function(e){S(e.result.data||[])})),Ze.listServiceType().then((function(e){D(e.result.data)}))}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"page-description text-white p-2",children:Object(p.jsx)("span",{children:"Notification List"})}),Object(p.jsx)("div",{className:"m-2 border p-2",children:Object(p.jsx)(ve,{data:a,columns:q,parentSData:_,loading:s,formRef:F,list:U,searchPlaceholder:"Content",addNew:Ma,addNewIcon:vt.a,addNewText:"Send New"})}),Object(p.jsx)(Ia,{ref:F,list:U,sdt:w,customers:j,drivers:v,admins:g,serviceTypes:M})]})},modules:[Aa.view]}].filter((function(e){var t;return dn||(null===(t=e.modules)||void 0===t?void 0:t.includesAny(on))})),topNav:[{name:"Your Profile",icon:function(){return Object(p.jsx)(x.a,{style:{marginRight:8},size:30,src:"images/avatar-1.jpg"})},url:"/profile",component:function(){var e,t,a=Object(c.useState)({}),n=Object(d.a)(a,2),i=n[0],l=n[1],s=Object(c.useState)(!0),r=Object(d.a)(s,2),o=r[0],u=r[1],j=Object(c.useRef)(),b=function(e){u(!0),E.details(e).then((function(e){var t;l((null===(t=e.result)||void 0===t?void 0:t.data)||{}),u(!1),j.current.closeForm()})).catch((function(e){u(!1),ce(e.message,"error")}))};return Object(c.useEffect)((function(){b()}),[]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(g.a,{spinning:o,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:[Object(p.jsx)(je,{ref:j,list:b}),Object(p.jsxs)("div",{className:"p-2 d-flex w-100",children:[Object(p.jsxs)("div",{className:"px-3",children:[Object(p.jsx)(y.a,{className:"w200",src:(null===(e=i.image)||void 0===e?void 0:e.url)||""}),Object(p.jsx)(N.a,{type:"dashed",className:"w200",onClick:function(){j.current.openForm()},children:"Edit Profile"})]}),Object(p.jsxs)("div",{className:"px-3 w-100",children:[Object(p.jsxs)("h5",{className:"text-secondary text-bold",children:[i.name||""," ",Object(p.jsxs)("span",{className:"text-danger h6",children:["@",i.username||""]})]}),Object(p.jsx)("p",{className:"text-info text-bold",children:(null===(t=i.user_type)||void 0===t?void 0:t.title)||""}),Object(p.jsx)(k.a,{orientation:"left",children:"Contact Info"}),Object(p.jsx)("table",{children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"w100 text-bold",children:"Phone: "}),Object(p.jsx)("td",{className:"text-info",children:i.mobile||""})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"w100 text-bold",children:"Address: "}),Object(p.jsx)("td",{className:"text-secondary",children:i.address||""})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"w100 text-bold",children:"Email: "}),Object(p.jsx)("td",{className:"text-info",children:i.email||""})]})]})}),Object(p.jsx)(k.a,{orientation:"left",children:"Basic Info"}),Object(p.jsx)("table",{children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"w100 text-bold",children:"Birthday: "}),Object(p.jsx)("td",{className:"text-info",children:K()(i.dob).format("MMMM D, YYYY")})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"w100 text-bold",children:"Gender: "}),Object(p.jsx)("td",{className:"text-secondary",children:"male"===i.gender?"Male":"female"===i.gender?"Female":"Other"})]})]})})]})]})]})})}}]},jn=a(58),bn=u.a.SubMenu;function mn(){var e=Object(Ve.g)(),t=Object(c.useState)(e.pathname),a=Object(d.a)(t,2),n=a[0],i=a[1];return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(u.a,{onClick:function(e){i(e.key)},style:{width:256},defaultOpenKeys:["sub1"],selectedKeys:n,mode:"inline",id:"left-menu-bar",children:un.leftNav.map((function(e,t){var a;return Object(p.jsx)(c.Fragment,{children:(null===(a=e.subMenus)||void 0===a?void 0:a.length)?Object(p.jsx)(bn,{icon:Object(p.jsx)(e.icon,{}),title:e.name,children:e.subMenus.map((function(t){return Object(p.jsx)(u.a.Item,{children:Object(p.jsx)(jn.b,{className:"text-d-none",to:(e.baseURL||"")+t.url,children:t.name})},t.module||t.url)}))},e.name.replace(/ /g,"")):Object(p.jsx)(u.a.Item,{icon:Object(p.jsx)(e.icon,{}),children:Object(p.jsx)(jn.b,{className:"text-d-none",to:e.url,children:e.name})},e.url)},t)}))})})}var fn=a(329),vn=a(330);function On(){return Object(p.jsxs)("svg",{focusable:"false",xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"24",viewBox:"0 0 24 24",width:"24",children:[Object(p.jsx)("rect",{fill:"none",height:"24",width:"24"}),Object(p.jsx)("path",{d:"M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0 c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2 c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1 C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06 c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41 l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41 c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36 c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"})]})}function hn(){return Object(p.jsxs)("svg",{focusable:"false",xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"24",viewBox:"0 0 24 24",width:"24",children:[Object(p.jsx)("rect",{fill:"none",height:"24",width:"24"}),Object(p.jsx)("path",{fill:"white",d:"M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36c-0.98,1.37-2.58,2.26-4.4,2.26 c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"})]})}var xn=u.a.SubMenu;function pn(){var e=Object(Ve.g)(),t=Object(c.useState)(e.pathname),a=Object(d.a)(t,2),n=a[0],i=a[1],l=Object(c.useState)("undefined"===typeof F.getTheme?F.setTheme("light"):F.getTheme()),s=Object(d.a)(l,2),r=s[0],o=s[1];return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(u.a,{onClick:function(e){i(e.key)},selectedKeys:n,mode:"horizontal",children:[Object(p.jsx)(u.a.Item,{id:"menu-bar-logo",className:"d-flex",style:{width:256},children:Object(p.jsx)(y.a,{preview:!1,style:{height:"24px",width:"36px"},src:"images/logo-thumb.png"})},"mail"),Object(p.jsx)(u.a.Item,{className:"mr-auto",onClick:function(){var e,t,a,n;null===(e=document.querySelector("#left-menu-bar"))||void 0===e||null===(t=e.classList)||void 0===t||t.toggle("d-none"),null===(a=document.querySelector("#menu-bar-logo"))||void 0===a||null===(n=a.classList)||void 0===n||n.toggle("d-none")},children:Object(p.jsx)(fn.a,{})},"menu"),Object(p.jsx)(u.a.Item,{icon:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ue,{cond:"light"===r,children:Object(p.jsx)(On,{})}),Object(p.jsx)(ue,{cond:"dark"===r,children:Object(p.jsx)(hn,{})})]}),onClick:function(){var e;o(e="light"===r?"dark":"light"),F.setTheme(e)}},"light"),un.topNav.map((function(e,t){var a;return Object(p.jsx)(c.Fragment,{children:(null===(a=e.subMenus)||void 0===a?void 0:a.length)?Object(p.jsx)(xn,{icon:Object(p.jsx)(e.icon,{}),title:e.name,children:e.subMenus.map((function(t){return Object(p.jsx)(u.a.Item,{children:Object(p.jsx)(jn.b,{className:"text-d-none",to:(e.baseURL||"")+t.url,children:t.name})},t.url)}))},e.name.replace(/ /g,"")):Object(p.jsx)(u.a.Item,{icon:Object(p.jsx)(e.icon,{}),children:Object(p.jsx)(jn.b,{className:"text-d-none",to:e.url,children:e.name})},e.url)},t)})),Object(p.jsx)(u.a.Item,{icon:Object(p.jsx)(vn.a,{}),onClick:function(){F.logout()},children:"Logout"},"logout")]})})}var gn=a(314);function yn(){return Object(p.jsx)(gn.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:Object(p.jsx)(jn.b,{to:"/",children:Object(p.jsx)(N.a,{type:"primary",children:"Back Home"})})})}function Nn(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(pn,{}),Object(p.jsxs)("div",{className:"d-flex",children:[Object(p.jsx)("div",{className:"nav-overflow",children:Object(p.jsx)(mn,{})}),Object(p.jsx)("div",{className:"content-data",children:Object(p.jsxs)(Ve.c,{children:[un.leftNav.map((function(e,t){var a;return(null===(a=e.subMenus)||void 0===a?void 0:a.length)?e.subMenus.map((function(t){return Object(p.jsx)(Ve.a,{exact:!0,path:e.baseURL+t.url,children:Object(p.jsx)(t.component,{})},t.module||t.url)})):Object(p.jsx)(Ve.a,{exact:!0,path:e.url,children:Object(p.jsx)(e.component,{})},e.module||e.url)})),un.topNav.map((function(e,t){var a;return(null===(a=e.subMenus)||void 0===a?void 0:a.length)?e.subMenus.map((function(t){return Object(p.jsx)(Ve.a,{exact:!0,path:e.baseURL+t.url,children:Object(p.jsx)(t.component,{})},t.module||t.url)})):Object(p.jsx)(Ve.a,{exact:!0,path:e.url,children:Object(p.jsx)(e.component,{})},e.module||e.url)})),Object(p.jsx)(Ve.a,{path:"*",children:Object(p.jsx)(yn,{})})]})})]})]})}var kn=a(331),Cn=a(332),wn=function(){function e(){Object(S.a)(this,e)}return Object(A.a)(e,null,[{key:"login",value:function(e){return L.post("user/login",e,{module:"ignoreModule"})}},{key:"validateToken",value:function(e){return L.post("user/validate-token",e,{module:"ignoreModule"})}}]),e}();function Sn(){var e=Object(c.useState)(),t=Object(d.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)(),l=Object(d.a)(i,2),s=l[0],r=l[1],o=Object(c.useState)(!1),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(c.useState)(!1),f=Object(d.a)(m,2),v=f[0],O=f[1],h=function(){b(!0),wn.login({email:a,password:s}).then((function(e){ce(e.message),F.setUserData(e.data),window.location.reload()})).catch((function(e){"string"!==typeof e.message?ce(e.message[Object.keys(e.message)[0]][0],"error"):ce(e.message,"error")})).finally((function(){b(!1)}))};return Object(p.jsx)(g.a,{spinning:j,indicator:Object(p.jsx)(Y.a,{style:{fontSize:24},spin:!0}),children:Object(p.jsx)("div",{className:"d-flex h100vh bg-light1",children:Object(p.jsx)("div",{className:"w280 mx-auto mt-5 border p-4 bg-white1 h280",children:Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),h()},autoComplete:"off",spellCheck:"false",children:[Object(p.jsx)("h5",{className:"text-secondary text-center",children:"Cargo Admin Panel"}),Object(p.jsx)("div",{className:"ant-image w-100 mb-3",children:Object(p.jsx)("img",{className:"ant-image-img w60 h40 mx-auto",src:"images/logo-thumb.png",alt:"Logo"})}),Object(p.jsx)(U.a,{className:"mb-2",prefix:Object(p.jsx)(kn.a,{className:"site-form-item-icon"}),value:a,onChange:function(e){n(e.target.value)},placeholder:"Username"}),Object(p.jsx)(U.a,{className:"mb-2",prefix:Object(p.jsx)(Cn.a,{className:"site-form-item-icon"}),value:s,onChange:function(e){r(e.target.value)},type:v?"text":"password",suffix:Object(p.jsx)(N.a,{type:"text",shape:"circle",icon:Object(p.jsx)(pe.a,{}),onClick:function(){return O(!v)}}),placeholder:"Password"}),Object(p.jsx)(N.a,{className:"login-form-button w-100",type:"primary",htmlType:"submit",onClick:h,children:"Log in"})]})})})})}var An=function(){var e=Object(c.useState)(F.isLogged()),t=Object(d.a)(e,2),a=t[0],n=t[1];return Object(c.useEffect)((function(){wn.validateToken().then((function(e){n(!0),_e.userType=e.type})).catch((function(e){n(!1),window.localStorage.clear()}))}),[]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(jn.a,{basename:"/cargo/admin/build",children:[Object(p.jsx)(ue,{cond:a,children:Object(p.jsx)(Nn,{})}),Object(p.jsx)(ue,{cond:!a,children:Object(p.jsx)(Sn,{})})]})})},Tn=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,333)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,l=t.getLCP,c=t.getTTFB;a(e),n(e),i(e),l(e),c(e)}))};Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("dark"!==F.getTheme()){e.next=5;break}return e.next=3,F.setTheme("dark");case 3:e.next=7;break;case 5:return e.next=7,F.setTheme("light");case 7:o.a.render(Object(p.jsx)(An,{}),document.getElementById("root"));case 8:case"end":return e.stop()}}),e)})))(),Tn()}},[[302,1,2]]]);
//# sourceMappingURL=main.c5331503.chunk.js.map