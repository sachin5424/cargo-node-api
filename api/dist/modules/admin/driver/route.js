"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _express = require("express");

var _DriverController = _interopRequireDefault(require("./DriverController"));

var _WalletController = _interopRequireDefault(require("./WalletController"));

var _DriverValidations = require("../../../validation/DriverValidations");

var _validateAdmin = require("../../../middleware/validateAdmin");

var _others = require("../../../middleware/others");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const router = (0, _express.Router)({
  mergeParams: true
});
router.get('/list/wallet-history', checkWalletListAccess, _WalletController.default.list);
router.get('/list/wallet-history/:isAll', checkWalletListAccess, _WalletController.default.list);
router.post('/save/wallet-history', checkWalletSaveAccess, _DriverValidations.walletValidationAdmin, _others.formValidation, _WalletController.default.save);
router.get('/list', checkDriverListAccess, _DriverController.default.list);
router.get('/list/:isAll', checkDriverListAccess, _DriverController.default.list);
router.post('/save', checkDriverSaveAccess, _DriverValidations.driverValidation, _others.formValidation, _DriverController.default.save);
router.delete("/delete/:id", CheckDriverDeleteAccess, _DriverController.default.delete);

async function checkWalletListAccess(req, res, next) {
  (0, _validateAdmin.checkAdminPermission)(req, res, next, 'viewWallet');
}

;

async function checkWalletSaveAccess(req, res, next) {
  (0, _validateAdmin.checkAdminPermission)(req, res, next, 'addWallet');
}

;

async function checkDriverListAccess(req, res, next) {
  (0, _validateAdmin.checkAdminPermission)(req, res, next, 'viewDriver');
}

;

async function checkDriverSaveAccess(req, res, next) {
  (0, _validateAdmin.checkAdminPermission)(req, res, next, req.body._id ? 'editDriver' : 'addDriver', true);
}

;

async function CheckDriverDeleteAccess(req, res, next) {
  (0, _validateAdmin.checkAdminPermission)(req, res, next, 'deleteDriver');
}

;
var _default = router;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9tb2R1bGVzL2FkbWluL2RyaXZlci9yb3V0ZS5qcyJdLCJuYW1lcyI6WyJyb3V0ZXIiLCJtZXJnZVBhcmFtcyIsImdldCIsImNoZWNrV2FsbGV0TGlzdEFjY2VzcyIsIldhbGxldENvbnRyb2xsZXIiLCJsaXN0IiwicG9zdCIsImNoZWNrV2FsbGV0U2F2ZUFjY2VzcyIsIndhbGxldFZhbGlkYXRpb25BZG1pbiIsImZvcm1WYWxpZGF0aW9uIiwic2F2ZSIsImNoZWNrRHJpdmVyTGlzdEFjY2VzcyIsIkRyaXZlckNvbnRyb2xsZXIiLCJjaGVja0RyaXZlclNhdmVBY2Nlc3MiLCJkcml2ZXJWYWxpZGF0aW9uIiwiZGVsZXRlIiwiQ2hlY2tEcml2ZXJEZWxldGVBY2Nlc3MiLCJyZXEiLCJyZXMiLCJuZXh0IiwiYm9keSIsIl9pZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHLHFCQUFPO0FBQUVDLEVBQUFBLFdBQVcsRUFBRTtBQUFmLENBQVAsQ0FBZjtBQUVBRCxNQUFNLENBQUNFLEdBQVAsQ0FBVyxzQkFBWCxFQUFtQ0MscUJBQW5DLEVBQTBEQywwQkFBaUJDLElBQTNFO0FBQ0FMLE1BQU0sQ0FBQ0UsR0FBUCxDQUFXLDZCQUFYLEVBQTBDQyxxQkFBMUMsRUFBaUVDLDBCQUFpQkMsSUFBbEY7QUFDQUwsTUFBTSxDQUFDTSxJQUFQLENBQVksc0JBQVosRUFBb0NDLHFCQUFwQyxFQUEyREMsd0NBQTNELEVBQWtGQyxzQkFBbEYsRUFBa0dMLDBCQUFpQk0sSUFBbkg7QUFFQVYsTUFBTSxDQUFDRSxHQUFQLENBQVcsT0FBWCxFQUFvQlMscUJBQXBCLEVBQTJDQywwQkFBaUJQLElBQTVEO0FBQ0FMLE1BQU0sQ0FBQ0UsR0FBUCxDQUFXLGNBQVgsRUFBMkJTLHFCQUEzQixFQUFrREMsMEJBQWlCUCxJQUFuRTtBQUNBTCxNQUFNLENBQUNNLElBQVAsQ0FBWSxPQUFaLEVBQXFCTyxxQkFBckIsRUFBNENDLG1DQUE1QyxFQUE4REwsc0JBQTlELEVBQThFRywwQkFBaUJGLElBQS9GO0FBQ0FWLE1BQU0sQ0FBQ2UsTUFBUCxDQUFjLGFBQWQsRUFBNkJDLHVCQUE3QixFQUFzREosMEJBQWlCRyxNQUF2RTs7QUFHQSxlQUFlWixxQkFBZixDQUFzQ2MsR0FBdEMsRUFBMkNDLEdBQTNDLEVBQWdEQyxJQUFoRCxFQUFzRDtBQUFFLDJDQUFxQkYsR0FBckIsRUFBMEJDLEdBQTFCLEVBQStCQyxJQUEvQixFQUFxQyxZQUFyQztBQUFxRDs7QUFBQTs7QUFDN0csZUFBZVoscUJBQWYsQ0FBc0NVLEdBQXRDLEVBQTJDQyxHQUEzQyxFQUFnREMsSUFBaEQsRUFBc0Q7QUFBRSwyQ0FBcUJGLEdBQXJCLEVBQTBCQyxHQUExQixFQUErQkMsSUFBL0IsRUFBb0MsV0FBcEM7QUFBbUQ7O0FBQUE7O0FBRTNHLGVBQWVSLHFCQUFmLENBQXNDTSxHQUF0QyxFQUEyQ0MsR0FBM0MsRUFBZ0RDLElBQWhELEVBQXNEO0FBQUUsMkNBQXFCRixHQUFyQixFQUEwQkMsR0FBMUIsRUFBK0JDLElBQS9CLEVBQXFDLFlBQXJDO0FBQXFEOztBQUFBOztBQUM3RyxlQUFlTixxQkFBZixDQUFzQ0ksR0FBdEMsRUFBMkNDLEdBQTNDLEVBQWdEQyxJQUFoRCxFQUFzRDtBQUFFLDJDQUFxQkYsR0FBckIsRUFBMEJDLEdBQTFCLEVBQStCQyxJQUEvQixFQUFxQ0YsR0FBRyxDQUFDRyxJQUFKLENBQVNDLEdBQVQsR0FBZSxZQUFmLEdBQThCLFdBQW5FLEVBQWdGLElBQWhGO0FBQXdGOztBQUFBOztBQUNoSixlQUFlTCx1QkFBZixDQUF3Q0MsR0FBeEMsRUFBNkNDLEdBQTdDLEVBQWtEQyxJQUFsRCxFQUF3RDtBQUFFLDJDQUFxQkYsR0FBckIsRUFBMEJDLEdBQTFCLEVBQStCQyxJQUEvQixFQUFxQyxjQUFyQztBQUF1RDs7QUFBQTtlQUdsR25CLE0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQgRHJpdmVyQ29udHJvbGxlciBmcm9tIFwiLi9Ecml2ZXJDb250cm9sbGVyXCI7XHJcbmltcG9ydCBXYWxsZXRDb250cm9sbGVyIGZyb20gXCIuL1dhbGxldENvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgZHJpdmVyVmFsaWRhdGlvbiwgd2FsbGV0VmFsaWRhdGlvbkFkbWluIH0gZnJvbSBcIi4uLy4uLy4uL3ZhbGlkYXRpb24vRHJpdmVyVmFsaWRhdGlvbnNcIjtcclxuaW1wb3J0IHsgY2hlY2tBZG1pblBlcm1pc3Npb24gfSBmcm9tIFwiLi4vLi4vLi4vbWlkZGxld2FyZS92YWxpZGF0ZUFkbWluXCI7XHJcbmltcG9ydCB7IGZvcm1WYWxpZGF0aW9uIH0gZnJvbSBcIi4uLy4uLy4uL21pZGRsZXdhcmUvb3RoZXJzXCI7XHJcblxyXG5jb25zdCByb3V0ZXIgPSBSb3V0ZXIoeyBtZXJnZVBhcmFtczogdHJ1ZSB9KTtcclxuXHJcbnJvdXRlci5nZXQoJy9saXN0L3dhbGxldC1oaXN0b3J5JywgY2hlY2tXYWxsZXRMaXN0QWNjZXNzLCBXYWxsZXRDb250cm9sbGVyLmxpc3QpO1xyXG5yb3V0ZXIuZ2V0KCcvbGlzdC93YWxsZXQtaGlzdG9yeS86aXNBbGwnLCBjaGVja1dhbGxldExpc3RBY2Nlc3MsIFdhbGxldENvbnRyb2xsZXIubGlzdCk7XHJcbnJvdXRlci5wb3N0KCcvc2F2ZS93YWxsZXQtaGlzdG9yeScsIGNoZWNrV2FsbGV0U2F2ZUFjY2Vzcywgd2FsbGV0VmFsaWRhdGlvbkFkbWluLCBmb3JtVmFsaWRhdGlvbiwgV2FsbGV0Q29udHJvbGxlci5zYXZlKTtcclxuXHJcbnJvdXRlci5nZXQoJy9saXN0JywgY2hlY2tEcml2ZXJMaXN0QWNjZXNzLCBEcml2ZXJDb250cm9sbGVyLmxpc3QpO1xyXG5yb3V0ZXIuZ2V0KCcvbGlzdC86aXNBbGwnLCBjaGVja0RyaXZlckxpc3RBY2Nlc3MsIERyaXZlckNvbnRyb2xsZXIubGlzdCk7XHJcbnJvdXRlci5wb3N0KCcvc2F2ZScsIGNoZWNrRHJpdmVyU2F2ZUFjY2VzcywgZHJpdmVyVmFsaWRhdGlvbiwgZm9ybVZhbGlkYXRpb24sIERyaXZlckNvbnRyb2xsZXIuc2F2ZSk7XHJcbnJvdXRlci5kZWxldGUoXCIvZGVsZXRlLzppZFwiLCBDaGVja0RyaXZlckRlbGV0ZUFjY2VzcywgRHJpdmVyQ29udHJvbGxlci5kZWxldGUpO1xyXG5cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGNoZWNrV2FsbGV0TGlzdEFjY2VzcyAocmVxLCByZXMsIG5leHQpIHsgY2hlY2tBZG1pblBlcm1pc3Npb24ocmVxLCByZXMsIG5leHQsICd2aWV3V2FsbGV0Jyk7IH07XHJcbmFzeW5jIGZ1bmN0aW9uIGNoZWNrV2FsbGV0U2F2ZUFjY2VzcyAocmVxLCByZXMsIG5leHQpIHsgY2hlY2tBZG1pblBlcm1pc3Npb24ocmVxLCByZXMsIG5leHQsJ2FkZFdhbGxldCcpOyB9O1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gY2hlY2tEcml2ZXJMaXN0QWNjZXNzIChyZXEsIHJlcywgbmV4dCkgeyBjaGVja0FkbWluUGVybWlzc2lvbihyZXEsIHJlcywgbmV4dCwgJ3ZpZXdEcml2ZXInKTsgfTtcclxuYXN5bmMgZnVuY3Rpb24gY2hlY2tEcml2ZXJTYXZlQWNjZXNzIChyZXEsIHJlcywgbmV4dCkgeyBjaGVja0FkbWluUGVybWlzc2lvbihyZXEsIHJlcywgbmV4dCwgcmVxLmJvZHkuX2lkID8gJ2VkaXREcml2ZXInIDogJ2FkZERyaXZlcicsIHRydWUpOyB9O1xyXG5hc3luYyBmdW5jdGlvbiBDaGVja0RyaXZlckRlbGV0ZUFjY2VzcyAocmVxLCByZXMsIG5leHQpIHsgY2hlY2tBZG1pblBlcm1pc3Npb24ocmVxLCByZXMsIG5leHQsICdkZWxldGVEcml2ZXInKTsgfTtcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XHJcbiJdfQ==