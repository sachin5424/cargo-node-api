"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MongooseService = void 0;

class MongooseService {
  constructor() {}

  add(model, data) {
    return new Promise((resolve, reject) => {
      model.create(data, (err, res) => {
        if (err) {
          reject(err);
        } else {
          resolve(res);
        }
      });
    });
  }

  allList(model) {
    return new Promise((resolve, reject) => {
      model.find((err, res) => {
        if (err) {
          reject(err);
        }

        resolve(res);
      });
    });
  }

  findOne(model, id) {
    return new Promise((resolve, reject) => {
      model.findOne({
        _id: id
      }, (err, res) => {
        if (err) {
          reject(err);
        }

        resolve(res);
      });
    });
  }

  deleteOne(model, id) {
    return new Promise((resolve, reject) => {
      model.deleteOne({
        _id: id
      }, (err, res) => {
        if (err) {
          reject(err);
        }

        resolve(res);
      });
    });
  }

  async updateOne(model, id, data) {
    return new Promise((resolve, reject) => {
      model.findOneAndUpdate({
        _id: id
      }, data, {
        upsert: true
      }, (err, res) => {
        if (err) {
          reject(err);
        }

        resolve(res);
      });
    });
  }

}

exports.MongooseService = MongooseService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zZXJ2aWNlcy9wZXJtaXNzaW9uLXNlcnZpY2UuanMiXSwibmFtZXMiOlsiTW9uZ29vc2VTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJhZGQiLCJtb2RlbCIsImRhdGEiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImNyZWF0ZSIsImVyciIsInJlcyIsImFsbExpc3QiLCJmaW5kIiwiZmluZE9uZSIsImlkIiwiX2lkIiwiZGVsZXRlT25lIiwidXBkYXRlT25lIiwiZmluZE9uZUFuZFVwZGF0ZSIsInVwc2VydCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLE1BQU1BLGVBQU4sQ0FBc0I7QUFDbEJDLEVBQUFBLFdBQVcsR0FBRyxDQUFHOztBQUNqQkMsRUFBQUEsR0FBRyxDQUFDQyxLQUFELEVBQVFDLElBQVIsRUFBYztBQUNiLFdBQU8sSUFBSUMsT0FBSixDQUFZLENBQUNDLE9BQUQsRUFBVUMsTUFBVixLQUFxQjtBQUNwQ0osTUFBQUEsS0FBSyxDQUFDSyxNQUFOLENBQWFKLElBQWIsRUFBbUIsQ0FBQ0ssR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDN0IsWUFBSUQsR0FBSixFQUFTO0FBQ0xGLFVBQUFBLE1BQU0sQ0FBQ0UsR0FBRCxDQUFOO0FBQ0gsU0FGRCxNQUdLO0FBQ0RILFVBQUFBLE9BQU8sQ0FBQ0ksR0FBRCxDQUFQO0FBQ0g7QUFDSixPQVBEO0FBUUgsS0FUTSxDQUFQO0FBVUg7O0FBQ0RDLEVBQUFBLE9BQU8sQ0FBQ1IsS0FBRCxFQUFRO0FBQ1gsV0FBTyxJQUFJRSxPQUFKLENBQVksQ0FBQ0MsT0FBRCxFQUFVQyxNQUFWLEtBQXFCO0FBQ3BDSixNQUFBQSxLQUFLLENBQUNTLElBQU4sQ0FBVyxDQUFDSCxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUNyQixZQUFJRCxHQUFKLEVBQVM7QUFDTEYsVUFBQUEsTUFBTSxDQUFDRSxHQUFELENBQU47QUFDSDs7QUFDREgsUUFBQUEsT0FBTyxDQUFDSSxHQUFELENBQVA7QUFDSCxPQUxEO0FBTUgsS0FQTSxDQUFQO0FBUUg7O0FBQ0RHLEVBQUFBLE9BQU8sQ0FBQ1YsS0FBRCxFQUFRVyxFQUFSLEVBQVk7QUFDZixXQUFPLElBQUlULE9BQUosQ0FBWSxDQUFDQyxPQUFELEVBQVVDLE1BQVYsS0FBcUI7QUFDcENKLE1BQUFBLEtBQUssQ0FBQ1UsT0FBTixDQUFjO0FBQUVFLFFBQUFBLEdBQUcsRUFBRUQ7QUFBUCxPQUFkLEVBQTJCLENBQUNMLEdBQUQsRUFBTUMsR0FBTixLQUFjO0FBQ3JDLFlBQUlELEdBQUosRUFBUztBQUNMRixVQUFBQSxNQUFNLENBQUNFLEdBQUQsQ0FBTjtBQUNIOztBQUNESCxRQUFBQSxPQUFPLENBQUNJLEdBQUQsQ0FBUDtBQUNILE9BTEQ7QUFNSCxLQVBNLENBQVA7QUFRSDs7QUFDRE0sRUFBQUEsU0FBUyxDQUFDYixLQUFELEVBQVFXLEVBQVIsRUFBWTtBQUNqQixXQUFPLElBQUlULE9BQUosQ0FBWSxDQUFDQyxPQUFELEVBQVVDLE1BQVYsS0FBcUI7QUFDcENKLE1BQUFBLEtBQUssQ0FBQ2EsU0FBTixDQUFnQjtBQUFFRCxRQUFBQSxHQUFHLEVBQUVEO0FBQVAsT0FBaEIsRUFBNkIsQ0FBQ0wsR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDdkMsWUFBSUQsR0FBSixFQUFTO0FBQ0xGLFVBQUFBLE1BQU0sQ0FBQ0UsR0FBRCxDQUFOO0FBQ0g7O0FBQ0RILFFBQUFBLE9BQU8sQ0FBQ0ksR0FBRCxDQUFQO0FBQ0gsT0FMRDtBQU1ILEtBUE0sQ0FBUDtBQVFIOztBQUNjLFFBQVRPLFNBQVMsQ0FBQ2QsS0FBRCxFQUFRVyxFQUFSLEVBQVlWLElBQVosRUFBa0I7QUFDN0IsV0FBTyxJQUFJQyxPQUFKLENBQVksQ0FBQ0MsT0FBRCxFQUFVQyxNQUFWLEtBQXFCO0FBQ3BDSixNQUFBQSxLQUFLLENBQUNlLGdCQUFOLENBQXVCO0FBQUVILFFBQUFBLEdBQUcsRUFBRUQ7QUFBUCxPQUF2QixFQUFvQ1YsSUFBcEMsRUFBMEM7QUFBRWUsUUFBQUEsTUFBTSxFQUFFO0FBQVYsT0FBMUMsRUFBNEQsQ0FBQ1YsR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDdEUsWUFBSUQsR0FBSixFQUFTO0FBQ0xGLFVBQUFBLE1BQU0sQ0FBQ0UsR0FBRCxDQUFOO0FBQ0g7O0FBQ0RILFFBQUFBLE9BQU8sQ0FBQ0ksR0FBRCxDQUFQO0FBQ0gsT0FMRDtBQU1ILEtBUE0sQ0FBUDtBQVFIOztBQXJEaUIiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBNb25nb29zZVNlcnZpY2Uge1xyXG4gICAgY29uc3RydWN0b3IoKSB7IH1cclxuICAgIGFkZChtb2RlbCwgZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIG1vZGVsLmNyZWF0ZShkYXRhLCAoZXJyLCByZXMpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhbGxMaXN0KG1vZGVsKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgbW9kZWwuZmluZCgoZXJyLCByZXMpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBmaW5kT25lKG1vZGVsLCBpZCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIG1vZGVsLmZpbmRPbmUoeyBfaWQ6IGlkIH0sIChlcnIsIHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGRlbGV0ZU9uZShtb2RlbCwgaWQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBtb2RlbC5kZWxldGVPbmUoeyBfaWQ6IGlkIH0sIChlcnIsIHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIHVwZGF0ZU9uZShtb2RlbCwgaWQsIGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBtb2RlbC5maW5kT25lQW5kVXBkYXRlKHsgX2lkOiBpZCB9LCBkYXRhLCB7IHVwc2VydDogdHJ1ZSB9LCAoZXJyLCByZXMpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IHsgTW9uZ29vc2VTZXJ2aWNlIH07Il19