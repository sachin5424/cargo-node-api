"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.databaseConnect = void 0;

var _mongoose = _interopRequireDefault(require("mongoose"));

var _import = require("../../settings/import");

var _config = _interopRequireDefault(require("../../utls/config"));

var _Logger = _interopRequireDefault(require("../../utls/Logger"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_import.dotenv.config();

let databaseConnect = () => {
  // const connectionString = `mongodb://localhost:27017/cargo`;
  const connectionString = `mongodb+srv://${_config.default.database.user}:${_config.default.database.password}@cluster0.oiold.mongodb.net/${_config.default.database.name}?retryWrites=${_config.default.database.retryWrites}&w=majority`;
  console.log('connectionString', connectionString);

  _mongoose.default.connect(connectionString);

  _mongoose.default.connection.on('connected', function () {
    _Logger.default.info("Database Connected");
  });

  _mongoose.default.connection.on('error', function (err) {
    _Logger.default.error(`
            Error while connecting database
            Error reason: ${err.message}
        `);
  });

  _mongoose.default.connection.on('disconnected', function () {
    _Logger.default.info("Database Disconnected");
  });
}; // console.log(mongoose.listCollections())


exports.databaseConnect = databaseConnect;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9kYXRhLWJhc2UvY29ubmVjdGlvbi9jb25uZWN0aW9uLmpzIl0sIm5hbWVzIjpbImRvdGVudiIsImNvbmZpZyIsImRhdGFiYXNlQ29ubmVjdCIsImNvbm5lY3Rpb25TdHJpbmciLCJkYXRhYmFzZSIsInVzZXIiLCJwYXNzd29yZCIsIm5hbWUiLCJyZXRyeVdyaXRlcyIsImNvbnNvbGUiLCJsb2ciLCJtb25nb29zZSIsImNvbm5lY3QiLCJjb25uZWN0aW9uIiwib24iLCJMb2dnZXIiLCJpbmZvIiwiZXJyIiwiZXJyb3IiLCJtZXNzYWdlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFQUEsZUFBT0MsTUFBUDs7QUFDQSxJQUFJQyxlQUFlLEdBQUcsTUFBTTtBQUN4QjtBQUNBLFFBQU1DLGdCQUFnQixHQUFJLGlCQUFpQkYsZ0JBQU9HLFFBQVAsQ0FBZ0JDLElBQUssSUFBR0osZ0JBQU9HLFFBQVAsQ0FBZ0JFLFFBQVMsK0JBQThCTCxnQkFBT0csUUFBUCxDQUFnQkcsSUFBSyxnQkFBZU4sZ0JBQU9HLFFBQVAsQ0FBZ0JJLFdBQVksYUFBMUw7QUFDQUMsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksa0JBQVosRUFBZ0NQLGdCQUFoQzs7QUFDQVEsb0JBQVNDLE9BQVQsQ0FBaUJULGdCQUFqQjs7QUFDQVEsb0JBQVNFLFVBQVQsQ0FBb0JDLEVBQXBCLENBQXVCLFdBQXZCLEVBQW9DLFlBQVk7QUFDNUNDLG9CQUFPQyxJQUFQLENBQVksb0JBQVo7QUFDSCxHQUZEOztBQUdBTCxvQkFBU0UsVUFBVCxDQUFvQkMsRUFBcEIsQ0FBdUIsT0FBdkIsRUFBZ0MsVUFBVUcsR0FBVixFQUFlO0FBQzNDRixvQkFBT0csS0FBUCxDQUFjO0FBQ3RCO0FBQ0EsNEJBQTRCRCxHQUFHLENBQUNFLE9BQVE7QUFDeEMsU0FIUTtBQUlILEdBTEQ7O0FBTUFSLG9CQUFTRSxVQUFULENBQW9CQyxFQUFwQixDQUF1QixjQUF2QixFQUF1QyxZQUFZO0FBQy9DQyxvQkFBT0MsSUFBUCxDQUFZLHVCQUFaO0FBQ0gsR0FGRDtBQUdILENBakJELEMsQ0FrQkEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xyXG5pbXBvcnQgeyBkb3RlbnYgfSBmcm9tICcuLi8uLi9zZXR0aW5ncy9pbXBvcnQnO1xyXG5pbXBvcnQgY29uZmlnIGZyb20gXCIuLi8uLi91dGxzL2NvbmZpZ1wiO1xyXG5pbXBvcnQgTG9nZ2VyIGZyb20gXCIuLi8uLi91dGxzL0xvZ2dlclwiO1xyXG5cclxuZG90ZW52LmNvbmZpZygpO1xyXG5sZXQgZGF0YWJhc2VDb25uZWN0ID0gKCkgPT4ge1xyXG4gICAgLy8gY29uc3QgY29ubmVjdGlvblN0cmluZyA9IGBtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3L2NhcmdvYDtcclxuICAgIGNvbnN0IGNvbm5lY3Rpb25TdHJpbmcgPSBgbW9uZ29kYitzcnY6Ly8keyBjb25maWcuZGF0YWJhc2UudXNlcn06JHtjb25maWcuZGF0YWJhc2UucGFzc3dvcmR9QGNsdXN0ZXIwLm9pb2xkLm1vbmdvZGIubmV0LyR7Y29uZmlnLmRhdGFiYXNlLm5hbWV9P3JldHJ5V3JpdGVzPSR7Y29uZmlnLmRhdGFiYXNlLnJldHJ5V3JpdGVzfSZ3PW1ham9yaXR5YDtcclxuICAgIGNvbnNvbGUubG9nKCdjb25uZWN0aW9uU3RyaW5nJywgY29ubmVjdGlvblN0cmluZyk7XHJcbiAgICBtb25nb29zZS5jb25uZWN0KGNvbm5lY3Rpb25TdHJpbmcpO1xyXG4gICAgbW9uZ29vc2UuY29ubmVjdGlvbi5vbignY29ubmVjdGVkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIExvZ2dlci5pbmZvKFwiRGF0YWJhc2UgQ29ubmVjdGVkXCIpO1xyXG4gICAgfSk7XHJcbiAgICBtb25nb29zZS5jb25uZWN0aW9uLm9uKCdlcnJvcicsIGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICBMb2dnZXIuZXJyb3IoYFxyXG4gICAgICAgICAgICBFcnJvciB3aGlsZSBjb25uZWN0aW5nIGRhdGFiYXNlXHJcbiAgICAgICAgICAgIEVycm9yIHJlYXNvbjogJHtlcnIubWVzc2FnZX1cclxuICAgICAgICBgKVxyXG4gICAgfSk7XHJcbiAgICBtb25nb29zZS5jb25uZWN0aW9uLm9uKCdkaXNjb25uZWN0ZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgTG9nZ2VyLmluZm8oXCJEYXRhYmFzZSBEaXNjb25uZWN0ZWRcIik7XHJcbiAgICB9KTtcclxufTtcclxuLy8gY29uc29sZS5sb2cobW9uZ29vc2UubGlzdENvbGxlY3Rpb25zKCkpXHJcbmV4cG9ydCB7IGRhdGFiYXNlQ29ubmVjdCB9O1xyXG4iXX0=