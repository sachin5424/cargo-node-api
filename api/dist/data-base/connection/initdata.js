"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = initdata;

var _state = _interopRequireDefault(require("../models/state"));

var _district = _interopRequireDefault(require("../models/district"));

var _taluk = _interopRequireDefault(require("../models/taluk"));

var _serviceType = _interopRequireDefault(require("../models/serviceType"));

var _adminModules = _interopRequireDefault(require("../models/adminModules"));

var _rideTypeModel = _interopRequireDefault(require("../models/rideTypeModel"));

var _statesDistrictsAndTaluks = _interopRequireDefault(require("../initdata/statesDistrictsAndTaluks"));

var _serviceTypes = _interopRequireDefault(require("../initdata/serviceTypes"));

var _adminModules2 = _interopRequireDefault(require("../initdata/adminModules"));

var _rideType = _interopRequireDefault(require("../initdata/rideType"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

async function initdata() {
  let resultState = await _state.default.findOne(),
      resultDistrict,
      resultTaluk;

  if (!resultState) {
    _statesDistrictsAndTaluks.default?.map(async state => {
      resultState = new _state.default();
      resultState.name = state.name;
      resultState.save((errVS, vs) => {
        if (!errVS) {
          state?.districts?.forEach(async district => {
            resultDistrict = new _district.default();
            resultDistrict.name = district.name;
            resultDistrict.state = vs._id;
            await resultDistrict.save((errVD, vd) => {
              if (!errVD) {
                district?.taluks.forEach(async vt => {
                  resultTaluk = new _taluk.default();
                  resultTaluk.name = vt;
                  resultTaluk.district = vd._id;
                  await resultTaluk.save();
                });
              }
            });
          });
        }
      });
    });
  }

  let resultServiceTypes = await _serviceType.default.findOne();

  if (!resultServiceTypes) {
    _serviceTypes.default?.map(async st => {
      resultServiceTypes = new _serviceType.default();
      resultServiceTypes.name = st.name;
      resultServiceTypes.key = st.key;
      await resultServiceTypes.save();
    });
  }

  let resultUserTypePermission = await _adminModules.default.findOne();

  if (!resultUserTypePermission) {
    _adminModules2.default?.map(async utp => {
      resultUserTypePermission = new _adminModules.default();
      resultUserTypePermission.typeName = utp.typeName;
      resultUserTypePermission.typeKey = utp.typeKey;
      resultUserTypePermission.grantedModules = utp.grantedModules;
      await resultUserTypePermission.save();
    });
  }

  let rideTypeResult = _rideTypeModel.default.findOne();

  if (rideTypeResult) {
    const cargoId = await _serviceType.default.findOne({
      key: 'cargo'
    });
    const taxiId = await _serviceType.default.findOne({
      key: 'taxi'
    });

    _rideType.default.forEach(async v => {
      rideTypeResult = new _rideTypeModel.default();
      rideTypeResult.name = v.name;
      rideTypeResult.key = v.key;

      if (v.serviceType === 'cargo') {
        rideTypeResult.serviceType = cargoId;
      } else if (v.serviceType === 'taxi') {
        rideTypeResult.serviceType = taxiId;
      }

      await rideTypeResult.save();
    });
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9kYXRhLWJhc2UvY29ubmVjdGlvbi9pbml0ZGF0YS5qcyJdLCJuYW1lcyI6WyJpbml0ZGF0YSIsInJlc3VsdFN0YXRlIiwiU3RhdGVNb2RlbCIsImZpbmRPbmUiLCJyZXN1bHREaXN0cmljdCIsInJlc3VsdFRhbHVrIiwic3RhdGVzIiwibWFwIiwic3RhdGUiLCJuYW1lIiwic2F2ZSIsImVyclZTIiwidnMiLCJkaXN0cmljdHMiLCJmb3JFYWNoIiwiZGlzdHJpY3QiLCJEaXN0cmljdE1vZGVsIiwiX2lkIiwiZXJyVkQiLCJ2ZCIsInRhbHVrcyIsInZ0IiwiVGFsdWtNb2RlbCIsInJlc3VsdFNlcnZpY2VUeXBlcyIsIlNlcnZpY2VUeXBlTW9kZWwiLCJzZXJ2aWNlVHlwZXMiLCJzdCIsImtleSIsInJlc3VsdFVzZXJUeXBlUGVybWlzc2lvbiIsIkFkbWluTW9kdWxlc01vZGVsIiwidXNlclR5cGVQZXJtaXNzaW9uIiwidXRwIiwidHlwZU5hbWUiLCJ0eXBlS2V5IiwiZ3JhbnRlZE1vZHVsZXMiLCJyaWRlVHlwZVJlc3VsdCIsIlJpZGVUeXBlTW9kZWwiLCJjYXJnb0lkIiwidGF4aUlkIiwicmlkZVR5cGUiLCJ2Iiwic2VydmljZVR5cGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUVlLGVBQWVBLFFBQWYsR0FBMEI7QUFDckMsTUFBSUMsV0FBVyxHQUFHLE1BQU1DLGVBQVdDLE9BQVgsRUFBeEI7QUFBQSxNQUNJQyxjQURKO0FBQUEsTUFDb0JDLFdBRHBCOztBQUdBLE1BQUksQ0FBQ0osV0FBTCxFQUFrQjtBQUNkSyx1Q0FBUUMsR0FBUixDQUFZLE1BQU9DLEtBQVAsSUFBaUI7QUFDekJQLE1BQUFBLFdBQVcsR0FBRyxJQUFJQyxjQUFKLEVBQWQ7QUFDQUQsTUFBQUEsV0FBVyxDQUFDUSxJQUFaLEdBQW1CRCxLQUFLLENBQUND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O0FBQ0EwQixNQUFBQSxjQUFjLENBQUNSLEdBQWYsR0FBcUJhLENBQUMsQ0FBQ2IsR0FBdkI7O0FBQ0EsVUFBR2EsQ0FBQyxDQUFDQyxXQUFGLEtBQWtCLE9BQXJCLEVBQTZCO0FBQ3pCTixRQUFBQSxjQUFjLENBQUNNLFdBQWYsR0FBNkJKLE9BQTdCO0FBQ0gsT0FGRCxNQUVPLElBQUdHLENBQUMsQ0FBQ0MsV0FBRixLQUFrQixNQUFyQixFQUE0QjtBQUMvQk4sUUFBQUEsY0FBYyxDQUFDTSxXQUFmLEdBQTZCSCxNQUE3QjtBQUNIOztBQUVELFlBQU1ILGNBQWMsQ0FBQ3pCLElBQWYsRUFBTjtBQUNILEtBWEQ7QUFZSDtBQUNKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFN0YXRlTW9kZWwgZnJvbSBcIi4uL21vZGVscy9zdGF0ZVwiO1xyXG5pbXBvcnQgRGlzdHJpY3RNb2RlbCBmcm9tIFwiLi4vbW9kZWxzL2Rpc3RyaWN0XCI7XHJcbmltcG9ydCBUYWx1a01vZGVsIGZyb20gXCIuLi9tb2RlbHMvdGFsdWtcIjtcclxuaW1wb3J0IFNlcnZpY2VUeXBlTW9kZWwgZnJvbSBcIi4uL21vZGVscy9zZXJ2aWNlVHlwZVwiO1xyXG5pbXBvcnQgQWRtaW5Nb2R1bGVzTW9kZWwgZnJvbSBcIi4uL21vZGVscy9hZG1pbk1vZHVsZXNcIjtcclxuaW1wb3J0IFJpZGVUeXBlTW9kZWwgZnJvbSBcIi4uL21vZGVscy9yaWRlVHlwZU1vZGVsXCI7XHJcblxyXG5pbXBvcnQgc3RhdGVzIGZyb20gXCIuLi9pbml0ZGF0YS9zdGF0ZXNEaXN0cmljdHNBbmRUYWx1a3NcIjtcclxuaW1wb3J0IHNlcnZpY2VUeXBlcyBmcm9tIFwiLi4vaW5pdGRhdGEvc2VydmljZVR5cGVzXCI7XHJcbmltcG9ydCB1c2VyVHlwZVBlcm1pc3Npb24gZnJvbSBcIi4uL2luaXRkYXRhL2FkbWluTW9kdWxlc1wiO1xyXG5pbXBvcnQgcmlkZVR5cGUgZnJvbSBcIi4uL2luaXRkYXRhL3JpZGVUeXBlXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBpbml0ZGF0YSgpIHtcclxuICAgIGxldCByZXN1bHRTdGF0ZSA9IGF3YWl0IFN0YXRlTW9kZWwuZmluZE9uZSgpLFxyXG4gICAgICAgIHJlc3VsdERpc3RyaWN0LCByZXN1bHRUYWx1aztcclxuXHJcbiAgICBpZiAoIXJlc3VsdFN0YXRlKSB7XHJcbiAgICAgICAgc3RhdGVzPy5tYXAoYXN5bmMgKHN0YXRlKSA9PiB7XHJcbiAgICAgICAgICAgIHJlc3VsdFN0YXRlID0gbmV3IFN0YXRlTW9kZWwoKTtcclxuICAgICAgICAgICAgcmVzdWx0U3RhdGUubmFtZSA9IHN0YXRlLm5hbWU7XHJcbiAgICAgICAgICAgIHJlc3VsdFN0YXRlLnNhdmUoKGVyclZTLCB2cykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlcnJWUykge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlPy5kaXN0cmljdHM/LmZvckVhY2goYXN5bmMgKGRpc3RyaWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdERpc3RyaWN0ID0gbmV3IERpc3RyaWN0TW9kZWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0RGlzdHJpY3QubmFtZSA9IGRpc3RyaWN0Lm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdERpc3RyaWN0LnN0YXRlID0gdnMuX2lkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCByZXN1bHREaXN0cmljdC5zYXZlKChlcnJWRCwgdmQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXJyVkQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0cmljdD8udGFsdWtzLmZvckVhY2goYXN5bmMgKHZ0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFRhbHVrID0gbmV3IFRhbHVrTW9kZWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0VGFsdWsubmFtZSA9IHZ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRUYWx1ay5kaXN0cmljdCA9IHZkLl9pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcmVzdWx0VGFsdWsuc2F2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGxldCByZXN1bHRTZXJ2aWNlVHlwZXMgPSBhd2FpdCBTZXJ2aWNlVHlwZU1vZGVsLmZpbmRPbmUoKTtcclxuXHJcbiAgICBpZighcmVzdWx0U2VydmljZVR5cGVzKXtcclxuICAgICAgICBzZXJ2aWNlVHlwZXM/Lm1hcChhc3luYyAoc3QpPT57XHJcbiAgICAgICAgICAgIHJlc3VsdFNlcnZpY2VUeXBlcyA9IG5ldyBTZXJ2aWNlVHlwZU1vZGVsKCk7XHJcbiAgICAgICAgICAgIHJlc3VsdFNlcnZpY2VUeXBlcy5uYW1lID0gc3QubmFtZTtcclxuICAgICAgICAgICAgcmVzdWx0U2VydmljZVR5cGVzLmtleSA9IHN0LmtleTtcclxuICAgICAgICAgICAgYXdhaXQgcmVzdWx0U2VydmljZVR5cGVzLnNhdmUoKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGxldCByZXN1bHRVc2VyVHlwZVBlcm1pc3Npb24gPSBhd2FpdCBBZG1pbk1vZHVsZXNNb2RlbC5maW5kT25lKCk7XHJcblxyXG4gICAgaWYoIXJlc3VsdFVzZXJUeXBlUGVybWlzc2lvbil7XHJcbiAgICAgICAgdXNlclR5cGVQZXJtaXNzaW9uPy5tYXAoYXN5bmMgKHV0cCk9PntcclxuICAgICAgICAgICAgcmVzdWx0VXNlclR5cGVQZXJtaXNzaW9uID0gbmV3IEFkbWluTW9kdWxlc01vZGVsKCk7XHJcbiAgICAgICAgICAgIHJlc3VsdFVzZXJUeXBlUGVybWlzc2lvbi50eXBlTmFtZSA9IHV0cC50eXBlTmFtZTtcclxuICAgICAgICAgICAgcmVzdWx0VXNlclR5cGVQZXJtaXNzaW9uLnR5cGVLZXkgPSB1dHAudHlwZUtleTtcclxuICAgICAgICAgICAgcmVzdWx0VXNlclR5cGVQZXJtaXNzaW9uLmdyYW50ZWRNb2R1bGVzID0gdXRwLmdyYW50ZWRNb2R1bGVzO1xyXG4gICAgICAgICAgICBhd2FpdCByZXN1bHRVc2VyVHlwZVBlcm1pc3Npb24uc2F2ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBsZXQgcmlkZVR5cGVSZXN1bHQgPSBSaWRlVHlwZU1vZGVsLmZpbmRPbmUoKTtcclxuXHJcbiAgICBpZihyaWRlVHlwZVJlc3VsdCl7XHJcbiAgICAgICAgY29uc3QgY2FyZ29JZCA9IGF3YWl0IFNlcnZpY2VUeXBlTW9kZWwuZmluZE9uZSh7a2V5OiAnY2FyZ28nfSk7XHJcbiAgICAgICAgY29uc3QgdGF4aUlkID0gYXdhaXQgU2VydmljZVR5cGVNb2RlbC5maW5kT25lKHtrZXk6ICd0YXhpJ30pO1xyXG4gICAgICAgIHJpZGVUeXBlLmZvckVhY2goYXN5bmModik9PntcclxuICAgICAgICAgICAgcmlkZVR5cGVSZXN1bHQgPSBuZXcgUmlkZVR5cGVNb2RlbCgpO1xyXG4gICAgICAgICAgICByaWRlVHlwZVJlc3VsdC5uYW1lID0gdi5uYW1lO1xyXG4gICAgICAgICAgICByaWRlVHlwZVJlc3VsdC5rZXkgPSB2LmtleTtcclxuICAgICAgICAgICAgaWYodi5zZXJ2aWNlVHlwZSA9PT0gJ2NhcmdvJyl7XHJcbiAgICAgICAgICAgICAgICByaWRlVHlwZVJlc3VsdC5zZXJ2aWNlVHlwZSA9IGNhcmdvSWQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZih2LnNlcnZpY2VUeXBlID09PSAndGF4aScpe1xyXG4gICAgICAgICAgICAgICAgcmlkZVR5cGVSZXN1bHQuc2VydmljZVR5cGUgPSB0YXhpSWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGF3YWl0IHJpZGVUeXBlUmVzdWx0LnNhdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSJdfQ==