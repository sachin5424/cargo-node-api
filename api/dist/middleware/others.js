"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.formValidation = formValidation;

var _expressValidator = require("express-validator");

function formValidation(req, res, next) {
  const errors = (0, _expressValidator.validationResult)(req);

  if (!errors.isEmpty()) {
    return res.status(422).json({
      message: errors.msg,
      // errors: errors.errors
      errors: errors.array({
        onlyFirstError: true
      })
    });
  } else {
    next();
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9taWRkbGV3YXJlL290aGVycy5qcyJdLCJuYW1lcyI6WyJmb3JtVmFsaWRhdGlvbiIsInJlcSIsInJlcyIsIm5leHQiLCJlcnJvcnMiLCJpc0VtcHR5Iiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJtc2ciLCJhcnJheSIsIm9ubHlGaXJzdEVycm9yIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ08sU0FBU0EsY0FBVCxDQUF3QkMsR0FBeEIsRUFBNkJDLEdBQTdCLEVBQWtDQyxJQUFsQyxFQUF3QztBQUMzQyxRQUFNQyxNQUFNLEdBQUcsd0NBQWlCSCxHQUFqQixDQUFmOztBQUNBLE1BQUksQ0FBQ0csTUFBTSxDQUFDQyxPQUFQLEVBQUwsRUFBdUI7QUFDbkIsV0FBT0gsR0FBRyxDQUFDSSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFDeEJDLE1BQUFBLE9BQU8sRUFBRUosTUFBTSxDQUFDSyxHQURRO0FBRXhCO0FBQ0FMLE1BQUFBLE1BQU0sRUFBRUEsTUFBTSxDQUFDTSxLQUFQLENBQWE7QUFBQ0MsUUFBQUEsY0FBYyxFQUFDO0FBQWhCLE9BQWI7QUFIZ0IsS0FBckIsQ0FBUDtBQUtILEdBTkQsTUFNTTtBQUNGUixJQUFBQSxJQUFJO0FBQ1A7QUFDSiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHZhbGlkYXRpb25SZXN1bHQgfSBmcm9tIFwiZXhwcmVzcy12YWxpZGF0b3JcIjtcclxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1WYWxpZGF0aW9uKHJlcSwgcmVzLCBuZXh0KSB7XHJcbiAgICBjb25zdCBlcnJvcnMgPSB2YWxpZGF0aW9uUmVzdWx0KHJlcSk7XHJcbiAgICBpZiAoIWVycm9ycy5pc0VtcHR5KCkpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MjIpLmpzb24oe1xyXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvcnMubXNnLFxyXG4gICAgICAgICAgICAvLyBlcnJvcnM6IGVycm9ycy5lcnJvcnNcclxuICAgICAgICAgICAgZXJyb3JzOiBlcnJvcnMuYXJyYXkoe29ubHlGaXJzdEVycm9yOnRydWV9KVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNle1xyXG4gICAgICAgIG5leHQoKTtcclxuICAgIH1cclxufSJdfQ==